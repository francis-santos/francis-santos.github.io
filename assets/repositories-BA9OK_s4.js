import{b as e}from"./auth-Dt5LZyuD.js";import{u as l}from"./VChip-rM5LjFon.js";class c{baseUrl="/repositories";async getRepositories(t=1,o=20,a={}){const{isDemoUser:s,getMockData:n}=l();if(s.value){const r=await n("repositories",t,o,a);return{data:r.data,total:r.total,page:r.page,limit:r.limit,totalPages:Math.ceil(r.total/r.limit)}}const i=new URLSearchParams({page:t.toString(),limit:o.toString()});return a.platform&&a.platform!=="all"&&i.append("platform",a.platform),a.status&&a.status!=="all"&&i.append("status",a.status),a.search&&i.append("search",a.search),await e.get(`${this.baseUrl}?${i.toString()}`)}async getRepository(t){const{isDemoUser:o,getMockItem:a}=l();if(o.value){const s=await a("repositories",t);if(s)return{...s,statistics:{totalAnalyses:s.analysesCount||0,completedAnalyses:Math.floor((s.analysesCount||0)*.85),failedAnalyses:Math.floor((s.analysesCount||0)*.15),totalIssues:s.issuesCount||0,averageScore:s.averageScore||null,lastAnalysisAt:s.lastAnalysisAt||null,branches:3,contributors:5},recentAnalyses:[{id:"analysis-1",branchName:"main",commitSha:"a1b2c3d4",status:"completed",qualityScore:8.5,issuesFound:3,createdAt:"2024-11-15T10:30:00Z",completedAt:"2024-11-15T10:35:00Z"},{id:"analysis-2",branchName:"develop",commitSha:"e5f6g7h8",status:"completed",qualityScore:7.8,issuesFound:5,createdAt:"2024-11-14T15:20:00Z",completedAt:"2024-11-14T15:25:00Z"},{id:"analysis-3",branchName:"feature/auth",commitSha:"i9j0k1l2",status:"failed",qualityScore:0,issuesFound:0,createdAt:"2024-11-13T09:10:00Z",completedAt:null}]};throw new Error("Repositório não encontrado")}return await e.get(`${this.baseUrl}/${t}`)}async getRepositoryStatistics(t){return await e.get(`${this.baseUrl}/${t}/statistics`)}async createRepository(t){return await e.post(this.baseUrl,t)}async updateRepository(t,o){return await e.put(`${this.baseUrl}/${t}`,o)}async deleteRepository(t){await e.delete(`${this.baseUrl}/${t}`)}async syncRepository(t){await e.post(`${this.baseUrl}/${t}/sync`)}async pauseRepository(t){await e.post(`${this.baseUrl}/${t}/pause`)}async resumeRepository(t){await e.post(`${this.baseUrl}/${t}/resume`)}}const y=new c;export{y as r};
