import{d as H,D as te,K as tt,h as x,ab as _e,j as le,$ as U,_ as M,a1 as r,n,y as g,aa as C,V as A,Z as J,a0 as oe,P as Te,q as ke,s as $,w as W,A as de,t as j,a as Ve,v as q,o as at,I as ot,B as nt,R as lt,F as Ie,U as be,Y as ye,u as y,ah as it,ag as st}from"./vendor-vue-BKuzT1x2.js";import{u as Ce,a as Ee}from"./auth--EmZq-C7.js";import{u as rt}from"./useDemoMode-DpDjlFnd.js";import{V as ut}from"./VDialog-BfRWf8LZ.js";import{V as Be,a as ct,b as Ae,c as dt,d as O,e as se}from"./VGrid-CBGRWS1y.js";import{a as R,c as mt,b as Y,_ as me,d as vt,m as ve,u as ce,e as Le,f as ze,g as De,h as Ne,i as Pe,j as Me,k as ne,l as gt,n as ft,o as ht,p as pt,q as bt,V as yt}from"./index-gFSB3kms.js";import{V as wt}from"./VAlert-BZmB2o6G.js";import{V as $e}from"./VSpacer-CTPiANoM.js";import{l as xt}from"./logo_prodeb-BVoYJzK3.js";import{l as St}from"./logo_horizontal-BkjEFnEQ.js";import{p as X,h as G,n as ge,u as Z,j as Re,C as He,k as We,l as Ue,v as Q,B as Oe,q as Ye,E as ee,ad as qe,ae as Fe,a9 as _t,K as Tt,a1 as je,af as kt,ag as Vt,x as It}from"./vendor-ui-Ca7vMALJ.js";import{b as re,c as ue,V as K}from"./VList-Dg4abNUz.js";import{V as Ct,a as ae}from"./VChip-BfcyEr4e.js";import{u as Xe}from"./ssrBoot-DJyMk-ri.js";import{V as Et}from"./VTooltip-BVPiCKg9.js";import{V as Bt}from"./VMenu-BCjbZdow.js";import{V as At}from"./VContainer-cArkWCkC.js";import{V as Lt}from"./VMain-DT7pYSoO.js";import"./auth.service-BozCwdnf.js";import"./vendor-utils-6xD0fNU8.js";import"./token-storage.service-BqAv9k07.js";import"./dialog-transition-B8nu4acL.js";const zt={idleTimeout:18e5,warningTimeout:3e5,events:["mousedown","mousemove","keypress","scroll","touchstart","click"],showWarning:!0};function Dt(e={}){const l={...zt,...e},o=Ce(),p=_e(),t=Ee(),i=H(!1),a=H(!1),d=H(0),_=H(Date.now());let h=null,w=null,u=null;const v=()=>{const I=Date.now();_.value=I,i.value=!1,a.value&&(a.value=!1,s()),t.emitActivityDetected(I),D()},m=()=>{h&&(clearTimeout(h),h=null),w&&(clearTimeout(w),w=null),s()},s=()=>{u&&(clearInterval(u),u=null)},f=()=>{l.showWarning&&(a.value=!0,d.value=Math.floor(l.warningTimeout/1e3),t.emitIdleWarningStart(d.value),u=setInterval(()=>{d.value--,d.value<=0&&(s(),E())},1e3))},E=async()=>{if(i.value=!0,a.value=!1,m(),t.emitIdleForceLogout("Sessão encerrada por inatividade"),l.onIdleLogout)l.onIdleLogout();else try{await o.logout("idle_timeout"),await p.push("/login?reason=idle")}catch(I){console.error("Error during idle logout:",I),await p.push("/login?reason=idle")}},D=()=>{if(m(),!!o.isAuthenticated){if(l.showWarning){const I=l.idleTimeout-l.warningTimeout;w=setTimeout(()=>{f()},I)}h=setTimeout(()=>{E()},l.idleTimeout)}},S=()=>{a.value=!1,s(),t.emitIdleWarningDismiss(!0),v()},B=()=>{E()},L=()=>{t.initialize&&t.initialize(),t.onActivityDetected(I=>{I.timestamp>_.value&&(_.value=I.timestamp,a.value&&(a.value=!1,s()),D())}),t.onIdleWarningStart(I=>{!a.value&&l.showWarning&&(a.value=!0,d.value=I.timeRemaining,u=setInterval(()=>{d.value--,d.value<=0&&(s(),E())},1e3))}),t.onIdleWarningDismiss(I=>{a.value&&(a.value=!1,s(),I.extended&&v())}),t.onIdleForceLogout(()=>{E()})},T=()=>{l.events.forEach(I=>{document.addEventListener(I,v,!0)}),document.addEventListener("visibilitychange",()=>{document.hidden||v()}),L()},b=()=>{l.events.forEach(I=>{document.removeEventListener(I,v,!0)}),document.removeEventListener("visibilitychange",v)},c=()=>{o.isAuthenticated&&(T(),v())},k=()=>{b(),m(),i.value=!1,a.value=!1,t.cleanup&&t.cleanup()},V=()=>{m()},N=()=>{o.isAuthenticated&&D()},P=()=>{const I=Math.floor(d.value/60),ie=d.value%60;return`${I}:${ie.toString().padStart(2,"0")}`};return te(()=>{o.isAuthenticated&&c()}),tt(()=>{k()}),{isIdle:i,showWarningDialog:a,timeRemaining:d,lastActivity:_,warningTimeout:x(()=>Math.floor(l.warningTimeout/1e3)),start:c,stop:k,pause:V,resume:N,resetActivity:v,extendSession:S,forceLogout:B,getFormattedTimeRemaining:P,config:l}}const Nt={class:"d-flex align-center"},Pt={class:"text-center py-4"},Mt={class:"countdown-container mb-4"},$t={class:"countdown-circle"},Rt={class:"countdown-time"},Ht={class:"countdown-number"},Wt={class:"d-flex align-center"},Ut=le({__name:"IdleTimeoutWarning",props:{show:{type:Boolean,default:!1},timeRemaining:{default:0},totalWarningTime:{default:300}},emits:["extend","logout"],setup(e,{emit:l}){const o=e,p=x(()=>{const i=Math.floor(o.timeRemaining/60),a=o.timeRemaining%60;return`${i}:${a.toString().padStart(2,"0")}`}),t=x(()=>o.totalWarningTime===0?0:(o.totalWarningTime-o.timeRemaining)/o.totalWarningTime*100);return(i,a)=>(M(),U(ut,{"model-value":e.show,"max-width":"500px",persistent:"","no-click-animation":""},{default:r(()=>[n(Be,null,{default:r(()=>[n(ct,{class:"text-h6 d-flex align-center justify-space-between bg-warning text-white sticky-header"},{default:r(()=>[g("div",Nt,[n(R,{class:"me-2"},{default:r(()=>[...a[2]||(a[2]=[C("mdi-clock-alert",-1)])]),_:1}),a[3]||(a[3]=C(" Sessão Inativa ",-1))]),n(R,null,{default:r(()=>[...a[4]||(a[4]=[C("mdi-timer-sand",-1)])]),_:1})]),_:1}),n(Ae,{class:"pa-6"},{default:r(()=>[g("div",Pt,[n(R,{size:"64",color:"warning",class:"mb-4"},{default:r(()=>[...a[5]||(a[5]=[C("mdi-account-clock",-1)])]),_:1}),a[9]||(a[9]=g("h3",{class:"text-h5 font-weight-bold text-warning mb-3"}," Sua sessão expirará em breve ",-1)),a[10]||(a[10]=g("p",{class:"text-body-1 text-medium-emphasis mb-4"}," Detectamos que você está inativo há algum tempo. Por motivos de segurança, sua sessão será encerrada automaticamente. ",-1)),g("div",Mt,[g("div",$t,[n(mt,{"model-value":t.value,size:120,width:8,color:"warning",class:"countdown-progress"},{default:r(()=>[g("div",Rt,[g("div",Ht,A(p.value),1),a[6]||(a[6]=g("div",{class:"countdown-label"},"restante",-1))])]),_:1},8,["model-value"])])]),n(wt,{type:"info",variant:"tonal",class:"mb-4"},{default:r(()=>[g("div",Wt,[n(R,{class:"me-2"},{default:r(()=>[...a[7]||(a[7]=[C("mdi-information",-1)])]),_:1}),a[8]||(a[8]=g("div",null,[g("div",{class:"font-weight-medium mb-1"},"O que acontecerá:"),g("div",{class:"text-body-2"},[C(" • Você será desconectado automaticamente"),g("br"),C(" • Será redirecionado para a tela de login"),g("br"),C(" • Dados não salvos podem ser perdidos ")])],-1))])]),_:1})])]),_:1}),n(dt,{class:"px-6 py-4 bg-surface border-t"},{default:r(()=>[n(Y,{variant:"outlined",color:"error",onClick:a[0]||(a[0]=d=>i.$emit("logout")),disabled:e.timeRemaining<=0},{default:r(()=>[n(R,{class:"me-2"},{default:r(()=>[...a[11]||(a[11]=[C("mdi-logout",-1)])]),_:1}),a[12]||(a[12]=C(" Sair Agora ",-1))]),_:1},8,["disabled"]),n($e),n(Y,{color:"primary",variant:"flat",onClick:a[1]||(a[1]=d=>i.$emit("extend")),disabled:e.timeRemaining<=0},{default:r(()=>[n(R,{class:"me-2"},{default:r(()=>[...a[13]||(a[13]=[C("mdi-refresh",-1)])]),_:1}),a[14]||(a[14]=C(" Continuar Trabalhando ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),Ot=me(Ut,[["__scopeId","data-v-7c4f3115"]]),Yt={class:"d-flex align-center"},qt={class:"notification-content"},Ft={class:"notification-title"},jt={key:0,class:"notification-message"},Xt=le({__name:"CrossTabNotification",props:{enabled:{type:Boolean,default:!0}},setup(e){const l=e,o=H(!1),p=H(null),t=Ee(),i=x(()=>p.value?.title||""),a=x(()=>p.value?.message||""),d=x(()=>p.value?.color||"info"),_=x(()=>p.value?.icon||"mdi-information"),h=x(()=>p.value?.timeout||4e3),w={"auth:login":{title:"Sessão Iniciada",message:"Login realizado em outra aba",color:"success",icon:"mdi-account-check",timeout:3e3},"auth:logout":{title:"Sessão Encerrada",message:"Logout realizado em outra aba",color:"warning",icon:"mdi-logout",timeout:4e3},"auth:profile-update":{title:"Perfil Atualizado",message:"Suas informações foram atualizadas",color:"info",icon:"mdi-account-edit",timeout:3e3},"auth:session-expired":{title:"Sessão Expirada",message:"Sua sessão foi encerrada automaticamente",color:"error",icon:"mdi-clock-alert",timeout:5e3},"idle:warning-start":{title:"Aviso de Inatividade",message:"Sessão será encerrada por inatividade em breve",color:"warning",icon:"mdi-timer-sand",timeout:4e3},"idle:warning-dismiss":{title:"Sessão Estendida",message:"Tempo de sessão foi renovado",color:"success",icon:"mdi-timer-refresh",timeout:2e3},"idle:activity-detected":{title:"Atividade Detectada",message:"Atividade registrada em outra aba",color:"info",icon:"mdi-cursor-default",timeout:1500},"idle:force-logout":{title:"Logout por Inatividade",message:"Sessão encerrada por inatividade prolongada",color:"error",icon:"mdi-account-clock",timeout:6e3}},u=(m,s)=>{if(!l.enabled)return;const f=w[m];f&&(p.value={type:m,title:f.title,message:s||f.message,color:f.color,icon:f.icon,timeout:f.timeout},o.value=!0)},v=()=>{t.onLogin(()=>{u("auth:login")}),t.onLogout(m=>{const s=m.reason?`Motivo: ${m.reason}`:"Logout realizado em outra aba";u("auth:logout",s)}),t.onProfileUpdate(()=>{u("auth:profile-update")}),t.onSessionExpired(m=>{u("auth:session-expired",`Motivo: ${m.reason}`)}),t.onIdleWarningStart(m=>{const s=Math.floor(m.timeRemaining/60),f=m.timeRemaining%60,E=`${s}:${f.toString().padStart(2,"0")}`;u("idle:warning-start",`Tempo restante: ${E}`)}),t.onIdleWarningDismiss(m=>{m.extended&&u("idle:warning-dismiss")}),t.onIdleForceLogout(()=>{u("idle:force-logout")})};return te(()=>{l.enabled&&v()}),(m,s)=>(M(),U(vt,{modelValue:o.value,"onUpdate:modelValue":s[1]||(s[1]=f=>o.value=f),timeout:h.value,color:d.value,location:"top",variant:"elevated",elevation:"6",class:"cross-tab-notification"},{actions:r(()=>[n(Y,{variant:"text",size:"small",onClick:s[0]||(s[0]=f=>o.value=!1)},{default:r(()=>[n(R,null,{default:r(()=>[...s[2]||(s[2]=[C("mdi-close",-1)])]),_:1})]),_:1})]),default:r(()=>[g("div",Yt,[n(R,{class:"me-3",size:"20"},{default:r(()=>[C(A(_.value),1)]),_:1}),g("div",qt,[g("div",Ft,A(i.value),1),a.value?(M(),J("div",jt,A(a.value),1)):oe("",!0)])])]),_:1},8,["modelValue","timeout","color"]))}}),Gt=me(Xt,[["__scopeId","data-v-5045b2cb"]]),Zt="/assets/icon-D4ATo0P4.png",Ge=X({text:String,...ge(),...ve()},"VToolbarTitle"),Ze=G()({name:"VToolbarTitle",props:Ge(),setup(e,l){let{slots:o}=l;return Z(()=>{const p=!!(o.default||o.text||e.text);return n(e.tag,{class:ke(["v-toolbar-title",e.class]),style:Te(e.style)},{default:()=>[p&&g("div",{class:"v-toolbar-title__placeholder"},[o.text?o.text():e.text,o.default?.()])]})}),{}}}),Kt=[null,"prominent","default","comfortable","compact"],Ke=X({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Kt.includes(e)},extended:{type:Boolean,default:null},extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Me(),...ge(),...Pe(),...Ne(),...ve({tag:"header"}),...Ue()},"VToolbar"),we=G()({name:"VToolbar",props:Ke(),setup(e,l){let{slots:o}=l;const{backgroundColorClasses:p,backgroundColorStyles:t}=ce(()=>e.color),{borderClasses:i}=Le(e),{elevationClasses:a}=ze(e),{roundedClasses:d}=De(e),{themeClasses:_}=Re(e),{rtlClasses:h}=He(),w=$(e.extended===null?!!o.extension?.():e.extended),u=x(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),v=x(()=>w.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return We({VBtn:{variant:"text"}}),Z(()=>{const m=!!(e.title||o.title),s=!!(o.image||e.image),f=o.extension?.();return w.value=e.extended===null?!!f:e.extended,n(e.tag,{class:ke(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},p.value,i.value,a.value,d.value,_.value,h.value,e.class]),style:Te([t.value,e.style])},{default:()=>[s&&g("div",{key:"image",class:"v-toolbar__image"},[o.image?n(ne,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},o.image):n(O,{key:"image-img",cover:!0,src:e.image},null)]),n(ne,{defaults:{VTabs:{height:Q(u.value)}}},{default:()=>[g("div",{class:"v-toolbar__content",style:{height:Q(u.value)}},[o.prepend&&g("div",{class:"v-toolbar__prepend"},[o.prepend?.()]),m&&n(Ze,{key:"title",text:e.title},{text:o.title}),o.default?.(),o.append&&g("div",{class:"v-toolbar__append"},[o.append?.()])])]}),n(ne,{defaults:{VTabs:{height:Q(v.value)}}},{default:()=>[n(Ct,null,{default:()=>[w.value&&g("div",{class:"v-toolbar__extension",style:{height:Q(v.value)}},[f])]})]})]})}),{contentHeight:u,extensionHeight:v}}}),Jt=X({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Qt(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:o}=l;let p=0,t=0;const i=H(null),a=$(0),d=$(0),_=$(0),h=$(!1),w=$(!1),u=x(()=>Number(e.scrollThreshold)),v=x(()=>Oe((u.value-a.value)/u.value||0)),m=()=>{const s=i.value;if(!s||o&&!o.value)return;p=a.value,a.value="window"in s?s.pageYOffset:s.scrollTop;const f=s instanceof Window?document.documentElement.scrollHeight:s.scrollHeight;if(t!==f){t=f;return}w.value=a.value<p,_.value=Math.abs(a.value-u.value)};return W(w,()=>{d.value=d.value||a.value}),W(h,()=>{d.value=0}),te(()=>{W(()=>e.scrollTarget,s=>{const f=s?document.querySelector(s):window;f&&f!==i.value&&(i.value?.removeEventListener("scroll",m),i.value=f,i.value.addEventListener("scroll",m,{passive:!0}))},{immediate:!0})}),de(()=>{i.value?.removeEventListener("scroll",m)}),o&&W(o,m,{immediate:!0}),{scrollThreshold:u,currentScroll:a,currentThreshold:_,isScrollActive:h,scrollRatio:v,isScrollingUp:w,savedScroll:d}}const ea=X({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...Ke(),...Fe(),...Jt(),height:{type:[Number,String],default:64}},"VAppBar"),ta=G()({name:"VAppBar",props:ea(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:o}=l;const p=H(),t=Ye(e,"modelValue"),i=x(()=>{const S=new Set(e.scrollBehavior?.split(" ")??[]);return{hide:S.has("hide"),fullyHide:S.has("fully-hide"),inverted:S.has("inverted"),collapse:S.has("collapse"),elevate:S.has("elevate"),fadeImage:S.has("fade-image")}}),a=x(()=>{const S=i.value;return S.hide||S.fullyHide||S.inverted||S.collapse||S.elevate||S.fadeImage||!t.value}),{currentScroll:d,scrollThreshold:_,isScrollingUp:h,scrollRatio:w}=Qt(e,{canScroll:a}),u=j(()=>i.value.hide||i.value.fullyHide),v=x(()=>e.collapse||i.value.collapse&&(i.value.inverted?w.value>0:w.value===0)),m=x(()=>e.flat||i.value.fullyHide&&!t.value||i.value.elevate&&(i.value.inverted?d.value>0:d.value===0)),s=x(()=>i.value.fadeImage?i.value.inverted?1-w.value:w.value:void 0),f=x(()=>{if(i.value.hide&&i.value.inverted)return 0;const S=p.value?.contentHeight??0,B=p.value?.extensionHeight??0;return u.value?d.value<_.value||i.value.fullyHide?S+B:S:S+B});ee(()=>!!e.scrollBehavior,()=>{Ve(()=>{u.value?i.value.inverted?t.value=d.value>_.value:t.value=h.value||d.value<_.value:t.value=!0})});const{ssrBootStyles:E}=Xe(),{layoutItemStyles:D}=qe({id:e.name,order:x(()=>parseInt(e.order,10)),position:j(()=>e.location),layoutSize:f,elementSize:$(void 0),active:t,absolute:j(()=>e.absolute)});return Z(()=>{const S=we.filterProps(e);return n(we,q({ref:p,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...D.value,"--v-toolbar-image-opacity":s.value,height:void 0,...E.value},e.style]},S,{collapse:v.value,flat:m.value}),o)}),{}}}),aa=X({..._t(gt({icon:"$menu",variant:"text"}),["spaced"])},"VAppBarNavIcon"),oa=G()({name:"VAppBarNavIcon",props:aa(),setup(e,l){let{slots:o}=l;return Z(()=>n(Y,q(e,{class:["v-app-bar-nav-icon"]}),o)),{}}}),na=G()({name:"VAppBarTitle",props:Ge(),setup(e,l){let{slots:o}=l;return Z(()=>n(Ze,q(e,{class:"v-app-bar-title"}),o)),{}}});function la(e){let{rootEl:l,isSticky:o,layoutItemStyles:p}=e;const t=$(!1),i=$(0),a=x(()=>{const h=typeof t.value=="boolean"?"top":t.value;return[o.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[h]:Q(i.value)}:{top:p.value.top}]});te(()=>{W(o,h=>{h?window.addEventListener("scroll",_,{passive:!0}):window.removeEventListener("scroll",_)},{immediate:!0})}),de(()=>{window.removeEventListener("scroll",_)});let d=0;function _(){const h=d>window.scrollY?"up":"down",w=l.value.getBoundingClientRect(),u=parseFloat(p.value.top??0),v=window.scrollY-Math.max(0,i.value-u),m=w.height+Math.max(i.value,u)-window.scrollY-window.innerHeight,s=parseFloat(getComputedStyle(l.value).getPropertyValue("--v-body-scroll-y"))||0;w.height<window.innerHeight-u?(t.value="top",i.value=u):h==="up"&&t.value==="bottom"||h==="down"&&t.value==="top"?(i.value=window.scrollY+w.top-s,t.value=!0):h==="down"&&m<=0?(i.value=0,t.value="bottom"):h==="up"&&v<=0&&(s?t.value!=="top"&&(i.value=-v+s+u,t.value="top"):(i.value=w.top+v,t.value="top")),d=window.scrollY}return{isStuck:t,stickyStyles:a}}const ia=100,sa=20;function xe(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function Se(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let l=0;for(let o=e.length-1;o>0;o--){if(e[o].t===e[o-1].t)continue;const p=xe(l),t=(e[o].d-e[o-1].d)/(e[o].t-e[o-1].t);l+=(t-p)*Math.abs(t),o===e.length-1&&(l*=.5)}return xe(l)*1e3}function ra(){const e={};function l(t){Array.from(t.changedTouches).forEach(i=>{(e[i.identifier]??(e[i.identifier]=new Tt(sa))).push([t.timeStamp,i])})}function o(t){Array.from(t.changedTouches).forEach(i=>{delete e[i.identifier]})}function p(t){const i=e[t]?.values().reverse();if(!i)throw new Error(`No samples for touch id ${t}`);const a=i[0],d=[],_=[];for(const h of i){if(a[0]-h[0]>ia)break;d.push({t:h[0],d:h[1].clientX}),_.push({t:h[0],d:h[1].clientY})}return{x:Se(d),y:Se(_),get direction(){const{x:h,y:w}=this,[u,v]=[Math.abs(h),Math.abs(w)];return u>v&&h>=0?"right":u>v&&h<=0?"left":v>u&&w>=0?"down":v>u&&w<=0?"up":ua()}}}return{addMovement:l,endTouch:o,getVelocity:p}}function ua(){throw new Error}function ca(e){let{el:l,isActive:o,isTemporary:p,width:t,touchless:i,position:a}=e;te(()=>{window.addEventListener("touchstart",S,{passive:!0}),window.addEventListener("touchmove",B,{passive:!1}),window.addEventListener("touchend",L,{passive:!0})}),de(()=>{window.removeEventListener("touchstart",S),window.removeEventListener("touchmove",B),window.removeEventListener("touchend",L)});const d=x(()=>["left","right"].includes(a.value)),{addMovement:_,endTouch:h,getVelocity:w}=ra();let u=!1;const v=$(!1),m=$(0),s=$(0);let f;function E(b,c){return(a.value==="left"?b:a.value==="right"?document.documentElement.clientWidth-b:a.value==="top"?b:a.value==="bottom"?document.documentElement.clientHeight-b:F())-(c?t.value:0)}function D(b){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const k=a.value==="left"?(b-s.value)/t.value:a.value==="right"?(document.documentElement.clientWidth-b-s.value)/t.value:a.value==="top"?(b-s.value)/t.value:a.value==="bottom"?(document.documentElement.clientHeight-b-s.value)/t.value:F();return c?Oe(k):k}function S(b){if(i.value)return;const c=b.changedTouches[0].clientX,k=b.changedTouches[0].clientY,V=25,N=a.value==="left"?c<V:a.value==="right"?c>document.documentElement.clientWidth-V:a.value==="top"?k<V:a.value==="bottom"?k>document.documentElement.clientHeight-V:F(),P=o.value&&(a.value==="left"?c<t.value:a.value==="right"?c>document.documentElement.clientWidth-t.value:a.value==="top"?k<t.value:a.value==="bottom"?k>document.documentElement.clientHeight-t.value:F());(N||P||o.value&&p.value)&&(f=[c,k],s.value=E(d.value?c:k,o.value),m.value=D(d.value?c:k),u=s.value>-20&&s.value<80,h(b),_(b))}function B(b){const c=b.changedTouches[0].clientX,k=b.changedTouches[0].clientY;if(u){if(!b.cancelable){u=!1;return}const N=Math.abs(c-f[0]),P=Math.abs(k-f[1]);(d.value?N>P&&N>3:P>N&&P>3)?(v.value=!0,u=!1):(d.value?P:N)>3&&(u=!1)}if(!v.value)return;b.preventDefault(),_(b);const V=D(d.value?c:k,!1);m.value=Math.max(0,Math.min(1,V)),V>1?s.value=E(d.value?c:k,!0):V<0&&(s.value=E(d.value?c:k,!1))}function L(b){if(u=!1,!v.value)return;_(b),v.value=!1;const c=w(b.changedTouches[0].identifier),k=Math.abs(c.x),V=Math.abs(c.y);(d.value?k>V&&k>400:V>k&&V>3)?o.value=c.direction===({left:"right",right:"left",top:"down",bottom:"up"}[a.value]||F()):o.value=m.value>.5}const T=x(()=>v.value?{transform:a.value==="left"?`translateX(calc(-100% + ${m.value*t.value}px))`:a.value==="right"?`translateX(calc(100% - ${m.value*t.value}px))`:a.value==="top"?`translateY(calc(-100% + ${m.value*t.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${m.value*t.value}px))`:F(),transition:"none"}:void 0);return ee(v,()=>{const b=l.value?.style.transform??null,c=l.value?.style.transition??null;Ve(()=>{l.value?.style.setProperty("transform",T.value?.transform||"none"),l.value?.style.setProperty("transition",T.value?.transition||null)}),at(()=>{l.value?.style.setProperty("transform",b),l.value?.style.setProperty("transition",c)})}),{isDragging:v,dragProgress:m,dragStyles:T}}function F(){throw new Error}const da=["start","end","left","right","top","bottom"],ma=X({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>da.includes(e)},sticky:Boolean,...Me(),...ge(),...bt(),...Vt({mobile:null}),...Pe(),...Fe(),...Ne(),...ve({tag:"nav"}),...Ue()},"VNavigationDrawer"),va=G()({name:"VNavigationDrawer",props:ma(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,l){let{attrs:o,emit:p,slots:t}=l;const{isRtl:i}=He(),{themeClasses:a}=Re(e),{borderClasses:d}=Le(e),{backgroundColorClasses:_,backgroundColorStyles:h}=ce(()=>e.color),{elevationClasses:w}=ze(e),{displayClasses:u,mobile:v}=je(e),{roundedClasses:m}=De(e),s=ft(),f=Ye(e,"modelValue",null,z=>!!z),{ssrBootStyles:E}=Xe(),{scopeId:D}=ht(),S=H(),B=$(!1),{runOpenDelay:L,runCloseDelay:T}=pt(e,z=>{B.value=z}),b=x(()=>e.rail&&e.expandOnHover&&B.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),c=x(()=>kt(e.location,i.value)),k=j(()=>e.persistent),V=x(()=>!e.permanent&&(v.value||e.temporary)),N=x(()=>e.sticky&&!V.value&&c.value!=="bottom");ee(()=>e.expandOnHover&&e.rail!=null,()=>{W(B,z=>p("update:rail",!z))}),ee(()=>!e.disableResizeWatcher,()=>{W(V,z=>!e.permanent&&ot(()=>f.value=!z))}),ee(()=>!e.disableRouteWatcher&&!!s,()=>{W(s.currentRoute,()=>V.value&&(f.value=!1))}),W(()=>e.permanent,z=>{z&&(f.value=!0)}),e.modelValue==null&&!V.value&&(f.value=e.permanent||!v.value);const{isDragging:P,dragProgress:I}=ca({el:S,isActive:f,isTemporary:V,width:b,touchless:j(()=>e.touchless),position:c}),ie=x(()=>{const z=V.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):b.value;return P.value?z*I.value:z}),{layoutItemStyles:fe,layoutItemScrimStyles:Je}=qe({id:e.name,order:x(()=>parseInt(e.order,10)),position:c,layoutSize:ie,elementSize:b,active:nt(f),disableTransitions:j(()=>P.value),absolute:x(()=>e.absolute||N.value&&typeof he.value!="string")}),{isStuck:he,stickyStyles:Qe}=la({rootEl:S,isSticky:N,layoutItemStyles:fe}),pe=ce(()=>typeof e.scrim=="string"?e.scrim:null),et=x(()=>({...P.value?{opacity:I.value*.2,transition:"none"}:void 0,...Je.value}));return We({VList:{bgColor:"transparent"}}),Z(()=>{const z=t.image||e.image;return g(Ie,null,[n(e.tag,q({ref:S,onMouseenter:L,onMouseleave:T,class:["v-navigation-drawer",`v-navigation-drawer--${c.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":B.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":V.value,"v-navigation-drawer--persistent":k.value,"v-navigation-drawer--active":f.value,"v-navigation-drawer--sticky":N.value},a.value,_.value,d.value,u.value,w.value,m.value,e.class],style:[h.value,fe.value,E.value,Qe.value,e.style]},D,o),{default:()=>[z&&g("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?n(ne,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):n(O,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&g("div",{class:"v-navigation-drawer__prepend"},[t.prepend?.()]),g("div",{class:"v-navigation-drawer__content"},[t.default?.()]),t.append&&g("div",{class:"v-navigation-drawer__append"},[t.append?.()])]}),n(lt,{name:"fade-transition"},{default:()=>[V.value&&(P.value||f.value)&&!!e.scrim&&g("div",q({class:["v-navigation-drawer__scrim",pe.backgroundColorClasses.value],style:[et.value,pe.backgroundColorStyles.value],onClick:()=>{k.value||(f.value=!1)}},D),null)]})])}),{isStuck:he}}}),ga={class:"pa-4 d-flex align-center justify-center"},fa={class:"pa-4"},ha={class:"mt-3 d-flex justify-center"},pa={class:"d-flex align-center"},ba={class:"pa-3 help-tooltip"},ya={class:"text-subtitle-2 font-weight-bold mb-1"},wa={class:"text-body-2"},xa={key:1,class:"text-caption font-weight-bold"},Sa={key:0,class:"d-flex flex-column align-start"},_a={class:"text-body-2 font-weight-medium"},Ta={class:"text-caption text-medium-emphasis"},ka={class:"d-flex align-center"},Va={key:1,class:"text-h6 font-weight-bold"},Ia={class:"flex-grow-1"},Ca={class:"text-subtitle-1 font-weight-medium"},Ea={class:"text-caption text-medium-emphasis"},Ba=le({__name:"AppLayout",setup(e){const{mobile:l}=je(),o=It(),p=_e(),t=Ce(),{isDemoUser:i}=rt(),{showWarningDialog:a,timeRemaining:d,warningTimeout:_,extendSession:h,forceLogout:w}=Dt(),u=H(!0),v=H(!1),m=H(!1);t.isAuthenticated||t.setUser({id:"1",fullName:"João Silva",username:"joao.silva",email:"joao.silva@prodeb.ba.gov.br",organizationId:"prodeb-bahia",organizationName:"PRODEB"}),x(()=>o.global.name.value==="miraDark");const s=()=>{l.value?u.value=!u.value:v.value=!v.value},f=[{title:"Dashboard",icon:"mdi-view-dashboard",to:"/dashboard",color:"primary",description:"Visão geral com métricas, gráficos e resumos das atividades do sistema"},{title:"Análises",icon:"mdi-chart-line",to:"/analyses",color:"info",description:"Histórico e detalhes de todas as análises de código realizadas"},{title:"Repositórios",icon:"mdi-source-repository",to:"/repositories",color:"success",description:"Gerencie repositórios conectados do GitHub, GitLab e Bitbucket"},{title:"Especialistas IA",icon:"mdi-robot",to:"/experts",color:"deep-purple",description:"Configure especialistas de IA para análise específica por linguagem e contexto"},{title:"Regras",icon:"mdi-shield-check-outline",to:"/rules",color:"orange",description:"Configure e gerencie regras de qualidade de código da sua organização"},{title:"Templates",icon:"mdi-file-document-multiple-outline",to:"/rule-templates",color:"indigo",description:"Biblioteca de templates de regras prontos para usar em seus projetos"},{title:"Webhooks Logs",icon:"mdi-webhook",to:"/webhooks",color:"pink",description:"Monitore logs e eventos de webhooks das integrações Git"},{title:"Logs do Sistema",icon:"mdi-file-document-multiple-outline",to:"/system-logs",color:"teal",description:"Visualize logs de sistema, erros e atividades administrativas"},{title:"Logs da Organização",icon:"mdi-domain",to:"/organization-logs",color:"indigo",description:"Acompanhe atividades e logs específicos da sua organização"},{title:"Usuários",icon:"mdi-account-group",to:"/users",color:"blue",description:"Gerencie usuários, permissões e acessos do sistema"},{title:"Organizações",icon:"mdi-domain",to:"/organizations",color:"purple",description:"Administre organizações, configurações e estruturas hierárquicas"},{title:"Solicitações de Acesso",icon:"mdi-account-plus",to:"/access-requests",color:"warning",description:"Analise e aprove solicitações de novos usuários ao sistema"},{title:"Tokens de API",icon:"mdi-key",to:"/api-tokens",color:"orange",description:"Gerencie tokens de autenticação para integrações e API"},{title:"Configurações",icon:"mdi-cog",to:"/settings",color:"grey",description:"Ajuste preferências do sistema, notificações e configurações gerais"}],E=x(()=>l.value?56:64),D=async()=>{try{await t.logout(),p.push("/login")}catch(L){console.error("Erro ao fazer logout:",L),p.push("/login")}},S=L=>L.split(" ").map(T=>T[0]).join("").toUpperCase().slice(0,2),B=x(()=>{const L=p.currentRoute.value.path;return f.find(b=>b.to===L)||null});return(L,T)=>{const b=st("router-view");return M(),U(yt,null,{default:r(()=>[n(va,{modelValue:u.value,"onUpdate:modelValue":T[0]||(T[0]=c=>u.value=c),rail:v.value&&!y(l),permanent:!y(l),temporary:y(l),color:"background",class:"elevation-2"},{append:r(()=>[g("div",fa,[n(ae,{color:"primary",variant:"tonal","prepend-icon":"mdi-domain",block:"",title:`Organização: ${y(t).user?.organizationName||"N/A"}`},{default:r(()=>[C(A(y(t).user?.organizationName||"Organização não definida"),1)]),_:1},8,["title"]),g("div",ha,[n(O,{src:y(xt),alt:"PRODEB Logo","max-width":"120","max-height":"40",contain:"",class:"logo-prodeb"},null,8,["src"])])])]),default:r(()=>[g("div",ga,[be(n(O,{src:y(St),alt:"Mira Analytics Logo","max-width":"160","max-height":"60",contain:"",class:"logo-horizontal"},null,8,["src"]),[[ye,!v.value||y(l)]]),be(n(se,{size:"32",color:"primary"},{default:r(()=>[n(O,{src:y(Zt),contain:"",alt:"Mira logo"},null,8,["src"])]),_:1},512),[[ye,v.value&&!y(l)]])]),n(re,{class:"mx-2"}),n(ue,{nav:"",density:"comfortable",class:"pa-2"},{default:r(()=>[(M(),J(Ie,null,it(f,c=>n(K,{key:c.title,to:c.to,title:c.title,"prepend-icon":c.icon,class:"mb-1",rounded:"lg"},{prepend:r(()=>[n(R,{color:c.color},{default:r(()=>[C(A(c.icon),1)]),_:2},1032,["color"])]),_:2},1032,["to","title","prepend-icon"])),64))]),_:1})]),_:1},8,["modelValue","rail","permanent","temporary"]),n(ta,{height:E.value,color:"surface",elevation:"1",class:"px-4"},{default:r(()=>[n(oa,{onClick:s},{default:r(()=>[n(R,null,{default:r(()=>[C(A(v.value&&!y(l)?"mdi-menu-open":"mdi-menu"),1)]),_:1})]),_:1}),g("div",pa,[n(na,{class:"text-h6 font-weight-medium"},{default:r(()=>[C(A(L.$route.meta.title||B.value?.title||"Dashboard"),1)]),_:1}),B.value?.description?(M(),U(Et,{key:0,location:"bottom"},{activator:r(({props:c})=>[n(Y,q(c,{icon:"mdi-help-circle-outline",variant:"text",size:"small",class:"ml-2 help-button"}),null,16)]),default:r(()=>[g("div",ba,[g("div",ya,A(B.value.title),1),g("div",wa,A(B.value.description),1)])]),_:1})):oe("",!0)]),n($e),n(Y,{icon:"mdi-bell-outline",variant:"text",class:"mr-2"}),y(i)?(M(),U(ae,{key:0,color:"warning",variant:"flat","prepend-icon":"mdi-test-tube",size:"small",class:"mr-2",title:"Modo demonstração - Todos os dados são fictícios"},{default:r(()=>[...T[5]||(T[5]=[C(" DEMO ",-1)])]),_:1})):oe("",!0),n(ae,{color:"success",variant:"tonal","prepend-icon":"mdi-check-circle",size:"small",class:"mr-4"},{default:r(()=>[...T[6]||(T[6]=[C(" Sistema Online ",-1)])]),_:1}),n(Bt,{modelValue:m.value,"onUpdate:modelValue":T[4]||(T[4]=c=>m.value=c),"close-on-content-click":!1,location:"bottom end"},{activator:r(({props:c})=>[n(Y,q(c,{variant:"text",class:"text-none"}),{default:r(()=>[n(se,{size:"32",class:"mr-2"},{default:r(()=>[y(t).user?.avatarUrl?(M(),U(O,{key:0,src:y(t).user.avatarUrl,alt:y(t).user.fullName},null,8,["src","alt"])):(M(),J("span",xa,A(S(y(t).user?.fullName||y(t).user?.username||"U")),1))]),_:1}),y(l)?oe("",!0):(M(),J("div",Sa,[g("span",_a,A(y(t).user?.fullName||y(t).user?.username||"Usuário"),1),g("span",Ta,A(y(t).user?.email||"email@example.com"),1)])),n(R,{class:"ml-2",size:"16"},{default:r(()=>[...T[7]||(T[7]=[C("mdi-chevron-down",-1)])]),_:1})]),_:1},16)]),default:r(()=>[n(Be,{"min-width":"280"},{default:r(()=>[n(Ae,{class:"pb-2"},{default:r(()=>[g("div",ka,[n(se,{size:"48",class:"mr-3"},{default:r(()=>[y(t).user?.avatarUrl?(M(),U(O,{key:0,src:y(t).user.avatarUrl,alt:y(t).user.fullName},null,8,["src","alt"])):(M(),J("span",Va,A(S(y(t).user?.fullName||y(t).user?.username||"U")),1))]),_:1}),g("div",Ia,[g("div",Ca,A(y(t).user?.fullName||y(t).user?.username||"Usuário"),1),g("div",Ea,A(y(t).user?.email||"email@example.com"),1),n(ae,{size:"x-small",color:"primary",variant:"tonal",class:"mt-1"},{default:r(()=>[C(A(y(t).userRole||"user"),1)]),_:1})])])]),_:1}),n(re),n(ue,{density:"compact",nav:""},{default:r(()=>[n(K,{"prepend-icon":"mdi-account-circle",title:"Meu Perfil",to:"/profile",onClick:T[1]||(T[1]=c=>m.value=!1)}),n(K,{"prepend-icon":"mdi-key",title:"Meus Tokens",to:"/api-tokens",onClick:T[2]||(T[2]=c=>m.value=!1)}),n(K,{"prepend-icon":"mdi-cog",title:"Configurações",to:"/settings",onClick:T[3]||(T[3]=c=>m.value=!1)})]),_:1}),n(re),n(ue,{density:"compact"},{default:r(()=>[n(K,{"prepend-icon":"mdi-logout",title:"Sair",onClick:D,class:"text-error"},{prepend:r(()=>[n(R,{color:"error"},{default:r(()=>[...T[8]||(T[8]=[C("mdi-logout",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["height"]),n(Lt,null,{default:r(()=>[n(At,{fluid:"",class:"pa-0"},{default:r(()=>[n(b)]),_:1})]),_:1}),n(Ot,{show:y(a),"time-remaining":y(d),"total-warning-time":y(_),onExtend:y(h),onLogout:y(w)},null,8,["show","time-remaining","total-warning-time","onExtend","onLogout"]),n(Gt,{enabled:!0})]),_:1})}}}),Aa=me(Ba,[["__scopeId","data-v-408c4fdf"]]),eo=le({__name:"MainLayout",setup(e){return(l,o)=>(M(),U(Aa))}});export{eo as default};
