import{V as q,a as k}from"./VRow-C_u8820H.js";import{V as T,e as se,a as ue,b as pe}from"./VGrid-CBGRWS1y.js";import{a as C,_ as R,b as P,t as H}from"./index-gFSB3kms.js";import{a as F}from"./VChip-BfcyEr4e.js";import{j as I,$ as f,a1 as a,_ as c,Z as x,ah as j,F as L,n as t,y as e,aa as p,V as u,h as y,u as h,q as ae,w as me,d as $,D as ge,K as he,a0 as te}from"./vendor-vue-BKuzT1x2.js";import{C as G,a as X,L as Y,P as ve,b as ye,p as ee,c as Q,d as W,i as fe,e as be,A as _e,D as xe,B as oe,f as ie}from"./vendor-charts-BaivTcun.js";import{V as z}from"./VSkeletonLoader-oSDEuG7l.js";import{d as M}from"./dashboard.service-CfLUye5J.js";import{u as we}from"./useDemoMode-DpDjlFnd.js";import{V as Ce}from"./VAlert-BZmB2o6G.js";import"./vendor-ui-Ca7vMALJ.js";import"./auth.service-BozCwdnf.js";import"./vendor-utils-6xD0fNU8.js";import"./token-storage.service-BqAv9k07.js";import"./auth--EmZq-C7.js";const Ae={class:"d-flex align-center justify-space-between mb-3"},Se={class:"text-h4 font-weight-bold text-high-emphasis mb-1"},$e={class:"text-body-2 text-medium-emphasis mb-0"},ke=I({__name:"StatsCards",props:{stats:{},loading:{type:Boolean}},setup(l){return(n,m)=>(c(),f(q,null,{default:a(()=>[(c(!0),x(L,null,j(l.stats,o=>(c(),f(k,{key:o.title,cols:"12",sm:"6",lg:"3"},{default:a(()=>[t(T,{class:"stats-card pa-4",elevation:"2",loading:l.loading},{default:a(()=>[e("div",Ae,[t(se,{color:o.color,size:"48",class:"elevation-2"},{default:a(()=>[t(C,{color:`${o.color}-darken-2`,size:"24"},{default:a(()=>[p(u(o.icon),1)]),_:2},1032,["color"])]),_:2},1032,["color"]),t(F,{color:o.changeColor,size:"small",variant:"tonal","prepend-icon":"mdi-trending-up"},{default:a(()=>[p(u(o.change),1)]),_:2},1032,["color"])]),e("div",null,[e("h3",Se,u(o.value),1),e("p",$e,u(o.title),1)])]),_:2},1032,["loading"])]),_:2},1024))),128))]),_:1}))}}),De=R(ke,[["__scopeId","data-v-5f557d84"]]),Re={class:"d-flex align-center justify-space-between mb-4"},Ie={class:"chart-container",style:{height:"300px"}},Me=I({__name:"AnalysisChart",props:{data:{},loading:{type:Boolean}},setup(l){G.register(X,Y,ve,ye,ee,Q,W,fe);const n=y(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12,weight:"500"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,padding:12}},scales:{x:{border:{display:!1},grid:{display:!1},ticks:{font:{size:11},color:"rgba(0, 0, 0, 0.6)"}},y:{border:{display:!1},grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{font:{size:11},color:"rgba(0, 0, 0, 0.6)",beginAtZero:!0}}},interaction:{intersect:!1,mode:"index"}}));return(m,o)=>(c(),f(T,{class:"analysis-chart pa-4",elevation:"2"},{default:a(()=>[e("div",Re,[o[0]||(o[0]=e("div",null,[e("h3",{class:"text-h6 font-weight-bold text-high-emphasis"}," Tendência de Análises "),e("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Últimos 9 dias ")],-1)),t(P,{icon:"mdi-dots-vertical",variant:"text",size:"small"})]),e("div",Ie,[l.loading?(c(),f(z,{key:0,type:"image",height:"300",class:"rounded"})):(c(),f(h(be),{key:1,data:l.data,options:n.value},null,8,["data","options"]))])]),_:1}))}}),Te=R(Me,[["__scopeId","data-v-946aaec1"]]),Be={class:"card-content"},Ve={class:"card-header"},ze={class:"chart-container"},qe={key:1,class:"position-relative"},Pe={class:"center-score"},Fe={class:"text-center"},Ee={class:"text-h4 font-weight-bold text-success mb-1"},Oe=I({__name:"QualityChart",props:{data:{},loading:{type:Boolean}},setup(l){G.register(_e,Q,W);const n=y(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}}},cutout:"60%"})),m=y(()=>8.7);return(o,r)=>(c(),f(T,{class:"quality-chart",elevation:"2"},{default:a(()=>[e("div",Be,[e("div",Ve,[r[0]||(r[0]=e("div",null,[e("h3",{class:"text-h6 font-weight-bold text-grey-darken-3"}," Qualidade do Código "),e("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Score médio atual ")],-1)),t(F,{color:"success",variant:"tonal",size:"small"},{default:a(()=>[p(u(m.value.toFixed(1)),1)]),_:1})]),e("div",ze,[l.loading?(c(),f(z,{key:0,type:"avatar",width:"200",height:"200",class:"mx-auto"})):(c(),x("div",qe,[t(h(xe),{data:l.data,options:n.value},null,8,["data","options"]),e("div",Pe,[e("div",Fe,[e("h2",Ee,u(m.value.toFixed(1)),1),r[1]||(r[1]=e("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Score Geral ",-1))])])]))])])]),_:1}))}}),Ne=R(Oe,[["__scopeId","data-v-cf311673"]]),je={class:"card-content"},Le={class:"card-header"},Ge={class:"chart-container"},Qe={class:"summary-stats"},We={class:"text-h6 font-weight-bold text-error"},Ze={class:"text-h6 font-weight-bold text-success"},Ue=I({__name:"SecurityChart",props:{data:{},loading:{type:Boolean}},setup(l){G.register(X,Y,oe,ee,Q,W);const n=l,m=y(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{border:{display:!1},grid:{display:!1},ticks:{color:"rgba(0, 0, 0, 0.6)"}},y:{border:{display:!1},grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{color:"rgba(0, 0, 0, 0.6)",beginAtZero:!0}}}})),o=y(()=>n.data?.datasets?.[0]?.data?n.data.datasets[0].data.reduce((v,d)=>v+d,0):0),r=y(()=>{if(!n.data?.datasets?.[0]?.data)return 0;const v=n.data.datasets[0].data;return v[v.length-1]||0}),g=y(()=>o.value===0?0:Math.round(r.value/o.value*100));return(v,d)=>(c(),f(T,{class:"security-chart",elevation:"2"},{default:a(()=>[e("div",je,[e("div",Le,[d[0]||(d[0]=e("div",null,[e("h3",{class:"text-h6 font-weight-bold text-high-emphasis"}," Issues de Segurança "),e("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Por severidade ")],-1)),t(F,{color:"success",variant:"tonal",size:"small"},{default:a(()=>[p(u(g.value)+"% resolvidas ",1)]),_:1})]),e("div",Ge,[l.loading?(c(),f(z,{key:0,type:"image",height:"200",class:"rounded"})):(c(),f(h(ie),{key:1,data:l.data,options:m.value},null,8,["data","options"]))]),e("div",Qe,[t(q,null,{default:a(()=>[t(k,{cols:"6",class:"text-center"},{default:a(()=>[e("div",We,u(o.value),1),d[1]||(d[1]=e("div",{class:"text-caption text-grey-darken-1"},"Total",-1))]),_:1}),t(k,{cols:"6",class:"text-center"},{default:a(()=>[e("div",Ze,u(r.value),1),d[2]||(d[2]=e("div",{class:"text-caption text-grey-darken-1"},"Resolvidas",-1))]),_:1})]),_:1})])])]),_:1}))}}),Je=R(Ue,[["__scopeId","data-v-4094d134"]]),Ke={class:"d-flex align-center justify-space-between mb-4"},He={style:{"max-height":"300px","overflow-y":"auto"}},Xe={key:1},Ye={class:"flex-grow-1"},et={class:"text-body-2 font-weight-medium text-grey-darken-3 mb-1"},tt={class:"text-caption text-grey-darken-1 mb-1"},st={class:"d-flex align-center justify-space-between"},at={class:"text-caption text-grey-darken-1"},ot={class:"mt-4 pt-3 text-center",style:{"border-top":"1px solid rgba(0,0,0,0.1)"}},it=I({__name:"RecentActivity",props:{activities:{},loading:{type:Boolean}},setup(l){return(n,m)=>(c(),f(T,{class:"recent-activity pa-4",elevation:"2"},{default:a(()=>[e("div",Ke,[m[1]||(m[1]=e("div",null,[e("h3",{class:"text-h6 font-weight-bold text-high-emphasis"}," Atividades Recentes "),e("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Últimas ações do sistema ")],-1)),t(P,{to:"/activity",variant:"text",size:"small",color:"primary"},{default:a(()=>[...m[0]||(m[0]=[p(" Ver tudo ",-1)])]),_:1})]),e("div",He,[l.loading?(c(),f(z,{key:0,type:"list-item-avatar-three-line@5"})):(c(),x("div",Xe,[(c(!0),x(L,null,j(l.activities,(o,r)=>(c(),x("div",{key:o.id,class:ae(["activity-item d-flex align-start",{"mb-4":r<l.activities.length-1}])},[t(se,{color:o.color,size:"32",class:"mr-3 mt-1"},{default:a(()=>[t(C,{color:`${o.color}-darken-2`,size:"18"},{default:a(()=>[p(u(o.icon),1)]),_:2},1032,["color"])]),_:2},1032,["color"]),e("div",Ye,[e("div",et,u(o.title),1),e("div",tt,u(o.description),1),e("div",st,[t(F,{size:"x-small",variant:"tonal",color:"primary"},{default:a(()=>[p(u(o.repository),1)]),_:2},1024),e("span",at,u(o.relativeTime),1)])])],2))),128))]))]),e("div",ot,[t(P,{variant:"tonal",color:"primary",block:"","prepend-icon":"mdi-refresh"},{default:a(()=>[...m[2]||(m[2]=[p(" Atualizar Atividades ",-1)])]),_:1})])]),_:1}))}}),rt=R(it,[["__scopeId","data-v-82832b4a"]]),nt={key:1},lt={class:"mb-4"},dt={class:"d-flex align-center justify-space-between mb-2"},ct={class:"mb-4"},ut={class:"d-flex align-center justify-space-between mb-2"},pt={class:"text-h6 font-weight-bold text-info"},mt={class:"mb-4"},gt={class:"d-flex align-center justify-space-between mb-2"},ht={class:"text-caption text-medium-emphasis"},vt={class:"d-flex align-center justify-space-between mb-1"},yt={class:"text-body-2"},ft={class:"text-caption font-weight-medium"},bt=I({__name:"DetailedMetrics",props:{metrics:{},loading:{type:Boolean}},setup(l){const n=l,m=y(()=>{const v=n.metrics.averageProcessingTime;return v<60?`${v}s`:v<3600?`${Math.round(v/60)}m`:`${Math.round(v/3600)}h`}),o=y(()=>n.metrics.totalAnalyses===0?0:Math.round(n.metrics.completedAnalyses/n.metrics.totalAnalyses*100)),r=y(()=>n.metrics.repositoryGrowth.growthRate>=0?"success":"error"),g=y(()=>n.metrics.repositoryGrowth.growthRate>=0?"mdi-trending-up":"mdi-trending-down");return(v,d)=>(c(),f(T,null,{default:a(()=>[t(ue,{class:"d-flex align-center"},{default:a(()=>[t(C,{class:"me-2"},{default:a(()=>[...d[0]||(d[0]=[p("mdi-chart-box-outline",-1)])]),_:1}),d[1]||(d[1]=p(" Métricas Detalhadas ",-1))]),_:1}),t(pe,null,{default:a(()=>[l.loading?(c(),f(z,{key:0,type:"paragraph@3"})):(c(),x("div",nt,[e("div",lt,[e("div",dt,[d[2]||(d[2]=e("span",{class:"text-body-2 font-weight-medium"},"Taxa de Sucesso",-1)),e("span",{class:ae(["text-h6 font-weight-bold",`text-${o.value>=90?"success":o.value>=70?"warning":"error"}`])},u(o.value)+"% ",3)]),t(H,{"model-value":o.value,color:o.value>=90?"success":o.value>=70?"warning":"error",height:"8",rounded:""},null,8,["model-value","color"])]),e("div",ct,[e("div",ut,[d[3]||(d[3]=e("span",{class:"text-body-2 font-weight-medium"},"Tempo Médio de Processamento",-1)),e("span",pt,u(m.value),1)])]),e("div",mt,[e("div",gt,[d[4]||(d[4]=e("span",{class:"text-body-2 font-weight-medium"},"Crescimento de Repositórios",-1)),t(F,{color:r.value,"prepend-icon":g.value,size:"small",variant:"tonal"},{default:a(()=>[p(u(l.metrics.repositoryGrowth.growthRate>=0?"+":"")+u(l.metrics.repositoryGrowth.growthRate.toFixed(1))+"% ",1)]),_:1},8,["color","prepend-icon"])]),e("div",ht," Este mês: "+u(l.metrics.repositoryGrowth.thisMonth)+" | Mês anterior: "+u(l.metrics.repositoryGrowth.lastMonth),1)]),e("div",null,[d[5]||(d[5]=e("h4",{class:"text-subtitle-2 font-weight-bold mb-3"}," Principais Tipos de Issues ",-1)),(c(!0),x(L,null,j(l.metrics.topIssueTypes,w=>(c(),x("div",{key:w.type,class:"mb-2"},[e("div",vt,[e("span",yt,u(w.type),1),e("span",ft,u(w.count)+" ("+u(w.percentage.toFixed(1))+"%) ",1)]),t(H,{"model-value":w.percentage,color:"primary",height:"4",rounded:""},null,8,["model-value"])]))),128))])]))]),_:1})]),_:1}))}}),_t=R(bt,[["__scopeId","data-v-5d45ea85"]]),xt={class:"card-content"},wt={class:"card-header"},Ct={class:"d-flex align-center"},At={class:"chart-container"},St={key:2,class:"empty-state"},$t=I({__name:"RepositoryAnalysisChart",props:{repositories:{},loading:{type:Boolean}},setup(l){G.register(X,Y,oe,ee,Q,W);const n=l,m=y(()=>({labels:n.repositories.map(r=>r.repositoryName),datasets:[{label:"Análises",data:n.repositories.map(r=>r.analysisCount),backgroundColor:"rgba(25, 118, 210, 0.8)",borderColor:"rgb(25, 118, 210)",borderWidth:1,borderRadius:4,borderSkipped:!1},{label:"Issues Encontradas",data:n.repositories.map(r=>r.issuesFound),backgroundColor:"rgba(255, 152, 0, 0.8)",borderColor:"rgb(255, 152, 0)",borderWidth:1,borderRadius:4,borderSkipped:!1}]})),o=y(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12,weight:"500"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,padding:12,callbacks:{afterBody:function(r){const g=r[0].dataIndex;return[`Score de Qualidade: ${n.repositories[g].qualityScore.toFixed(1)}`]}}}},scales:{x:{border:{display:!1},grid:{display:!1},ticks:{font:{size:11},color:"rgba(0, 0, 0, 0.6)",maxRotation:45}},y:{border:{display:!1},grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{font:{size:11},color:"rgba(0, 0, 0, 0.6)",beginAtZero:!0}}},interaction:{intersect:!1,mode:"index"}}));return me(()=>n.repositories,()=>{},{immediate:!0}),(r,g)=>(c(),f(T,{class:"repository-analysis-chart"},{default:a(()=>[e("div",xt,[e("div",wt,[e("div",Ct,[t(C,{class:"me-2"},{default:a(()=>[...g[0]||(g[0]=[p("mdi-source-repository-multiple",-1)])]),_:1}),g[1]||(g[1]=p(" Análises por Repositório ",-1))]),t(P,{icon:"mdi-dots-vertical",variant:"text",size:"small"})]),e("div",At,[l.loading?(c(),f(z,{key:0,type:"image",height:"300",class:"rounded"})):l.repositories.length>0?(c(),f(h(ie),{key:`repo-chart-${l.repositories.length}`,data:m.value,options:o.value},null,8,["data","options"])):(c(),x("div",St,[t(C,{size:"64",color:"grey-lighten-1"},{default:a(()=>[...g[2]||(g[2]=[p("mdi-chart-bar",-1)])]),_:1}),g[3]||(g[3]=e("p",{class:"text-body-1 text-grey-darken-1 mt-4 text-center"}," Nenhum dado de repositório disponível ",-1))]))])])]),_:1}))}}),kt=R($t,[["__scopeId","data-v-b29729ed"]]);function Dt(){const{isDemoUser:l,simulateApiDelay:n}=we(),m=$(!1),o=$(null),r=$({totalAnalyses:0,activeRepositories:0,issuesFound:0,qualityScore:0}),g=$([]),v=$({excellent:0,good:0,fair:0,poor:0}),d=$({high:0,medium:0,low:0,resolved:0}),w=$([]),B=$([]),V=$({totalAnalyses:0,completedAnalyses:0,failedAnalyses:0,averageProcessingTime:0,topIssueTypes:[],repositoryGrowth:{thisMonth:0,lastMonth:0,growthRate:0}}),Z=y(()=>({labels:g.value.map(i=>new Date(i.date).toLocaleDateString("pt-BR",{month:"short",day:"numeric"})),datasets:[{label:"Análises",data:g.value.map(i=>i.analyses),borderColor:"#1976d2",backgroundColor:"rgba(25, 118, 210, 0.1)",tension:.4,fill:!0},{label:"Issues Encontradas",data:g.value.map(i=>i.issues),borderColor:"#f44336",backgroundColor:"rgba(244, 67, 54, 0.1)",tension:.4,fill:!0},{label:"Issues Resolvidas",data:g.value.map(i=>i.resolved),borderColor:"#4caf50",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4,fill:!0}]})),U=y(()=>({labels:["Excelente","Boa","Regular","Ruim"],datasets:[{data:[v.value.excellent,v.value.good,v.value.fair,v.value.poor],backgroundColor:["#4caf50","#2196f3","#ff9800","#f44336"],borderWidth:0}]})),J=y(()=>({labels:["Alta","Média","Baixa","Resolvidas"],datasets:[{label:"Issues de Segurança",data:[d.value.high,d.value.medium,d.value.low,d.value.resolved],backgroundColor:["#f44336","#ff9800","#ffeb3b","#4caf50"],borderWidth:1,borderColor:"#fff"}]})),E=y(()=>[{title:"Total de Análises",value:r.value.totalAnalyses.toLocaleString("pt-BR"),icon:"mdi-chart-timeline-variant",color:"primary",change:"+12%",changeColor:"success"},{title:"Repositórios Ativos",value:r.value.activeRepositories.toString(),icon:"mdi-source-repository",color:"info",change:"+3",changeColor:"success"},{title:"Issues Encontradas",value:r.value.issuesFound.toString(),icon:"mdi-bug",color:"warning",change:"-8%",changeColor:"success"},{title:"Score de Qualidade",value:r.value.qualityScore.toFixed(1),icon:"mdi-star",color:"success",change:"+0.3",changeColor:"success"}]),O=y(()=>w.value.map(i=>({...i,relativeTime:s(i.timestamp),icon:b(i.type),color:D(i.type,i.severity)})));function s(i){const _=new Date,S=new Date(i),A=Math.floor((_.getTime()-S.getTime())/1e3);return A<60?"agora mesmo":A<3600?`${Math.floor(A/60)}m atrás`:A<86400?`${Math.floor(A/3600)}h atrás`:`${Math.floor(A/86400)}d atrás`}function b(i){return{analysis:"mdi-chart-line",issue:"mdi-alert-circle",resolved:"mdi-check-circle",repository:"mdi-source-repository"}[i]||"mdi-information"}function D(i,_){return i==="issue"?{high:"error",medium:"warning",low:"info"}[_]||"warning":{analysis:"primary",resolved:"success",repository:"info"}[i]||"primary"}async function N(){m.value=!0,o.value=null;try{if(l.value)await n(800),r.value={totalAnalyses:1247,activeRepositories:23,issuesFound:156,qualityScore:8.4},g.value=[{date:"2024-11-01",analyses:45,issues:12,resolved:8},{date:"2024-11-02",analyses:52,issues:15,resolved:11},{date:"2024-11-03",analyses:38,issues:9,resolved:7},{date:"2024-11-04",analyses:61,issues:18,resolved:14},{date:"2024-11-05",analyses:47,issues:11,resolved:9},{date:"2024-11-06",analyses:55,issues:16,resolved:12},{date:"2024-11-07",analyses:43,issues:8,resolved:6}],v.value={excellent:35,good:28,fair:22,poor:15},d.value={high:8,medium:24,low:43,resolved:89},w.value=[{id:"1",type:"analysis",title:"Análise concluída com sucesso",description:"Nova análise de código foi concluída para o repositório",repository:"projeto-frontend-react",author:"João Silva",timestamp:new Date(Date.now()-3e5).toISOString(),severity:"info"},{id:"2",type:"issue",title:"Vulnerabilidade de segurança detectada",description:"Issue de alta severidade foi encontrada no código",repository:"api-backend-node",author:"Maria Santos",timestamp:new Date(Date.now()-9e5).toISOString(),severity:"high"},{id:"3",type:"resolved",title:"Issues resolvidas automaticamente",description:"5 problemas foram corrigidos com sucesso",repository:"mobile-app-flutter",author:"Pedro Costa",timestamp:new Date(Date.now()-18e5).toISOString(),severity:"info"},{id:"4",type:"repository",title:"Novo repositório adicionado",description:"Repositório configurado para análise automática",repository:"web-service-api",author:"Ana Oliveira",timestamp:new Date(Date.now()-36e5).toISOString(),severity:"info"},{id:"5",type:"analysis",title:"Análise programada iniciada",description:"Análise automática foi iniciada conforme cronograma",repository:"frontend-dashboard",author:"Sistema",timestamp:new Date(Date.now()-72e5).toISOString(),severity:"info"}],B.value=[{id:"1",name:"projeto-frontend-react",fullName:"demo/projeto-frontend-react",analysisCount:45,qualityScore:8.7,issuesCount:3,lastAnalysisAt:new Date(Date.now()-3e5).toISOString()},{id:"2",name:"api-backend-node",fullName:"demo/api-backend-node",analysisCount:32,qualityScore:7.9,issuesCount:8,lastAnalysisAt:new Date(Date.now()-9e5).toISOString()},{id:"3",name:"mobile-app-flutter",fullName:"demo/mobile-app-flutter",analysisCount:18,qualityScore:6.5,issuesCount:12,lastAnalysisAt:new Date(Date.now()-18e5).toISOString()}],await K();else{const[i,_,S,A,de,ce]=await Promise.all([M.getDashboardStats(),M.getAnalysisTrend(30),M.getQualityDistribution(),M.getSecurityIssues(),M.getRecentActivity(10),M.getTopRepositories(5)]);r.value=i,g.value=_,v.value=S,d.value=A,w.value=de,B.value=ce,await K()}}catch(i){console.error("Error loading dashboard data:",i),o.value=i instanceof Error?i.message:"Erro ao carregar dados do dashboard"}finally{m.value=!1}}async function re(){await N()}function ne(){return setInterval(()=>{m.value||N()},300*1e3)}ge(async()=>{await N()});const le=y(()=>B.value.map(i=>({repositoryName:i.name,analysisCount:i.analysisCount,issuesFound:i.issuesCount,qualityScore:i.qualityScore})));async function K(){try{if(l.value){const i=r.value.totalAnalyses,_=Math.floor(i*.87),S=i-_;V.value={totalAnalyses:i,completedAnalyses:_,failedAnalyses:S,averageProcessingTime:142,topIssueTypes:[{type:"Qualidade de Código",count:52,percentage:42},{type:"Segurança",count:38,percentage:31},{type:"Performance",count:21,percentage:17},{type:"Boas Práticas",count:12,percentage:10}],repositoryGrowth:{thisMonth:r.value.activeRepositories,lastMonth:20,growthRate:15}}}else V.value=await M.getDetailedMetrics()}catch(i){console.error("Error loading detailed metrics:",i);const _=r.value.totalAnalyses,S=Math.floor(_*.85),A=_-S;V.value={totalAnalyses:_,completedAnalyses:S,failedAnalyses:A,averageProcessingTime:180,topIssueTypes:[{type:"Qualidade de Código",count:45,percentage:40},{type:"Segurança",count:32,percentage:30},{type:"Performance",count:28,percentage:20},{type:"Boas Práticas",count:23,percentage:10}],repositoryGrowth:{thisMonth:r.value.activeRepositories,lastMonth:Math.max(1,r.value.activeRepositories-1),growthRate:0}}}}return{isLoading:m,error:o,stats:r,analysisTrend:g,qualityDistribution:v,securityIssues:d,recentActivity:w,topRepositories:B,detailedMetrics:V,analysisChartData:Z,qualityChartData:U,securityChartData:J,formattedStats:E,formattedRecentActivity:O,repositoryAnalysisData:le,loadDashboardData:N,refreshData:re,startAutoRefresh:ne,loadDetailedMetrics:K}}const Rt={class:"modern-dashboard"},It={class:"dashboard-header"},Mt={class:"header-content"},Tt={class:"header-text mr-4"},Bt={class:"header-title-section"},Vt={class:"dashboard-title"},zt={class:"header-actions"},qt={key:0,class:"dashboard-content"},Pt={class:"dashboard-content"},Ft={class:"stats-section"},Et={class:"analytics-section"},Ot={class:"section-header"},Nt={class:"section-title"},jt={class:"chart-card primary-chart"},Lt={class:"chart-card secondary-chart"},Gt={class:"insights-section"},Qt={class:"section-header"},Wt={class:"section-title"},Zt={class:"insight-card security-card"},Ut={class:"insight-card activity-card"},Jt={class:"deep-analytics-section"},Kt={class:"section-header"},Ht={class:"section-title"},Xt={class:"analytics-card repository-chart"},Yt={class:"analytics-card metrics-card"},es={key:0,class:"repositories-section"},ts={class:"section-header"},ss={class:"section-title"},as={class:"repositories-showcase"},os={class:"repositories-grid"},is={class:"repo-header"},rs={class:"repo-avatar"},ns={class:"repo-info"},ls={class:"repo-name"},ds={class:"repo-updated"},cs={class:"repo-metrics"},us={class:"metric"},ps={class:"metric-value"},ms={class:"metric"},gs={class:"metric-value"},hs={class:"metric"},vs={class:"metric-value"},ys={class:"repo-progress"},fs=I({__name:"DashboardView",setup(l){const{isLoading:n,error:m,topRepositories:o,detailedMetrics:r,analysisChartData:g,qualityChartData:v,securityChartData:d,formattedStats:w,formattedRecentActivity:B,repositoryAnalysisData:V,refreshData:Z,startAutoRefresh:U}=Dt();function J(O){const s=new Date,b=new Date(O),D=Math.floor((s.getTime()-b.getTime())/1e3);return D<60?"agora mesmo":D<3600?`${Math.floor(D/60)}m atrás`:D<86400?`${Math.floor(D/3600)}h atrás`:`${Math.floor(D/86400)}d atrás`}const E=U();return he(()=>{E&&clearInterval(E)}),(O,s)=>(c(),x("div",Rt,[e("div",It,[e("div",Mt,[e("div",Tt,[e("div",Bt,[e("h1",Vt,[t(C,{class:"title-icon"},{default:a(()=>[...s[1]||(s[1]=[p("mdi-view-dashboard",-1)])]),_:1}),s[2]||(s[2]=p(" Dashboard de Análise ",-1))]),s[3]||(s[3]=e("p",{class:"dashboard-subtitle"}," Insights em tempo real sobre a qualidade do código da sua organização ",-1))])]),e("div",zt,[t(P,{color:"white",variant:"elevated",size:"large",class:"refresh-btn","prepend-icon":"mdi-refresh",onClick:h(Z),loading:h(n)},{default:a(()=>[...s[4]||(s[4]=[p(" Atualizar Dados ",-1)])]),_:1},8,["onClick","loading"])])]),s[5]||(s[5]=e("div",{class:"header-decoration"},[e("div",{class:"decoration-circle decoration-1"}),e("div",{class:"decoration-circle decoration-2"}),e("div",{class:"decoration-circle decoration-3"})],-1))]),h(m)?(c(),x("div",qt,[t(Ce,{type:"error",variant:"tonal",class:"error-alert",closable:"","onClick:close":s[0]||(s[0]=b=>m.value=null)},{prepend:a(()=>[t(C,null,{default:a(()=>[...s[6]||(s[6]=[p("mdi-alert-circle",-1)])]),_:1})]),default:a(()=>[p(" "+u(h(m)),1)]),_:1})])):te("",!0),e("div",Pt,[e("div",Ft,[t(De,{stats:h(w),loading:h(n)},null,8,["stats","loading"])]),e("section",Et,[e("div",Ot,[e("h2",Nt,[t(C,{class:"section-icon"},{default:a(()=>[...s[7]||(s[7]=[p("mdi-chart-line",-1)])]),_:1}),s[8]||(s[8]=p(" Análise de Tendências ",-1))]),s[9]||(s[9]=e("p",{class:"section-subtitle"},"Performance e evolução dos indicadores principais",-1))]),t(q,{class:"chart-grid"},{default:a(()=>[t(k,{cols:"12",lg:"8"},{default:a(()=>[e("div",jt,[t(Te,{data:h(g),loading:h(n)},null,8,["data","loading"])])]),_:1}),t(k,{cols:"12",lg:"4"},{default:a(()=>[e("div",Lt,[t(Ne,{data:h(v),loading:h(n)},null,8,["data","loading"])])]),_:1})]),_:1})]),e("section",Gt,[e("div",Qt,[e("h2",Wt,[t(C,{class:"section-icon"},{default:a(()=>[...s[10]||(s[10]=[p("mdi-shield-search",-1)])]),_:1}),s[11]||(s[11]=p(" Segurança & Atividades ",-1))]),s[12]||(s[12]=e("p",{class:"section-subtitle"},"Monitoramento de segurança e atividades recentes",-1))]),t(q,{class:"insights-grid"},{default:a(()=>[t(k,{cols:"12",lg:"6"},{default:a(()=>[e("div",Zt,[t(Je,{data:h(d),loading:h(n)},null,8,["data","loading"])])]),_:1}),t(k,{cols:"12",lg:"6"},{default:a(()=>[e("div",Ut,[t(rt,{activities:h(B),loading:h(n)},null,8,["activities","loading"])])]),_:1})]),_:1})]),e("section",Jt,[e("div",Kt,[e("h2",Ht,[t(C,{class:"section-icon"},{default:a(()=>[...s[13]||(s[13]=[p("mdi-chart-multiple",-1)])]),_:1}),s[14]||(s[14]=p(" Análise Detalhada ",-1))]),s[15]||(s[15]=e("p",{class:"section-subtitle"},"Métricas avançadas e análise por repositório",-1))]),t(q,{class:"deep-analytics-grid"},{default:a(()=>[t(k,{cols:"12",lg:"8"},{default:a(()=>[e("div",Xt,[t(kt,{repositories:h(V),loading:h(n)},null,8,["repositories","loading"])])]),_:1}),t(k,{cols:"12",lg:"4"},{default:a(()=>[e("div",Yt,[t(_t,{metrics:h(r),loading:h(n)},null,8,["metrics","loading"])])]),_:1})]),_:1})]),h(o).length>0?(c(),x("section",es,[e("div",ts,[e("h2",ss,[t(C,{class:"section-icon"},{default:a(()=>[...s[16]||(s[16]=[p("mdi-trophy",-1)])]),_:1}),s[17]||(s[17]=p(" Repositórios em Destaque ",-1))]),s[18]||(s[18]=e("p",{class:"section-subtitle"},"Os repositórios com melhor performance e mais atividade",-1))]),e("div",as,[e("div",os,[(c(!0),x(L,null,j(h(o),b=>(c(),x("div",{key:b.id,class:"repository-card"},[e("div",is,[e("div",rs,[t(C,null,{default:a(()=>[...s[19]||(s[19]=[p("mdi-source-repository",-1)])]),_:1})]),e("div",ns,[e("h3",ls,u(b.fullName),1),e("p",ds,u(J(b.lastAnalysisAt)),1)])]),e("div",cs,[e("div",us,[e("div",ps,u(b.analysisCount),1),s[20]||(s[20]=e("div",{class:"metric-label"},"Análises",-1))]),e("div",ms,[e("div",gs,u(b.issuesCount),1),s[21]||(s[21]=e("div",{class:"metric-label"},"Issues",-1))]),e("div",hs,[e("div",vs,u(b.qualityScore.toFixed(1)),1),s[22]||(s[22]=e("div",{class:"metric-label"},"Score",-1))])]),e("div",ys,[t(H,{"model-value":b.qualityScore*10,color:b.qualityScore>=8?"success":b.qualityScore>=6?"warning":"error",height:"4",rounded:""},null,8,["model-value","color"])])]))),128))])])])):te("",!0)])]))}}),Vs=R(fs,[["__scopeId","data-v-1b034642"]]);export{Vs as default};
