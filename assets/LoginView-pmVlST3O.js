import{j as ke,d,r as I,h as Re,Z as w,y as a,n as s,a5 as $,a1 as o,a6 as z,a0 as x,U as j,a7 as ze,V as p,a8 as Ee,a9 as Ce,$ as y,aa as l,ab as Se,_ as u,ac as qe,ad as he,ae as De}from"./vendor-vue-BKuzT1x2.js";import{l as W}from"./logo_horizontal-BkjEFnEQ.js";import{l as Ne}from"./logo_prodeb-BVoYJzK3.js";import{u as Ae,U as Ue}from"./auth--EmZq-C7.js";import{a as Fe}from"./auth.service-BozCwdnf.js";import{a as X}from"./access-request.service-HkwY3PVP.js";import{a as n,b as k,_ as Pe}from"./index-gFSB3kms.js";import{V as ee}from"./VDialog-BfRWf8LZ.js";import{V as ae,a as se,b as oe,c as te}from"./VGrid-CBGRWS1y.js";import{V as le}from"./VForm-DthKd8zl.js";import{V as Ie,a as R}from"./VRow-C_u8820H.js";import{V as E,a as Le}from"./VSelect-BorMXFwi.js";import{V as ie,a as Me}from"./VList-Dg4abNUz.js";import{V as Te}from"./VTextarea-CqCSgYZa.js";import{V as G}from"./VAlert-BZmB2o6G.js";import{V as re}from"./VSpacer-CTPiANoM.js";import"./token-storage.service-BqAv9k07.js";import"./vendor-utils-6xD0fNU8.js";import"./vendor-ui-Ca7vMALJ.js";import"./dialog-transition-B8nu4acL.js";import"./form-PEXhLZdP.js";import"./autofocus-Cv2p5X6o.js";import"./VChip-BfcyEr4e.js";import"./VMenu-BCjbZdow.js";import"./ssrBoot-DJyMk-ri.js";const Be={class:"auth-layout"},Oe={class:"hero-panel"},$e={class:"hero-content"},je={class:"hero-features"},Ge={class:"feature-item"},He={class:"feature-icon"},Ye={class:"feature-item"},_e={class:"feature-icon"},Ze={class:"feature-item"},Je={class:"feature-icon"},Ke={class:"form-panel"},Qe={class:"form-container"},We={class:"form-group"},Xe={class:"input-wrapper"},ea={key:0,class:"error-message"},aa={class:"form-group"},sa={class:"input-wrapper"},oa=["type"],ta={key:0,class:"error-message"},la={class:"form-options"},ia={class:"checkbox-wrapper"},ra=["disabled"],da={key:0,class:"error-alert"},na=["disabled"],ua={class:"form-footer"},ma={class:"signup-text"},ca={class:"copyright-text"},va={class:"d-flex align-center"},pa={key:0,class:"text-center py-8"},fa={class:"d-flex align-center"},ba={key:0,class:"text-center py-8"},ga=ke({__name:"LoginView",setup(ya){const H=Se(),Y=Ae(),f=d(!1),C=d(!1),b=d(""),S=d(!1),L=d(),q=d(!1),h=d(!1),M=d(),D=d(!1),m=I({email:"",password:"",rememberMe:!1}),r=I({fullName:"",email:"",organizationId:"",position:"",phone:"",reason:""}),N=d([]),A=d(!1),U=I({email:""}),c=I({email:[],password:[]}),v=d(!1),F=d(!1),V=d(!1),P=d(!1),g=d(""),de=Re(()=>new Date().getFullYear()),_=t=>{c[t]=[],b.value=""},ne=()=>{let t=!0;return c.email=[],c.password=[],m.email?/\S+@\S+\.\S+/.test(m.email)||(c.email.push("E-mail deve ser válido"),t=!1):(c.email.push("E-mail é obrigatório"),t=!1),m.password?m.password.length<6&&(c.password.push("Senha deve ter pelo menos 6 caracteres"),t=!1):(c.password.push("Senha é obrigatória"),t=!1),t},ue=async()=>{if(ne()){f.value=!0,b.value="";try{await Y.login({email:m.email,password:m.password}),await H.push("/dashboard")}catch(t){console.error("Login error:",t),b.value=t instanceof Error?t.message:"Erro ao fazer login. Tente novamente."}finally{f.value=!1}}},me=async()=>{f.value=!0,b.value="";try{Y.setUser({id:"demo-user-1",email:"demo@test.mira-api.com",fullName:"Usuário Demonstração",username:"demo.user",role:Ue.DEMO_USER,organizationId:"demo-org-1",organizationName:"PRODEB - Demonstração",language:"pt-BR",timezone:"America/Sao_Paulo"}),await H.push("/dashboard")}catch(t){console.error("Demo login error:",t),b.value="Erro ao fazer login de demonstração. Tente novamente."}finally{f.value=!1}},ce=async()=>{if(!(N.value.length>0)){A.value=!0;try{N.value=await X.getActiveOrganizations()}catch(t){console.error("Error loading organizations:",t),N.value=[]}finally{A.value=!1}}},ve=async()=>{S.value=!0,Z(),await ce()},T=()=>{S.value=!1,F.value=!1,Z()},Z=()=>{r.fullName="",r.email="",r.organizationId="",r.position="",r.phone="",r.reason="",L.value?.resetValidation(),q.value=!1},pe=[t=>!!t||"Nome completo é obrigatório",t=>t&&t.length>=2||"Nome deve ter pelo menos 2 caracteres",t=>t&&t.length<=100||"Nome deve ter no máximo 100 caracteres"],fe=[t=>!!t||"E-mail é obrigatório",t=>/.+@.+\..+/.test(t)||"E-mail deve ser válido"],be=[t=>!!t||"Organização é obrigatória"],ge=[t=>!!t||"Cargo/Função é obrigatório",t=>t&&t.length>=2||"Cargo deve ter pelo menos 2 caracteres"],ye=[t=>!!t||"E-mail é obrigatório",t=>/.+@.+\..+/.test(t)||"E-mail deve ser válido"],Ve=async()=>{const{valid:t}=await L.value?.validate();return t},J=async()=>{if(await Ve()){v.value=!0;try{const e=await X.createAccessRequest({fullName:r.fullName,email:r.email,phone:r.phone||void 0,organizationId:r.organizationId,position:r.position,reason:r.reason||void 0});F.value=!0,setTimeout(()=>{T()},5e3)}catch(e){console.error("Error submitting access request:",e)}finally{v.value=!1}}},we=()=>{h.value=!0,K()},B=()=>{h.value=!1,P.value=!1,K()},K=()=>{U.email="",g.value="",M.value?.resetValidation(),D.value=!1},xe=async()=>{const{valid:t}=await M.value?.validate();return t},Q=async()=>{if(await xe()){V.value=!0,g.value="";try{await Fe.forgotPassword({email:U.email}),P.value=!0,setTimeout(()=>{B()},5e3)}catch(e){console.error("Error submitting password recovery:",e),e?.response?.data?.message?g.value=e.response.data.message:e?.message?g.value=e.message:g.value="Erro ao enviar email de recuperação. Tente novamente."}finally{V.value=!1}}};return(t,e)=>(u(),w("div",Be,[a("div",Oe,[a("div",$e,[e[24]||(e[24]=$('<div class="hero-brand" data-v-42adcbc7><img src="'+W+'" alt="Mira - Code Review Platform" class="hero-logo" data-v-42adcbc7></div><div class="hero-text" data-v-42adcbc7><h1 class="hero-title" data-v-42adcbc7> Automatize sua<br data-v-42adcbc7><span class="hero-highlight" data-v-42adcbc7>Revisão de Código</span></h1><p class="hero-description" data-v-42adcbc7> Plataforma inteligente que utiliza IA avançada para analisar código, integrar múltiplas plataformas Git e fornecer insights precisos para sua equipe de desenvolvimento. </p></div>',2)),a("div",je,[a("div",Ge,[a("div",He,[s(n,{size:"20",color:"white"},{default:o(()=>[...e[18]||(e[18]=[l("mdi-robot",-1)])]),_:1})]),e[19]||(e[19]=a("div",{class:"feature-text"},[a("div",{class:"feature-title"},"IA Avançada"),a("div",{class:"feature-desc"},"Análise inteligente e sugestões automáticas")],-1))]),a("div",Ye,[a("div",_e,[s(n,{size:"20",color:"white"},{default:o(()=>[...e[20]||(e[20]=[l("mdi-git",-1)])]),_:1})]),e[21]||(e[21]=a("div",{class:"feature-text"},[a("div",{class:"feature-title"},"Multi-Plataforma"),a("div",{class:"feature-desc"},"GitHub, GitLab e Bitbucket integrados")],-1))]),a("div",Ze,[a("div",Je,[s(n,{size:"20",color:"white"},{default:o(()=>[...e[22]||(e[22]=[l("mdi-chart-line",-1)])]),_:1})]),e[23]||(e[23]=a("div",{class:"feature-text"},[a("div",{class:"feature-title"},"Analytics"),a("div",{class:"feature-desc"},"Métricas detalhadas e relatórios completos")],-1))])]),e[25]||(e[25]=$('<div class="hero-stats" data-v-42adcbc7><div class="stat-item" data-v-42adcbc7><div class="stat-number" data-v-42adcbc7>10k+</div><div class="stat-label" data-v-42adcbc7>Análises realizadas</div></div><div class="stat-item" data-v-42adcbc7><div class="stat-number" data-v-42adcbc7>500+</div><div class="stat-label" data-v-42adcbc7>Projetos ativos</div></div><div class="stat-item" data-v-42adcbc7><div class="stat-number" data-v-42adcbc7>99.9%</div><div class="stat-label" data-v-42adcbc7>Uptime</div></div></div>',1))])]),a("div",Ke,[a("div",Qe,[e[41]||(e[41]=$('<div class="mobile-logo-container" data-v-42adcbc7><img src="'+W+'" alt="Mira" class="mobile-logo" data-v-42adcbc7></div><div class="form-header" data-v-42adcbc7><h2 class="form-title" data-v-42adcbc7>Faça login em sua conta</h2><p class="form-subtitle" data-v-42adcbc7>Bem-vindo de volta! Digite suas credenciais para continuar:</p></div>',2)),a("form",{onSubmit:z(ue,["prevent"]),class:"login-form"},[a("div",We,[e[27]||(e[27]=a("label",{for:"email",class:"form-label"},"E-mail",-1)),a("div",Xe,[s(n,{class:"input-icon",size:"20"},{default:o(()=>[...e[26]||(e[26]=[l("mdi-email-outline",-1)])]),_:1}),j(a("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=i=>m.email=i),type:"email",class:"form-input",placeholder:"Digite seu e-mail",required:"",onInput:e[1]||(e[1]=i=>_("email"))},null,544),[[ze,m.email]])]),c.email.length?(u(),w("div",ea,p(c.email[0]),1)):x("",!0)]),a("div",aa,[e[29]||(e[29]=a("label",{for:"password",class:"form-label"},"Senha",-1)),a("div",sa,[s(n,{class:"input-icon",size:"20"},{default:o(()=>[...e[28]||(e[28]=[l("mdi-lock-outline",-1)])]),_:1}),j(a("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=i=>m.password=i),type:C.value?"text":"password",class:"form-input",placeholder:"Digite sua senha",required:"",onInput:e[3]||(e[3]=i=>_("password"))},null,40,oa),[[Ee,m.password]]),a("button",{type:"button",class:"password-toggle",onClick:e[4]||(e[4]=i=>C.value=!C.value)},[s(n,{size:"20"},{default:o(()=>[l(p(C.value?"mdi-eye-off-outline":"mdi-eye-outline"),1)]),_:1})])]),c.password.length?(u(),w("div",ta,p(c.password[0]),1)):x("",!0)]),a("div",la,[a("label",ia,[j(a("input",{"onUpdate:modelValue":e[5]||(e[5]=i=>m.rememberMe=i),type:"checkbox",class:"checkbox-input"},null,512),[[Ce,m.rememberMe]]),e[30]||(e[30]=a("span",{class:"checkbox-custom"},null,-1)),e[31]||(e[31]=a("span",{class:"checkbox-label"},"Lembrar por 30 dias",-1))]),a("a",{href:"#",class:"forgot-link",onClick:z(we,["prevent"])},"Esqueceu a senha?")]),a("button",{type:"submit",class:"submit-btn",disabled:f.value},[f.value?(u(),y(n,{key:0,class:"loading-icon"},{default:o(()=>[...e[32]||(e[32]=[l("mdi-loading",-1)])]),_:1})):(u(),y(n,{key:1},{default:o(()=>[...e[33]||(e[33]=[l("mdi-login",-1)])]),_:1})),l(" "+p(f.value?"Entrando...":"Entrar na plataforma"),1)],8,ra),b.value?(u(),w("div",da,[s(n,{size:"20"},{default:o(()=>[...e[34]||(e[34]=[l("mdi-alert-circle",-1)])]),_:1}),l(" "+p(b.value)+" ",1),a("button",{onClick:e[6]||(e[6]=i=>b.value=""),class:"close-error"},[s(n,{size:"16"},{default:o(()=>[...e[35]||(e[35]=[l("mdi-close",-1)])]),_:1})])])):x("",!0),e[38]||(e[38]=a("div",{class:"form-divider"},[a("span",null,"ou")],-1)),a("button",{type:"button",class:"demo-btn",onClick:me,disabled:f.value},[s(n,null,{default:o(()=>[...e[36]||(e[36]=[l("mdi-account-supervisor",-1)])]),_:1}),e[37]||(e[37]=l(" Acesso demonstração ",-1))],8,na)],32),a("div",ua,[a("p",ma,[e[39]||(e[39]=l(" Novo no Mira? ",-1)),a("a",{href:"#",class:"signup-link",onClick:z(ve,["prevent"])},"Solicitar acesso")]),e[40]||(e[40]=a("div",{class:"prodeb-branding"},[a("div",{class:"prodeb-divider"}),a("div",{class:"prodeb-info"},[a("img",{src:Ne,alt:"PRODEB - Companhia de Processamento de Dados do Estado da Bahia",class:"prodeb-logo"})])],-1)),a("p",ca," © "+p(de.value)+" Governo da Bahia ",1)])])]),s(ee,{modelValue:S.value,"onUpdate:modelValue":e[14]||(e[14]=i=>S.value=i),"max-width":"700px",persistent:"",scrollable:""},{default:o(()=>[s(ae,null,{default:o(()=>[s(se,{class:"text-h6 d-flex align-center justify-space-between bg-primary text-white sticky-header"},{default:o(()=>[a("div",va,[s(n,{class:"me-2"},{default:o(()=>[...e[42]||(e[42]=[l("mdi-account-plus",-1)])]),_:1}),e[43]||(e[43]=l(" Solicitar Acesso ",-1))]),s(k,{icon:"mdi-close",variant:"text",size:"small",color:"white",onClick:T,disabled:v.value},null,8,["disabled"])]),_:1}),s(oe,{class:"pa-6"},{default:o(()=>[F.value?(u(),w("div",pa,[s(n,{size:"64",color:"success",class:"mb-4"},{default:o(()=>[...e[44]||(e[44]=[l("mdi-check-circle",-1)])]),_:1}),e[45]||(e[45]=a("h3",{class:"text-h5 font-weight-bold text-success mb-3"},"Solicitação Enviada!",-1)),e[46]||(e[46]=a("p",{class:"text-body-1 text-medium-emphasis"}," Sua solicitação foi enviada com sucesso. Nossa equipe analisará sua solicitação e entrará em contato em até 2 dias úteis. ",-1))])):(u(),y(le,{key:1,ref_key:"accessFormRef",ref:L,modelValue:q.value,"onUpdate:modelValue":e[13]||(e[13]=i=>q.value=i),onSubmit:z(J,["prevent"])},{default:o(()=>[e[48]||(e[48]=a("p",{class:"text-body-2 text-medium-emphasis mb-4"}," Preencha os dados abaixo para solicitar acesso ao sistema. Nossa equipe analisará sua solicitação. ",-1)),s(Ie,null,{default:o(()=>[s(R,{cols:"12"},{default:o(()=>[s(E,{modelValue:r.fullName,"onUpdate:modelValue":e[7]||(e[7]=i=>r.fullName=i),label:"Nome Completo *",rules:pe,variant:"outlined","prepend-inner-icon":"mdi-account",disabled:v.value,required:""},null,8,["modelValue","disabled"])]),_:1}),s(R,{cols:"12",md:"6"},{default:o(()=>[s(E,{modelValue:r.email,"onUpdate:modelValue":e[8]||(e[8]=i=>r.email=i),label:"E-mail Corporativo *",rules:fe,variant:"outlined","prepend-inner-icon":"mdi-email",type:"email",placeholder:"seuemail@empresa.com",disabled:v.value,required:""},null,8,["modelValue","disabled"])]),_:1}),s(R,{cols:"12",md:"6"},{default:o(()=>[s(E,{modelValue:r.phone,"onUpdate:modelValue":e[9]||(e[9]=i=>r.phone=i),label:"Telefone",variant:"outlined","prepend-inner-icon":"mdi-phone",type:"tel",placeholder:"(11) 99999-9999",disabled:v.value},null,8,["modelValue","disabled"])]),_:1}),s(R,{cols:"12",md:"6"},{default:o(()=>[s(Le,{modelValue:r.organizationId,"onUpdate:modelValue":e[10]||(e[10]=i=>r.organizationId=i),label:"Organização *",rules:be,variant:"outlined","prepend-inner-icon":"mdi-domain",items:N.value,"item-title":"name","item-value":"id",loading:A.value,disabled:v.value,placeholder:"Selecione sua organização",required:""},{item:o(({props:i,item:O})=>[s(ie,qe(he(i)),De({title:o(()=>[l(p(O.raw.name),1)]),_:2},[O.raw.description?{name:"subtitle",fn:o(()=>[l(p(O.raw.description),1)]),key:"0"}:void 0]),1040)]),"no-data":o(()=>[s(ie,null,{default:o(()=>[s(Me,{class:"text-center text-medium-emphasis"},{default:o(()=>[l(p(A.value?"Carregando organizações...":"Nenhuma organização disponível"),1)]),_:1})]),_:1})]),_:1},8,["modelValue","items","loading","disabled"])]),_:1}),s(R,{cols:"12",md:"6"},{default:o(()=>[s(E,{modelValue:r.position,"onUpdate:modelValue":e[11]||(e[11]=i=>r.position=i),label:"Cargo/Função *",rules:ge,variant:"outlined","prepend-inner-icon":"mdi-account-tie",placeholder:"Seu cargo na organização",disabled:v.value,required:""},null,8,["modelValue","disabled"])]),_:1}),s(R,{cols:"12"},{default:o(()=>[s(Te,{modelValue:r.reason,"onUpdate:modelValue":e[12]||(e[12]=i=>r.reason=i),label:"Motivo da Solicitação",variant:"outlined","prepend-inner-icon":"mdi-text",rows:"3",placeholder:"Descreva brevemente o motivo para solicitar acesso ao sistema (opcional)",disabled:v.value},null,8,["modelValue","disabled"])]),_:1})]),_:1}),s(G,{type:"info",variant:"tonal",class:"mt-4"},{default:o(()=>[...e[47]||(e[47]=[l(" Campos marcados com * são obrigatórios ",-1)])]),_:1})]),_:1},8,["modelValue"]))]),_:1}),F.value?x("",!0):(u(),y(te,{key:0,class:"px-6 py-4 bg-surface border-t"},{default:o(()=>[s(re),s(k,{variant:"text",onClick:T,disabled:v.value},{default:o(()=>[...e[49]||(e[49]=[l(" Cancelar ",-1)])]),_:1},8,["disabled"]),s(k,{color:"primary",variant:"flat",loading:v.value,disabled:!q.value,onClick:J},{default:o(()=>[...e[50]||(e[50]=[l(" Enviar Solicitação ",-1)])]),_:1},8,["loading","disabled"])]),_:1}))]),_:1})]),_:1},8,["modelValue"]),s(ee,{modelValue:h.value,"onUpdate:modelValue":e[17]||(e[17]=i=>h.value=i),"max-width":"500px",persistent:"",scrollable:""},{default:o(()=>[s(ae,null,{default:o(()=>[s(se,{class:"text-h6 d-flex align-center justify-space-between bg-primary text-white sticky-header"},{default:o(()=>[a("div",fa,[s(n,{class:"me-2"},{default:o(()=>[...e[51]||(e[51]=[l("mdi-lock-reset",-1)])]),_:1}),e[52]||(e[52]=l(" Recuperar Senha ",-1))]),s(k,{icon:"mdi-close",variant:"text",size:"small",color:"white",onClick:B,disabled:V.value},null,8,["disabled"])]),_:1}),s(oe,{class:"pa-6"},{default:o(()=>[P.value?(u(),w("div",ba,[s(n,{size:"64",color:"success",class:"mb-4"},{default:o(()=>[...e[53]||(e[53]=[l("mdi-email-check",-1)])]),_:1}),e[54]||(e[54]=a("h3",{class:"text-h5 font-weight-bold text-success mb-3"},"Email Enviado!",-1)),e[55]||(e[55]=a("p",{class:"text-body-1 text-medium-emphasis mb-4"}," Enviamos um link de recuperação para o seu email. Verifique sua caixa de entrada e siga as instruções para redefinir sua senha. ",-1)),e[56]||(e[56]=a("p",{class:"text-body-2 text-medium-emphasis"}," Não recebeu o email? Verifique a pasta de spam ou tente novamente em alguns minutos. ",-1))])):(u(),y(le,{key:1,ref_key:"passwordRecoveryFormRef",ref:M,modelValue:D.value,"onUpdate:modelValue":e[16]||(e[16]=i=>D.value=i),onSubmit:z(Q,["prevent"])},{default:o(()=>[e[58]||(e[58]=a("p",{class:"text-body-2 text-medium-emphasis mb-4"}," Digite seu endereço de email e enviaremos um link para redefinir sua senha. ",-1)),s(E,{modelValue:U.email,"onUpdate:modelValue":e[15]||(e[15]=i=>U.email=i),label:"Endereço de E-mail *",rules:ye,variant:"outlined","prepend-inner-icon":"mdi-email",type:"email",placeholder:"Digite seu e-mail cadastrado",disabled:V.value,required:"",autofocus:""},null,8,["modelValue","disabled"]),g.value?(u(),y(G,{key:0,type:"error",variant:"tonal",class:"mt-4"},{default:o(()=>[l(p(g.value),1)]),_:1})):x("",!0),s(G,{type:"info",variant:"tonal",class:"mt-4"},{default:o(()=>[...e[57]||(e[57]=[a("div",{class:"d-flex align-center"},[a("div",null,[a("div",{class:"font-weight-medium mb-1"},"Como funciona:"),a("div",{class:"text-body-2"},[l(" 1. Digite o email da sua conta"),a("br"),l(' 2. Clique em "Enviar Link de Recuperação"'),a("br"),l(" 3. Verifique seu email e clique no link recebido"),a("br"),l(" 4. Defina uma nova senha segura ")])])],-1)])]),_:1})]),_:1},8,["modelValue"]))]),_:1}),P.value?x("",!0):(u(),y(te,{key:0,class:"px-6 py-4 bg-surface border-t"},{default:o(()=>[s(re),s(k,{variant:"text",onClick:B,disabled:V.value},{default:o(()=>[...e[59]||(e[59]=[l(" Cancelar ",-1)])]),_:1},8,["disabled"]),s(k,{color:"primary",variant:"flat",loading:V.value,disabled:!D.value,onClick:Q},{default:o(()=>[s(n,{class:"me-2"},{default:o(()=>[...e[60]||(e[60]=[l("mdi-email-fast",-1)])]),_:1}),e[61]||(e[61]=l(" Enviar Link de Recuperação ",-1))]),_:1},8,["loading","disabled"])]),_:1}))]),_:1})]),_:1},8,["modelValue"])]))}}),Ga=Pe(ga,[["__scopeId","data-v-42adcbc7"]]);export{Ga as default};
