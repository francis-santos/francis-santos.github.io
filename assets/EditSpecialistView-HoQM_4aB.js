import{k as ae,W as te,a9 as re,f as g,r as se,E as ne,X as b,_ as ie,q as e,z as d,T as t,a1 as F,S as c,a4 as k,Z as de,F as R,a8 as q,Q as B}from"./vendor-vue-BvKyvIVR.js";import{s as z}from"./specialists-UonPH132.js";import{_ as me}from"./index-CQBjCOQw.js";import{o as ue,f,j as K,k as N,p as ce}from"./VGrid-CuJrScxf.js";import{V as fe}from"./VIcon-CM-KW5Qw.js";import{V as pe}from"./VForm-BjI_k9Xt.js";import{V as Ve}from"./VContainer-3okOeSxQ.js";import{V as p,a as s}from"./VRow-C_rLTo1r.js";import{V as x,a as T}from"./VSelect-JVxEisdn.js";import{V}from"./VCombobox-tNYiDAes.js";import{V as C}from"./VTextarea-DdR9LUYO.js";import{V as w}from"./VList-CaAoEaF2.js";import{V as ve}from"./VSlider-CovJRDMK.js";import{V as j}from"./VSwitch-K3EdCM7X.js";import{V as ye}from"./VSpacer-kp13s616.js";import"./auth-PiWOMLtm.js";import"./vendor-utils-Cfk84l6i.js";import"./token-storage.service-BqAv9k07.js";import"./VChip-BzUv3cXC.js";import"./vendor-ui-Dz8XL-co.js";import"./tag-Bnbpnddf.js";import"./dimensions-DVh0fwa7.js";import"./autofocus-Bh6bNAdk.js";import"./forwardRefs-D_qxKlPu.js";import"./VMenu-B2XC7rkF.js";import"./lazy-DADzjSlN.js";import"./filter-3ET2mAtK.js";import"./ssrBoot-COakMcr6.js";const S="b1e58ac3-6a88-4fc3-846d-352c8ca4a1db",ge=ae({__name:"EditSpecialistView",setup(O,{expose:o}){o();const _=te(),l=re(),U=l.params.id,I=g(!1),r=g(!1),m=g(!1),i=g(null),P=g(null),n=se({name:"",language:"",extensions:[],systemMessage:"",analysisInstructions:{},patterns:{security:[],performance:[],quality:[],bestPractices:[]},frameworks:[],type:"language",status:"active",priority:1,isActive:!0,isGlobal:!1,version:"1.0.0",author:"",tags:[],description:""}),v=g([]),G=[a=>!!a||"Nome é obrigatório",a=>a.length>=3||"Nome deve ter pelo menos 3 caracteres"],L=[a=>!!a||"Linguagem é obrigatória"],Q=[a=>!!a||"Tipo é obrigatório"],W=[a=>!!a||"Status é obrigatório"],X=[a=>!!a||"Mensagem do sistema é obrigatória",a=>a.length>=10||"Mensagem deve ter pelo menos 10 caracteres"],Z=[{title:"Linguagem",value:"language"},{title:"Framework",value:"framework"},{title:"Segurança",value:"security"},{title:"Personalizado",value:"custom"}],H=[{title:"Ativo",value:"active"},{title:"Inativo",value:"inactive"},{title:"Rascunho",value:"draft"}],A=async()=>{r.value=!0,i.value=null;try{const a=await z.getSpecialist(S,U);P.value=a,M(a)}catch(a){i.value=a instanceof Error?a.message:"Erro ao carregar especialista"}finally{r.value=!1}},M=a=>{n.name=a.name,n.language=a.language,n.extensions=[...a.extensions],n.systemMessage=a.systemMessage,n.analysisInstructions={...a.analysisInstructions},n.patterns={security:[...a.patterns.security||[]],performance:[...a.patterns.performance||[]],quality:[...a.patterns.quality||[]],bestPractices:[...a.patterns.bestPractices||[]]},n.frameworks=a.frameworks?[...a.frameworks]:[],n.type=a.type,n.status=a.status,n.priority=a.priority,n.isActive=a.isActive,n.isGlobal=a.isGlobal,n.version=a.version,n.author=a.author||"",n.tags=[...a.tags||[]],n.description=a.description||"",v.value=Object.keys(a.analysisInstructions)},J=()=>{v.value.push("")},Y=a=>{const u=v.value[a];u&&n.analysisInstructions[u]&&delete n.analysisInstructions[u],v.value.splice(a,1)},h=(a,u)=>{const y=v.value[a];if(y&&y!==u&&n.analysisInstructions[y]){const oe=n.analysisInstructions[y];n.analysisInstructions[u]=oe,delete n.analysisInstructions[y]}v.value[a]=u},D=()=>{n.frameworks.push({name:"",patterns:[],bestPractices:[]})},$=a=>{n.frameworks.splice(a,1)},ee=async()=>{if(I.value){m.value=!0;try{const a=n.frameworks.filter(y=>y.name.trim()),u={...n,frameworks:a.length>0?a:void 0};await z.updateSpecialist(S,U,u),_.push("/experts")}catch(a){console.error("Erro ao atualizar especialista:",a)}finally{m.value=!1}}},le=()=>{_.push("/experts")};ne(()=>{A()});const E={router:_,route:l,organizationId:S,specialistId:U,valid:I,loading:r,saving:m,error:i,specialist:P,form:n,instructionKeys:v,nameRules:G,languageRules:L,typeRules:Q,statusRules:W,systemMessageRules:X,typeOptions:Z,statusOptions:H,loadSpecialist:A,populateForm:M,addInstructionKey:J,removeInstructionKey:Y,updateInstructionKey:h,addFramework:D,removeFramework:$,submit:ee,goBack:le};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}}),be={class:"edit-specialist-page"},ke={key:0,class:"text-center py-8"},xe={key:1,class:"text-center py-8"},we={class:"text-body-2 text-grey-darken-1 mb-4"},_e={key:2},Ue={class:"d-flex align-center mb-6"},Ie={class:"text-body-1 text-grey-darken-1"},Ce={class:"d-flex align-center justify-space-between mb-4"},Se={class:"d-flex align-center justify-space-between mb-4"};function Pe(O,o,_,l,U,I){return c(),b("div",be,[l.loading?(c(),b("div",ke,[e(ue,{indeterminate:"",color:"primary",size:"64"}),o[18]||(o[18]=d("div",{class:"mt-4 text-body-1"},"Carregando especialista...",-1))])):l.error?(c(),b("div",xe,[e(fe,{size:"64",color:"error",class:"mb-4"},{default:t(()=>[...o[19]||(o[19]=[k("mdi-alert-circle",-1)])]),_:1}),o[21]||(o[21]=d("div",{class:"text-h6 mb-2"},"Erro ao carregar especialista",-1)),d("div",we,F(l.error),1),e(f,{color:"primary",onClick:l.loadSpecialist},{default:t(()=>[...o[20]||(o[20]=[k("Tentar Novamente",-1)])]),_:1})])):l.specialist?(c(),b("div",_e,[d("div",Ue,[e(f,{icon:"mdi-arrow-left",variant:"text",onClick:l.goBack,class:"mr-3"}),d("div",null,[o[22]||(o[22]=d("h1",{class:"text-h4 font-weight-bold text-grey-darken-3 mb-2"}," Editar Especialista IA ",-1)),d("p",Ie," Modifique as configurações do especialista "+F(l.specialist.name),1)])]),e(K,null,{default:t(()=>[e(pe,{modelValue:l.valid,"onUpdate:modelValue":o[17]||(o[17]=r=>l.valid=r),onSubmit:de(l.submit,["prevent"])},{default:t(()=>[e(N,null,{default:t(()=>[e(Ve,null,{default:t(()=>[e(p,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[...o[23]||(o[23]=[d("h3",{class:"text-h6 mb-4"},"Informações Básicas",-1)])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(x,{modelValue:l.form.name,"onUpdate:modelValue":o[0]||(o[0]=r=>l.form.name=r),label:"Nome do Especialista *",rules:l.nameRules,variant:"outlined","prepend-inner-icon":"mdi-robot",required:""},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(x,{modelValue:l.form.language,"onUpdate:modelValue":o[1]||(o[1]=r=>l.form.language=r),label:"Linguagem *",rules:l.languageRules,variant:"outlined","prepend-inner-icon":"mdi-code-tags",required:""},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:l.form.type,"onUpdate:modelValue":o[2]||(o[2]=r=>l.form.type=r),items:l.typeOptions,label:"Tipo *",rules:l.typeRules,variant:"outlined",required:""},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(T,{modelValue:l.form.status,"onUpdate:modelValue":o[3]||(o[3]=r=>l.form.status=r),items:l.statusOptions,label:"Status *",rules:l.statusRules,variant:"outlined",required:""},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(V,{modelValue:l.form.extensions,"onUpdate:modelValue":o[4]||(o[4]=r=>l.form.extensions=r),label:"Extensões de Arquivo",chips:"",multiple:"",variant:"outlined","prepend-inner-icon":"mdi-file-code",hint:"Ex: .js, .ts, .jsx, .tsx","persistent-hint":""},null,8,["modelValue"])]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(C,{modelValue:l.form.description,"onUpdate:modelValue":o[5]||(o[5]=r=>l.form.description=r),label:"Descrição",variant:"outlined",rows:"2","prepend-inner-icon":"mdi-text"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,{class:"my-6"}),e(p,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[...o[24]||(o[24]=[d("h3",{class:"text-h6 mb-4"},"Mensagem do Sistema",-1)])]),_:1}),e(s,{cols:"12"},{default:t(()=>[e(C,{modelValue:l.form.systemMessage,"onUpdate:modelValue":o[6]||(o[6]=r=>l.form.systemMessage=r),label:"Mensagem do Sistema *",rules:l.systemMessageRules,variant:"outlined",rows:"4","prepend-inner-icon":"mdi-message-text",hint:"Defina como o especialista deve se comportar e analisar o código","persistent-hint":"",required:""},null,8,["modelValue"])]),_:1})]),_:1}),e(w,{class:"my-6"}),e(p,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[d("div",Ce,[o[26]||(o[26]=d("h3",{class:"text-h6"},"Instruções de Análise",-1)),e(f,{size:"small",color:"primary","prepend-icon":"mdi-plus",onClick:l.addInstructionKey},{default:t(()=>[...o[25]||(o[25]=[k(" Adicionar Categoria ",-1)])]),_:1})])]),_:1}),(c(!0),b(R,null,q(l.instructionKeys,(r,m)=>(c(),B(s,{key:m,cols:"12"},{default:t(()=>[e(p,{"no-gutters":"",class:"align-center"},{default:t(()=>[e(s,{cols:"12",md:"3"},{default:t(()=>[e(x,{modelValue:l.instructionKeys[m],"onUpdate:modelValue":i=>l.instructionKeys[m]=i,label:"Categoria",variant:"outlined",density:"compact",onBlur:i=>l.updateInstructionKey(m,l.instructionKeys[m]||"")},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024),e(s,{cols:"12",md:"8",class:"ml-md-3"},{default:t(()=>[e(C,{modelValue:l.form.analysisInstructions[r],"onUpdate:modelValue":i=>l.form.analysisInstructions[r]=i,label:"Instrução",variant:"outlined",rows:"2",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(s,{cols:"12",md:"1",class:"text-center"},{default:t(()=>[e(f,{icon:"mdi-delete",size:"small",color:"error",variant:"text",onClick:i=>l.removeInstructionKey(m)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(w,{class:"my-6"}),e(p,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[...o[27]||(o[27]=[d("h3",{class:"text-h6 mb-4"},"Padrões de Análise",-1)])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(V,{modelValue:l.form.patterns.security,"onUpdate:modelValue":o[7]||(o[7]=r=>l.form.patterns.security=r),label:"Padrões de Segurança",chips:"",multiple:"",variant:"outlined","prepend-inner-icon":"mdi-shield-check"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(V,{modelValue:l.form.patterns.performance,"onUpdate:modelValue":o[8]||(o[8]=r=>l.form.patterns.performance=r),label:"Padrões de Performance",chips:"",multiple:"",variant:"outlined","prepend-inner-icon":"mdi-speedometer"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(V,{modelValue:l.form.patterns.quality,"onUpdate:modelValue":o[9]||(o[9]=r=>l.form.patterns.quality=r),label:"Padrões de Qualidade",chips:"",multiple:"",variant:"outlined","prepend-inner-icon":"mdi-star"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(V,{modelValue:l.form.patterns.bestPractices,"onUpdate:modelValue":o[10]||(o[10]=r=>l.form.patterns.bestPractices=r),label:"Melhores Práticas",chips:"",multiple:"",variant:"outlined","prepend-inner-icon":"mdi-check-circle"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,{class:"my-6"}),e(p,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[d("div",Se,[o[29]||(o[29]=d("h3",{class:"text-h6"},"Frameworks (Opcional)",-1)),e(f,{size:"small",color:"primary","prepend-icon":"mdi-plus",onClick:l.addFramework},{default:t(()=>[...o[28]||(o[28]=[k(" Adicionar Framework ",-1)])]),_:1})])]),_:1}),(c(!0),b(R,null,q(l.form.frameworks,(r,m)=>(c(),B(s,{key:m,cols:"12"},{default:t(()=>[e(K,{variant:"outlined"},{default:t(()=>[e(N,null,{default:t(()=>[e(p,null,{default:t(()=>[e(s,{cols:"12",md:"3"},{default:t(()=>[e(x,{modelValue:r.name,"onUpdate:modelValue":i=>r.name=i,label:"Nome do Framework",variant:"outlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(s,{cols:"12",md:"4"},{default:t(()=>[e(V,{modelValue:r.patterns,"onUpdate:modelValue":i=>r.patterns=i,label:"Padrões",chips:"",multiple:"",variant:"outlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(s,{cols:"12",md:"4"},{default:t(()=>[e(V,{modelValue:r.bestPractices,"onUpdate:modelValue":i=>r.bestPractices=i,label:"Melhores Práticas",chips:"",multiple:"",variant:"outlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(s,{cols:"12",md:"1",class:"text-center"},{default:t(()=>[e(f,{icon:"mdi-delete",size:"small",color:"error",variant:"text",onClick:i=>l.removeFramework(m)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(w,{class:"my-6"}),e(p,null,{default:t(()=>[e(s,{cols:"12"},{default:t(()=>[...o[30]||(o[30]=[d("h3",{class:"text-h6 mb-4"},"Configurações Adicionais",-1)])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(x,{modelValue:l.form.version,"onUpdate:modelValue":o[11]||(o[11]=r=>l.form.version=r),label:"Versão",variant:"outlined","prepend-inner-icon":"mdi-tag"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(x,{modelValue:l.form.author,"onUpdate:modelValue":o[12]||(o[12]=r=>l.form.author=r),label:"Autor",variant:"outlined","prepend-inner-icon":"mdi-account"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(ve,{modelValue:l.form.priority,"onUpdate:modelValue":o[13]||(o[13]=r=>l.form.priority=r),label:"Prioridade",min:1,max:10,step:"1","thumb-label":"","prepend-icon":"mdi-priority-high"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(V,{modelValue:l.form.tags,"onUpdate:modelValue":o[14]||(o[14]=r=>l.form.tags=r),label:"Tags",chips:"",multiple:"",variant:"outlined","prepend-inner-icon":"mdi-tag-multiple"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(j,{modelValue:l.form.isActive,"onUpdate:modelValue":o[15]||(o[15]=r=>l.form.isActive=r),label:"Especialista Ativo",color:"success"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:t(()=>[e(j,{modelValue:l.form.isGlobal,"onUpdate:modelValue":o[16]||(o[16]=r=>l.form.isGlobal=r),label:"Especialista Global",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ce,{class:"px-6 pb-6"},{default:t(()=>[e(ye),e(f,{color:"grey",variant:"outlined",onClick:l.goBack,disabled:l.loading},{default:t(()=>[...o[31]||(o[31]=[k(" Cancelar ",-1)])]),_:1},8,["disabled"]),e(f,{color:"primary",type:"submit",loading:l.saving,disabled:!l.valid,"prepend-icon":"mdi-content-save"},{default:t(()=>[...o[32]||(o[32]=[k(" Salvar Alterações ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])):ie("",!0)])}const al=me(ge,[["render",Pe],["__scopeId","data-v-891c4b84"],["__file","D:/Development/Projetos/Mira/mira-client/src/views/experts/EditSpecialistView.vue"]]);export{al as default};
