import{k as A,$ as f,a1 as o,_ as b,ae as $,F,a2 as d,q as i,z as s,a8 as m,W as c,j as y,v as re,w as pe,f as C,E as me,L as fe,a0 as se}from"./vendor-vue-BOgiBTV5.js";import{_ as R,a as M,b as O,t as oe}from"./index-Fi5SlckD.js";import{V,a as x}from"./VRow-i_tVuNAF.js";import{V as k,e as K,a as X,b as Y}from"./VGrid-BenhMHcZ.js";import{V as B,u as ge}from"./VChip-CnfVI7ta.js";import{C as E,a as ee,L as te,P as ye,b as he,p as ae,c as N,d as G,i as _e,e as ve,A as be,D as xe,B as ie,f as ne}from"./vendor-charts-BGLm1P_r.js";import{V as T}from"./VSkeletonLoader-BtYuYKhx.js";import{d as I}from"./dashboard.service-C1ebBwgX.js";import{V as we}from"./VAlert-CGm6uEMH.js";import{a as Ce,b as Se,c as De,d as Ae}from"./VList-DIl281p1.js";import"./vendor-ui-BR0KSDoQ.js";import"./auth-Dt5LZyuD.js";import"./vendor-utils-C9OYYH06.js";import"./token-storage.service-BqAv9k07.js";import"./index-DzEvJ-T3.js";import"./ssrBoot-Cswv876e.js";const Re=A({__name:"StatsCards",props:{stats:{type:Array,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),ke={class:"d-flex align-center justify-space-between mb-3"},Ie={class:"text-h4 font-weight-bold text-high-emphasis mb-1"},Me={class:"text-body-2 text-medium-emphasis mb-0"};function je(p,t,a,e,l,u){return d(),f(V,null,{default:o(()=>[(d(!0),b(F,null,$(a.stats,r=>(d(),f(x,{key:r.title,cols:"12",sm:"6",lg:"3"},{default:o(()=>[i(k,{class:"stats-card pa-4",elevation:"2",loading:a.loading},{default:o(()=>[s("div",ke,[i(K,{color:r.color,size:"48",class:"elevation-2"},{default:o(()=>[i(M,{color:`${r.color}-darken-2`,size:"24"},{default:o(()=>[m(c(r.icon),1)]),_:2},1032,["color"])]),_:2},1032,["color"]),i(B,{color:r.changeColor,size:"small",variant:"tonal","prepend-icon":"mdi-trending-up"},{default:o(()=>[m(c(r.change),1)]),_:2},1032,["color"])]),s("div",null,[s("h3",Ie,c(r.value),1),s("p",Me,c(r.title),1)])]),_:2},1032,["loading"])]),_:2},1024))),128))]),_:1})}const Pe=R(Re,[["render",je],["__scopeId","data-v-30033f77"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/StatsCards.vue"]]),Te=A({__name:"AnalysisChart",props:{data:{type:Object,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t(),E.register(ee,te,ye,he,ae,N,G,_e);const e={chartOptions:y(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12,weight:"500"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,padding:12}},scales:{x:{border:{display:!1},grid:{display:!1},ticks:{font:{size:11},color:"rgba(0, 0, 0, 0.6)"}},y:{border:{display:!1},grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{font:{size:11},color:"rgba(0, 0, 0, 0.6)",beginAtZero:!0}}},interaction:{intersect:!1,mode:"index"}})),get Line(){return ve}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}}),qe={class:"d-flex align-center justify-space-between mb-4"},Ve={class:"chart-container",style:{height:"300px"}};function Oe(p,t,a,e,l,u){return d(),f(k,{class:"analysis-chart pa-4",elevation:"2"},{default:o(()=>[s("div",qe,[t[0]||(t[0]=s("div",null,[s("h3",{class:"text-h6 font-weight-bold text-high-emphasis"}," Tendência de Análises "),s("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Últimos 9 dias ")],-1)),i(O,{icon:"mdi-dots-vertical",variant:"text",size:"small"})]),s("div",Ve,[a.loading?(d(),f(T,{key:0,type:"image",height:"300",class:"rounded"})):(d(),f(e.Line,{key:1,data:a.data,options:e.chartOptions},null,8,["data","options"]))])]),_:1})}const Be=R(Te,[["render",Oe],["__scopeId","data-v-2c46ddfe"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/AnalysisChart.vue"]]),Le=A({__name:"QualityChart",props:{data:{type:Object,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t(),E.register(be,N,G);const a=y(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}}},cutout:"60%"})),e=y(()=>8.7),l={chartOptions:a,averageScore:e,get Doughnut(){return xe}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),ze={class:"d-flex align-center justify-space-between mb-4"},$e={class:"chart-container position-relative",style:{height:"280px"}},Fe={key:1,class:"position-relative"},Ee={class:"center-score"},Ne={class:"text-center"},Ge={class:"text-h4 font-weight-bold text-success mb-1"};function Qe(p,t,a,e,l,u){return d(),f(k,{class:"quality-chart pa-4",elevation:"2"},{default:o(()=>[s("div",ze,[t[0]||(t[0]=s("div",null,[s("h3",{class:"text-h6 font-weight-bold text-grey-darken-3"}," Qualidade do Código "),s("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Score médio atual ")],-1)),i(B,{color:"success",variant:"tonal",size:"small"},{default:o(()=>[m(c(e.averageScore.toFixed(1)),1)]),_:1})]),s("div",$e,[a.loading?(d(),f(T,{key:0,type:"avatar",width:"200",height:"200",class:"mx-auto"})):(d(),b("div",Fe,[i(e.Doughnut,{data:a.data,options:e.chartOptions},null,8,["data","options"]),s("div",Ee,[s("div",Ne,[s("h2",Ge,c(e.averageScore.toFixed(1)),1),t[1]||(t[1]=s("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Score Geral ",-1))])])]))])]),_:1})}const We=R(Le,[["render",Qe],["__scopeId","data-v-98516d15"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/QualityChart.vue"]]),Ze=A({__name:"SecurityChart",props:{data:{type:Object,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t(),E.register(ee,te,ie,ae,N,G);const a=p,e=y(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{border:{display:!1},grid:{display:!1},ticks:{color:"rgba(0, 0, 0, 0.6)"}},y:{border:{display:!1},grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{color:"rgba(0, 0, 0, 0.6)",beginAtZero:!0}}}})),l=y(()=>a.data?.datasets?.[0]?.data?a.data.datasets[0].data.reduce((h,S)=>h+S,0):0),u=y(()=>{if(!a.data?.datasets?.[0]?.data)return 0;const h=a.data.datasets[0].data;return h[h.length-1]||0}),r=y(()=>l.value===0?0:Math.round(u.value/l.value*100)),g={props:a,chartOptions:e,totalIssues:l,resolvedIssues:u,resolutionRate:r,get Bar(){return ne}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),Ue={class:"d-flex align-center justify-space-between mb-4"},Je={class:"chart-container",style:{height:"200px"}},He={class:"mt-4 pt-3",style:{"border-top":"1px solid rgba(0,0,0,0.1)"}},Ke={class:"text-h6 font-weight-bold text-error"},Xe={class:"text-h6 font-weight-bold text-success"};function Ye(p,t,a,e,l,u){return d(),f(k,{class:"security-chart pa-4",elevation:"2"},{default:o(()=>[s("div",Ue,[t[0]||(t[0]=s("div",null,[s("h3",{class:"text-h6 font-weight-bold text-high-emphasis"}," Issues de Segurança "),s("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Por severidade ")],-1)),i(B,{color:"success",variant:"tonal",size:"small"},{default:o(()=>[m(c(e.resolutionRate)+"% resolvidas ",1)]),_:1})]),s("div",Je,[a.loading?(d(),f(T,{key:0,type:"image",height:"200",class:"rounded"})):(d(),f(e.Bar,{key:1,data:a.data,options:e.chartOptions},null,8,["data","options"]))]),s("div",He,[i(V,null,{default:o(()=>[i(x,{cols:"6",class:"text-center"},{default:o(()=>[s("div",Ke,c(e.totalIssues),1),t[1]||(t[1]=s("div",{class:"text-caption text-grey-darken-1"},"Total",-1))]),_:1}),i(x,{cols:"6",class:"text-center"},{default:o(()=>[s("div",Xe,c(e.resolvedIssues),1),t[2]||(t[2]=s("div",{class:"text-caption text-grey-darken-1"},"Resolvidas",-1))]),_:1})]),_:1})])]),_:1})}const et=R(Ze,[["render",Ye],["__scopeId","data-v-ebaf1d6c"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/SecurityChart.vue"]]),tt=A({__name:"RecentActivity",props:{activities:{type:Array,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t();const a={};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),at={class:"d-flex align-center justify-space-between mb-4"},st={style:{"max-height":"300px","overflow-y":"auto"}},ot={key:1},rt={class:"flex-grow-1"},it={class:"text-body-2 font-weight-medium text-grey-darken-3 mb-1"},nt={class:"text-caption text-grey-darken-1 mb-1"},lt={class:"d-flex align-center justify-space-between"},dt={class:"text-caption text-grey-darken-1"},ct={class:"mt-4 pt-3 text-center",style:{"border-top":"1px solid rgba(0,0,0,0.1)"}};function ut(p,t,a,e,l,u){return d(),f(k,{class:"recent-activity pa-4",elevation:"2"},{default:o(()=>[s("div",at,[t[1]||(t[1]=s("div",null,[s("h3",{class:"text-h6 font-weight-bold text-high-emphasis"}," Atividades Recentes "),s("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Últimas ações do sistema ")],-1)),i(O,{to:"/activity",variant:"text",size:"small",color:"primary"},{default:o(()=>[...t[0]||(t[0]=[m(" Ver tudo ",-1)])]),_:1})]),s("div",st,[a.loading?(d(),f(T,{key:0,type:"list-item-avatar-three-line@5"})):(d(),b("div",ot,[(d(!0),b(F,null,$(a.activities,(r,g)=>(d(),b("div",{key:r.id,class:re(["activity-item d-flex align-start",{"mb-4":g<a.activities.length-1}])},[i(K,{color:r.color,size:"32",class:"mr-3 mt-1"},{default:o(()=>[i(M,{color:`${r.color}-darken-2`,size:"18"},{default:o(()=>[m(c(r.icon),1)]),_:2},1032,["color"])]),_:2},1032,["color"]),s("div",rt,[s("div",it,c(r.title),1),s("div",nt,c(r.description),1),s("div",lt,[i(B,{size:"x-small",variant:"tonal",color:"primary"},{default:o(()=>[m(c(r.repository),1)]),_:2},1024),s("span",dt,c(r.relativeTime),1)])])],2))),128))]))]),s("div",ct,[i(O,{variant:"tonal",color:"primary",block:"","prepend-icon":"mdi-refresh"},{default:o(()=>[...t[2]||(t[2]=[m(" Atualizar Atividades ",-1)])]),_:1})])]),_:1})}const pt=R(tt,[["render",ut],["__scopeId","data-v-73855657"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/RecentActivity.vue"]]),mt=A({__name:"DetailedMetrics",props:{metrics:{type:Object,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t();const a=p,e=y(()=>{const h=a.metrics.averageProcessingTime;return h<60?`${h}s`:h<3600?`${Math.round(h/60)}m`:`${Math.round(h/3600)}h`}),l=y(()=>a.metrics.totalAnalyses===0?0:Math.round(a.metrics.completedAnalyses/a.metrics.totalAnalyses*100)),u=y(()=>a.metrics.repositoryGrowth.growthRate>=0?"success":"error"),r=y(()=>a.metrics.repositoryGrowth.growthRate>=0?"mdi-trending-up":"mdi-trending-down"),g={props:a,processingTimeFormatted:e,successRate:l,growthColor:u,growthIcon:r};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),ft={key:1},gt={class:"mb-4"},yt={class:"d-flex align-center justify-space-between mb-2"},ht={class:"mb-4"},_t={class:"d-flex align-center justify-space-between mb-2"},vt={class:"text-h6 font-weight-bold text-info"},bt={class:"mb-4"},xt={class:"d-flex align-center justify-space-between mb-2"},wt={class:"text-caption text-medium-emphasis"},Ct={class:"d-flex align-center justify-space-between mb-1"},St={class:"text-body-2"},Dt={class:"text-caption font-weight-medium"};function At(p,t,a,e,l,u){return d(),f(k,null,{default:o(()=>[i(X,{class:"d-flex align-center"},{default:o(()=>[i(M,{class:"me-2"},{default:o(()=>[...t[0]||(t[0]=[m("mdi-chart-box-outline",-1)])]),_:1}),t[1]||(t[1]=m(" Métricas Detalhadas ",-1))]),_:1}),i(Y,null,{default:o(()=>[a.loading?(d(),f(T,{key:0,type:"paragraph@3"})):(d(),b("div",ft,[s("div",gt,[s("div",yt,[t[2]||(t[2]=s("span",{class:"text-body-2 font-weight-medium"},"Taxa de Sucesso",-1)),s("span",{class:re(["text-h6 font-weight-bold",`text-${e.successRate>=90?"success":e.successRate>=70?"warning":"error"}`])},c(e.successRate)+"% ",3)]),i(oe,{"model-value":e.successRate,color:e.successRate>=90?"success":e.successRate>=70?"warning":"error",height:"8",rounded:""},null,8,["model-value","color"])]),s("div",ht,[s("div",_t,[t[3]||(t[3]=s("span",{class:"text-body-2 font-weight-medium"},"Tempo Médio de Processamento",-1)),s("span",vt,c(e.processingTimeFormatted),1)])]),s("div",bt,[s("div",xt,[t[4]||(t[4]=s("span",{class:"text-body-2 font-weight-medium"},"Crescimento de Repositórios",-1)),i(B,{color:e.growthColor,"prepend-icon":e.growthIcon,size:"small",variant:"tonal"},{default:o(()=>[m(c(a.metrics.repositoryGrowth.growthRate>=0?"+":"")+c(a.metrics.repositoryGrowth.growthRate.toFixed(1))+"% ",1)]),_:1},8,["color","prepend-icon"])]),s("div",wt," Este mês: "+c(a.metrics.repositoryGrowth.thisMonth)+" | Mês anterior: "+c(a.metrics.repositoryGrowth.lastMonth),1)]),s("div",null,[t[5]||(t[5]=s("h4",{class:"text-subtitle-2 font-weight-bold mb-3"}," Principais Tipos de Issues ",-1)),(d(!0),b(F,null,$(a.metrics.topIssueTypes,r=>(d(),b("div",{key:r.type,class:"mb-2"},[s("div",Ct,[s("span",St,c(r.type),1),s("span",Dt,c(r.count)+" ("+c(r.percentage.toFixed(1))+"%) ",1)]),i(oe,{"model-value":r.percentage,color:"primary",height:"4",rounded:""},null,8,["model-value"])]))),128))])]))]),_:1})]),_:1})}const Rt=R(mt,[["render",At],["__scopeId","data-v-1ec41502"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/DetailedMetrics.vue"]]),kt=A({__name:"RepositoryAnalysisChart",props:{repositories:{type:Array,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t(),E.register(ee,te,ie,ae,N,G);const a=p,e=y(()=>({labels:a.repositories.map(r=>r.repositoryName),datasets:[{label:"Análises",data:a.repositories.map(r=>r.analysisCount),backgroundColor:"rgba(25, 118, 210, 0.8)",borderColor:"rgb(25, 118, 210)",borderWidth:1,borderRadius:4,borderSkipped:!1},{label:"Issues Encontradas",data:a.repositories.map(r=>r.issuesFound),backgroundColor:"rgba(255, 152, 0, 0.8)",borderColor:"rgb(255, 152, 0)",borderWidth:1,borderRadius:4,borderSkipped:!1}]})),l=y(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12,weight:"500"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,padding:12,callbacks:{afterBody:function(r){const g=r[0].dataIndex;return[`Score de Qualidade: ${a.repositories[g].qualityScore.toFixed(1)}`]}}}},scales:{x:{border:{display:!1},grid:{display:!1},ticks:{font:{size:11},color:"rgba(0, 0, 0, 0.6)",maxRotation:45}},y:{border:{display:!1},grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{font:{size:11},color:"rgba(0, 0, 0, 0.6)",beginAtZero:!0}}},interaction:{intersect:!1,mode:"index"}}));pe(()=>a.repositories,()=>{},{immediate:!0});const u={props:a,chartData:e,chartOptions:l,get Bar(){return ne}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),It={class:"d-flex align-center"},Mt={class:"chart-container",style:{height:"300px"}},jt={key:2,class:"d-flex flex-column align-center justify-center",style:{height:"300px"}};function Pt(p,t,a,e,l,u){return d(),f(k,null,{default:o(()=>[i(X,{class:"d-flex align-center justify-space-between"},{default:o(()=>[s("div",It,[i(M,{class:"me-2"},{default:o(()=>[...t[0]||(t[0]=[m("mdi-source-repository-multiple",-1)])]),_:1}),t[1]||(t[1]=m(" Análises por Repositório ",-1))]),i(O,{icon:"mdi-dots-vertical",variant:"text",size:"small"})]),_:1}),i(Y,null,{default:o(()=>[s("div",Mt,[a.loading?(d(),f(T,{key:0,type:"image",height:"300",class:"rounded"})):a.repositories.length>0?(d(),f(e.Bar,{key:`repo-chart-${a.repositories.length}`,data:e.chartData,options:e.chartOptions},null,8,["data","options"])):(d(),b("div",jt,[i(M,{size:"64",color:"grey-lighten-1"},{default:o(()=>[...t[2]||(t[2]=[m("mdi-chart-bar",-1)])]),_:1}),t[3]||(t[3]=s("p",{class:"text-body-1 text-grey-darken-1 mt-4 text-center"}," Nenhum dado de repositório disponível ",-1))]))])]),_:1})]),_:1})}const Tt=R(kt,[["render",Pt],["__scopeId","data-v-21f058dd"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/RepositoryAnalysisChart.vue"]]);function qt(){const{isDemoUser:p,simulateApiDelay:t}=ge(),a=C(!1),e=C(null),l=C({totalAnalyses:0,activeRepositories:0,issuesFound:0,qualityScore:0}),u=C([]),r=C({excellent:0,good:0,fair:0,poor:0}),g=C({high:0,medium:0,low:0,resolved:0}),h=C([]),S=C([]),j=C({totalAnalyses:0,completedAnalyses:0,failedAnalyses:0,averageProcessingTime:0,topIssueTypes:[],repositoryGrowth:{thisMonth:0,lastMonth:0,growthRate:0}}),Q=y(()=>({labels:u.value.map(n=>new Date(n.date).toLocaleDateString("pt-BR",{month:"short",day:"numeric"})),datasets:[{label:"Análises",data:u.value.map(n=>n.analyses),borderColor:"#1976d2",backgroundColor:"rgba(25, 118, 210, 0.1)",tension:.4,fill:!0},{label:"Issues Encontradas",data:u.value.map(n=>n.issues),borderColor:"#f44336",backgroundColor:"rgba(244, 67, 54, 0.1)",tension:.4,fill:!0},{label:"Issues Resolvidas",data:u.value.map(n=>n.resolved),borderColor:"#4caf50",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4,fill:!0}]})),W=y(()=>({labels:["Excelente","Boa","Regular","Ruim"],datasets:[{data:[r.value.excellent,r.value.good,r.value.fair,r.value.poor],backgroundColor:["#4caf50","#2196f3","#ff9800","#f44336"],borderWidth:0}]})),L=y(()=>({labels:["Alta","Média","Baixa","Resolvidas"],datasets:[{label:"Issues de Segurança",data:[g.value.high,g.value.medium,g.value.low,g.value.resolved],backgroundColor:["#f44336","#ff9800","#ffeb3b","#4caf50"],borderWidth:1,borderColor:"#fff"}]})),Z=y(()=>[{title:"Total de Análises",value:l.value.totalAnalyses.toLocaleString("pt-BR"),icon:"mdi-chart-timeline-variant",color:"primary",change:"+12%",changeColor:"success"},{title:"Repositórios Ativos",value:l.value.activeRepositories.toString(),icon:"mdi-source-repository",color:"info",change:"+3",changeColor:"success"},{title:"Issues Encontradas",value:l.value.issuesFound.toString(),icon:"mdi-bug",color:"warning",change:"-8%",changeColor:"success"},{title:"Score de Qualidade",value:l.value.qualityScore.toFixed(1),icon:"mdi-star",color:"success",change:"+0.3",changeColor:"success"}]),q=y(()=>h.value.map(n=>({...n,relativeTime:z(n.timestamp),icon:U(n.type),color:J(n.type,n.severity)})));function z(n){const _=new Date,w=new Date(n),v=Math.floor((_.getTime()-w.getTime())/1e3);return v<60?"agora mesmo":v<3600?`${Math.floor(v/60)}m atrás`:v<86400?`${Math.floor(v/3600)}h atrás`:`${Math.floor(v/86400)}d atrás`}function U(n){return{analysis:"mdi-chart-line",issue:"mdi-alert-circle",resolved:"mdi-check-circle",repository:"mdi-source-repository"}[n]||"mdi-information"}function J(n,_){return n==="issue"?{high:"error",medium:"warning",low:"info"}[_]||"warning":{analysis:"primary",resolved:"success",repository:"info"}[n]||"primary"}async function P(){a.value=!0,e.value=null;try{if(p.value)await t(800),l.value={totalAnalyses:1247,activeRepositories:23,issuesFound:156,qualityScore:8.4},u.value=[{date:"2024-11-01",analyses:45,issues:12,resolved:8},{date:"2024-11-02",analyses:52,issues:15,resolved:11},{date:"2024-11-03",analyses:38,issues:9,resolved:7},{date:"2024-11-04",analyses:61,issues:18,resolved:14},{date:"2024-11-05",analyses:47,issues:11,resolved:9},{date:"2024-11-06",analyses:55,issues:16,resolved:12},{date:"2024-11-07",analyses:43,issues:8,resolved:6}],r.value={excellent:35,good:28,fair:22,poor:15},g.value={high:8,medium:24,low:43,resolved:89},h.value=[{id:"1",type:"analysis",title:"Análise concluída com sucesso",description:"Nova análise de código foi concluída para o repositório",repository:"projeto-frontend-react",author:"João Silva",timestamp:new Date(Date.now()-3e5).toISOString(),severity:"info"},{id:"2",type:"issue",title:"Vulnerabilidade de segurança detectada",description:"Issue de alta severidade foi encontrada no código",repository:"api-backend-node",author:"Maria Santos",timestamp:new Date(Date.now()-9e5).toISOString(),severity:"high"},{id:"3",type:"resolved",title:"Issues resolvidas automaticamente",description:"5 problemas foram corrigidos com sucesso",repository:"mobile-app-flutter",author:"Pedro Costa",timestamp:new Date(Date.now()-18e5).toISOString(),severity:"info"},{id:"4",type:"repository",title:"Novo repositório adicionado",description:"Repositório configurado para análise automática",repository:"web-service-api",author:"Ana Oliveira",timestamp:new Date(Date.now()-36e5).toISOString(),severity:"info"},{id:"5",type:"analysis",title:"Análise programada iniciada",description:"Análise automática foi iniciada conforme cronograma",repository:"frontend-dashboard",author:"Sistema",timestamp:new Date(Date.now()-72e5).toISOString(),severity:"info"}],S.value=[{id:"1",name:"projeto-frontend-react",fullName:"demo/projeto-frontend-react",analysisCount:45,qualityScore:8.7,issuesCount:3,lastAnalysisAt:new Date(Date.now()-3e5).toISOString()},{id:"2",name:"api-backend-node",fullName:"demo/api-backend-node",analysisCount:32,qualityScore:7.9,issuesCount:8,lastAnalysisAt:new Date(Date.now()-9e5).toISOString()},{id:"3",name:"mobile-app-flutter",fullName:"demo/mobile-app-flutter",analysisCount:18,qualityScore:6.5,issuesCount:12,lastAnalysisAt:new Date(Date.now()-18e5).toISOString()}],await H();else{const[n,_,w,v,ce,ue]=await Promise.all([I.getDashboardStats(),I.getAnalysisTrend(30),I.getQualityDistribution(),I.getSecurityIssues(),I.getRecentActivity(10),I.getTopRepositories(5)]);l.value=n,u.value=_,r.value=w,g.value=v,h.value=ce,S.value=ue,await H()}}catch(n){console.error("Error loading dashboard data:",n),e.value=n instanceof Error?n.message:"Erro ao carregar dados do dashboard"}finally{a.value=!1}}async function D(){await P()}function le(){return setInterval(()=>{a.value||P()},300*1e3)}me(async()=>{await P()});const de=y(()=>S.value.map(n=>({repositoryName:n.name,analysisCount:n.analysisCount,issuesFound:n.issuesCount,qualityScore:n.qualityScore})));async function H(){try{if(p.value){const n=l.value.totalAnalyses,_=Math.floor(n*.87),w=n-_;j.value={totalAnalyses:n,completedAnalyses:_,failedAnalyses:w,averageProcessingTime:142,topIssueTypes:[{type:"Qualidade de Código",count:52,percentage:42},{type:"Segurança",count:38,percentage:31},{type:"Performance",count:21,percentage:17},{type:"Boas Práticas",count:12,percentage:10}],repositoryGrowth:{thisMonth:l.value.activeRepositories,lastMonth:20,growthRate:15}}}else j.value=await I.getDetailedMetrics()}catch(n){console.error("Error loading detailed metrics:",n);const _=l.value.totalAnalyses,w=Math.floor(_*.85),v=_-w;j.value={totalAnalyses:_,completedAnalyses:w,failedAnalyses:v,averageProcessingTime:180,topIssueTypes:[{type:"Qualidade de Código",count:45,percentage:40},{type:"Segurança",count:32,percentage:30},{type:"Performance",count:28,percentage:20},{type:"Boas Práticas",count:23,percentage:10}],repositoryGrowth:{thisMonth:l.value.activeRepositories,lastMonth:Math.max(1,l.value.activeRepositories-1),growthRate:0}}}}return{isLoading:a,error:e,stats:l,analysisTrend:u,qualityDistribution:r,securityIssues:g,recentActivity:h,topRepositories:S,detailedMetrics:j,analysisChartData:Q,qualityChartData:W,securityChartData:L,formattedStats:Z,formattedRecentActivity:q,repositoryAnalysisData:de,loadDashboardData:P,refreshData:D,startAutoRefresh:le,loadDetailedMetrics:H}}const Vt=A({__name:"DashboardView",setup(p,{expose:t}){t();const{isLoading:a,error:e,topRepositories:l,detailedMetrics:u,analysisChartData:r,qualityChartData:g,securityChartData:h,formattedStats:S,formattedRecentActivity:j,repositoryAnalysisData:Q,refreshData:W,startAutoRefresh:L}=qt();function Z(U){const J=new Date,P=new Date(U),D=Math.floor((J.getTime()-P.getTime())/1e3);return D<60?"agora mesmo":D<3600?`${Math.floor(D/60)}m atrás`:D<86400?`${Math.floor(D/3600)}h atrás`:`${Math.floor(D/86400)}d atrás`}const q=L();fe(()=>{q&&clearInterval(q)});const z={isLoading:a,error:e,topRepositories:l,detailedMetrics:u,analysisChartData:r,qualityChartData:g,securityChartData:h,formattedStats:S,formattedRecentActivity:j,repositoryAnalysisData:Q,refreshData:W,startAutoRefresh:L,getRelativeTime:Z,autoRefreshInterval:q,StatsCards:Pe,AnalysisChart:Be,QualityChart:We,SecurityChart:et,RecentActivity:pt,DetailedMetrics:Rt,RepositoryAnalysisChart:Tt};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}}),Ot={class:"dashboard"},Bt={class:"d-flex justify-space-between align-center mb-6"},Lt={class:"text-caption text-medium-emphasis"};function zt(p,t,a,e,l,u){return d(),b("div",Ot,[s("div",Bt,[t[2]||(t[2]=s("div",null,[s("h1",{class:"text-h4 font-weight-bold text-high-emphasis mb-2"}," Dashboard "),s("p",{class:"text-body-1 text-medium-emphasis"}," Visão geral das análises de código da organização ")],-1)),i(O,{color:"primary","prepend-icon":"mdi-refresh",variant:"elevated",onClick:e.refreshData,loading:e.isLoading},{default:o(()=>[...t[1]||(t[1]=[m(" Atualizar ",-1)])]),_:1},8,["onClick","loading"])]),e.error?(d(),f(we,{key:0,type:"error",variant:"tonal",class:"mb-6",closable:"","onClick:close":t[0]||(t[0]=r=>e.error=null)},{default:o(()=>[m(c(e.error),1)]),_:1})):se("",!0),i(e.StatsCards,{stats:e.formattedStats,loading:e.isLoading,class:"mb-6"},null,8,["stats","loading"]),i(V,null,{default:o(()=>[i(x,{cols:"12",lg:"8"},{default:o(()=>[i(e.AnalysisChart,{data:e.analysisChartData,loading:e.isLoading},null,8,["data","loading"])]),_:1}),i(x,{cols:"12",lg:"4"},{default:o(()=>[i(e.QualityChart,{data:e.qualityChartData,loading:e.isLoading},null,8,["data","loading"])]),_:1}),i(x,{cols:"12",md:"6"},{default:o(()=>[i(e.SecurityChart,{data:e.securityChartData,loading:e.isLoading},null,8,["data","loading"])]),_:1}),i(x,{cols:"12",md:"6"},{default:o(()=>[i(e.RecentActivity,{activities:e.formattedRecentActivity,loading:e.isLoading},null,8,["activities","loading"])]),_:1})]),_:1}),i(V,{class:"mb-6"},{default:o(()=>[i(x,{cols:"12",lg:"8"},{default:o(()=>[i(e.RepositoryAnalysisChart,{repositories:e.repositoryAnalysisData,loading:e.isLoading},null,8,["repositories","loading"])]),_:1}),i(x,{cols:"12",lg:"4"},{default:o(()=>[i(e.DetailedMetrics,{metrics:e.detailedMetrics,loading:e.isLoading},null,8,["metrics","loading"])]),_:1})]),_:1}),e.topRepositories.length>0?(d(),f(V,{key:1},{default:o(()=>[i(x,{cols:"12"},{default:o(()=>[i(k,null,{default:o(()=>[i(X,{class:"d-flex align-center"},{default:o(()=>[i(M,{class:"me-2"},{default:o(()=>[...t[3]||(t[3]=[m("mdi-source-repository-multiple",-1)])]),_:1}),t[4]||(t[4]=m(" Top Repositórios ",-1))]),_:1}),i(Y,null,{default:o(()=>[i(Ce,null,{default:o(()=>[(d(!0),b(F,null,$(e.topRepositories,r=>(d(),f(Se,{key:r.id,class:"px-0"},{prepend:o(()=>[i(K,{color:"primary",size:"40"},{default:o(()=>[i(M,null,{default:o(()=>[...t[5]||(t[5]=[m("mdi-source-repository",-1)])]),_:1})]),_:1})]),append:o(()=>[s("div",Lt,c(e.getRelativeTime(r.lastAnalysisAt)),1)]),default:o(()=>[i(De,{class:"font-weight-medium"},{default:o(()=>[m(c(r.fullName),1)]),_:2},1024),i(Ae,null,{default:o(()=>[m(c(r.analysisCount)+" análises • "+c(r.issuesCount)+" issues • Score: "+c(r.qualityScore.toFixed(1)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):se("",!0)])}const aa=R(Vt,[["render",zt],["__scopeId","data-v-ed7dad95"],["__file","D:/Development/Projetos/Mira/mira-client/src/views/dashboard/DashboardView.vue"]]);export{aa as default};
