import{p as L,w as I,ax as j}from"./vendor-ui-Ca7vMALJ.js";import{s as O,h as v,u as m,a as x,y as k,q as b,F as A}from"./vendor-vue-BKuzT1x2.js";const S=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const s=[];let l=e.indexOf(t);for(;~l;)s.push([l,l+t.length]),l=e.indexOf(t,l+t.length);return s.length?s:-1};function w(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const E=L({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function C(e,t,n){const s=[],l=n?.default??S,c=n?.filterKeys?I(n.filterKeys):!1,f=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return s;let a=null;e:for(let r=0;r<e.length;r++){const[i,F=i]=I(e[r]),d={},u={};let o=-1;if((t||f>0)&&!n?.noFilter){let p=!1;if(typeof i=="object"){if(i.type==="divider"||i.type==="subheader"){a?.type==="divider"&&i.type==="subheader"&&s.push(a),a={index:r,matches:{},type:i.type};continue}const y=c||Object.keys(F);p=y.length===f;for(const M of y){const _=j(F,M),K=n?.customKeyFilter?.[M];if(o=K?K(_,t,i):l(_,t,i),o!==-1&&o!==!1)K?d[M]=w(o,t):u[M]=w(o,t);else if(n?.filterMode==="every")continue e}}else o=l(i,t,i),o!==-1&&o!==!1&&(u.title=w(o,t));const h=Object.keys(u).length,g=Object.keys(d).length;if(!h&&!g||n?.filterMode==="union"&&g!==f&&!h||n?.filterMode==="intersection"&&(g!==f||!h&&f>0&&!p))continue}a&&(s.push(a),a=null),s.push({index:r,matches:{...u,...d}})}return s}function P(e,t,n,s){const l=O([]),c=O(new Map),f=v(()=>s?.transform?m(t).map(r=>[r,s.transform(r)]):m(t));x(()=>{const r=typeof n=="function"?n():m(n),i=typeof r!="string"&&typeof r!="number"?"":String(r),F=C(f.value,i,{customKeyFilter:{...e.customKeyFilter,...m(s?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=m(t),u=[],o=new Map;F.forEach(p=>{let{index:h,matches:g}=p;const y=d[h];u.push(y),o.set(y.value,g)}),l.value=u,c.value=o});function a(r){return c.value.get(r.value)}return{filteredItems:l,filteredMatches:c,getMatches:a}}function R(e,t,n){return n==null||!n.length?t:n.map((s,l)=>{const c=l===0?0:n[l-1][1],f=[k("span",{class:b(`${e}__unmask`)},[t.slice(c,s[0])]),k("span",{class:b(`${e}__mask`)},[t.slice(s[0],s[1])])];return l===n.length-1&&f.push(k("span",{class:b(`${e}__unmask`)},[t.slice(s[1])])),k(A,null,[f])})}export{R as h,E as m,P as u};
