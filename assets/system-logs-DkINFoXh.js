import{a as m}from"./auth-PiWOMLtm.js";import{u as g}from"./VChip-BzUv3cXC.js";class y{baseUrl="/logs";async getSystemLogs(t,e,a={}){const{isDemoUser:o,getMockData:n,simulateApiDelay:c}=g();if(o.value)return await c(),(await n("systemLogs",1,100,{...a,functionality:t})).data;const s=new URLSearchParams;return e&&s.append("organizationId",e),a.level&&s.append("level",a.level),a.dateFrom&&s.append("dateFrom",a.dateFrom),a.dateTo&&s.append("dateTo",a.dateTo),a.context&&s.append("context",a.context),a.search&&s.append("search",a.search),await m.get(`${this.baseUrl}/${t}?${s}`)}async getLogsByDate(t,e){const a=new URLSearchParams;return e&&a.append("organizationId",e),await m.get(`${this.baseUrl}/by-date/${t}?${a}`)}async getLogSummary(t,e,a){const o=new URLSearchParams;return e&&o.append("organizationId",e),a&&o.append("date",a),await m.get(`${this.baseUrl}/${t}/summary?${o}`)}async getAvailableOrganizations(){const{isDemoUser:t,simulateApiDelay:e}=g();return t.value?(await e(),["demo-org-1","demo-org-2","demo-org-3"]):await m.get(`${this.baseUrl}/organizations`)}async getSystemLogStats(t,e={}){const{isDemoUser:a,simulateApiDelay:o}=g();if(a.value)return await o(),{totalLogs:1247,errorCount:23,warningCount:89,infoCount:1135,functionalities:[{name:"webhook",count:456},{name:"analysis",count:342},{name:"git-integration",count:289},{name:"system",count:123},{name:"security",count:37}]};const n=new URLSearchParams;return t&&n.append("organizationId",t),e.dateFrom&&n.append("dateFrom",e.dateFrom),e.dateTo&&n.append("dateTo",e.dateTo),await m.get(`${this.baseUrl}/stats?${n}`)}async getOrganizationLogsRange(t,e=7){const{isDemoUser:a,getMockData:o,simulateApiDelay:n}=g();if(a.value)return await n(),(await o("organizationLogs",1,100,{})).data;const c=[],s=new Date;for(let r=0;r<e;r++){const i=new Date(s);i.setDate(i.getDate()-r);const u=i.toISOString().split("T")[0];try{const d=await this.getLogsByDate(u,t);for(const l of d)for(const p of l.entries)c.push({...p,timestamp:p.timestamp instanceof Date?p.timestamp:new Date(p.timestamp),functionality:l.functionality})}catch(d){console.warn(`Failed to load logs for ${u}:`,d)}}return c.sort((r,i)=>new Date(i.timestamp).getTime()-new Date(r.timestamp).getTime())}}const L=new y;export{L as s};
