import{d as k,s as Ve,h as X,I as Se,w as re,n as e,v as ne,y as a,F as ye,P as Xe,q as Oe,aa as r,j as Be,r as Ne,$ as Z,a1 as l,_ as y,V as v,Z as w,a0 as F,a6 as el,ac as ll,ad as tl,ah as Ae,D as al,u as $e,U as ol,Y as sl}from"./vendor-vue-BKuzT1x2.js";import{r as ue}from"./rules-DAo5MLov.js";import{u as il}from"./useDemoMode-DpDjlFnd.js";import{y as nl,z as rl,a as V,k as ul,v as dl,b as q,c as qe,A as cl,_ as Le}from"./index-gFSB3kms.js";import{V as ml}from"./VDialog-BfRWf8LZ.js";import{V as vl}from"./VForm-DthKd8zl.js";import{V as pe,a as E}from"./VRow-C_u8820H.js";import{e as fl,V as G,a as Ie,b as ae}from"./VGrid-CBGRWS1y.js";import{V as pl}from"./VAutocomplete-CYtzIYoF.js";import{u as gl,t as Ee,c as je,V as he,b as Ke,e as yl,d as bl,a as Fe}from"./VList-Dg4abNUz.js";import{a as U,b as Vl,V as xl}from"./VChip-BfcyEr4e.js";import{V as ge}from"./VSwitch-D3bnvThN.js";import{u as _l,b as hl,V as me,m as Cl,c as kl,d as wl,e as zl,a as _e}from"./VSelect-BorMXFwi.js";import{V as De}from"./VTextarea-CqCSgYZa.js";import{u as Sl,m as El,h as Rl}from"./filter-BaTOFc6H.js";import{u as Tl}from"./form-PEXhLZdP.js";import{h as Il,p as Dl,ah as Al,q as Ue,w as $l,aj as Fl,r as Pe,G as Ul,u as Pl,a9 as Ml,ak as Ol,al as Me,am as Bl,an as Nl}from"./vendor-ui-Ca7vMALJ.js";import{V as He}from"./VMenu-BCjbZdow.js";import{V as ql}from"./VPagination-B83tja3x.js";import"./auth.service-BozCwdnf.js";import"./vendor-utils-6xD0fNU8.js";import"./token-storage.service-BqAv9k07.js";import"./auth--EmZq-C7.js";import"./dialog-transition-B8nu4acL.js";import"./ssrBoot-DJyMk-ri.js";import"./autofocus-Cv2p5X6o.js";const Ll=Dl({alwaysFilter:Boolean,autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...El({filterKeys:["title"]}),...Cl({hideNoData:!0,returnObject:!0}),...Ml(kl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"])},"VCombobox"),jl=Il()({name:"VCombobox",props:Ll(),emits:{"update:focused":s=>!0,"update:modelValue":s=>!0,"update:search":s=>!0,"update:menu":s=>!0},setup(s,ve){let{emit:D,slots:C}=ve;const{t:de}=Al(),T=k(),A=Ve(!1),I=Ve(!0),L=Ve(!1),j=k(),M=k(),f=Ve(-1);let Q=!1;const{items:_,transformIn:h,transformOut:d}=gl(s),{textColorClasses:p,textColorStyles:Ce}=nl(()=>T.value?.color),b=Ue(s,"modelValue",[],i=>h($l(i)),i=>{const R=d(i);return s.multiple?R:R[0]??null}),ce=Tl(s),ee=X(()=>!!(s.chips||C.chip)),W=X(()=>ee.value||!!C.selection),O=Ve(!s.multiple&&!W.value?b.value[0]?.title??"":""),le=Ve(null),z=X({get:()=>O.value,set:async i=>{if(O.value=i??"",i===null||i===""&&!s.multiple&&!W.value?b.value=[]:!s.multiple&&!W.value&&(b.value=[Ee(s,i)],Se(()=>M.value?.scrollToIndex(0))),i&&s.multiple&&s.delimiters?.length){const R=s.delimiters.map(Fl).join("|"),N=i.split(new RegExp(`(?:${R})+`));if(N.length>1){for(let m of N)m=m.trim(),m&&(te(Ee(s,m)),await Se());O.value=""}}i||(f.value=-1),I.value=!i}}),fe=X(()=>typeof s.counterValue=="function"?s.counterValue(b.value):typeof s.counterValue=="number"?s.counterValue:s.multiple?b.value.length:z.value.length),{filteredItems:P,getMatches:K}=Sl(s,_,()=>le.value??(s.alwaysFilter||!I.value?z.value:"")),B=X(()=>s.hideSelected&&le.value===null?P.value.filter(i=>!b.value.some(R=>R.value===i.value)):P.value),oe=X(()=>s.hideNoData&&!B.value.length||ce.isReadonly.value||ce.isDisabled.value),se=Ue(s,"menu"),S=X({get:()=>se.value,set:i=>{se.value&&!i&&j.value?.ΨopenChildren.size||i&&oe.value||(se.value=i)}}),{menuId:be,ariaExpanded:c,ariaControls:o,ariaLabel:u}=_l(s,S);re(O,i=>{Q?Se(()=>Q=!1):A.value&&!S.value&&(S.value=!0),D("update:search",i)}),re(b,i=>{!s.multiple&&!W.value&&(O.value=i[0]?.title??"")});const J=X(()=>b.value.map(i=>i.value)),H=X(()=>(s.autoSelectFirst===!0||s.autoSelectFirst==="exact"&&z.value===B.value[0]?.title)&&B.value.length>0&&!I.value&&!L.value),ke=k(),Re=hl(ke,T);function g(i){Q=!0,Se(()=>Q=!1),s.openOnClear&&(S.value=!0)}function t(){oe.value||(S.value=!0)}function n(i){oe.value||(A.value&&(i.preventDefault(),i.stopPropagation()),S.value=!S.value)}function ie(i){(Me(i)||i.key==="Backspace")&&T.value?.focus()}function Ge(i){if(Ol(i)||ce.isReadonly.value)return;const R=T.value?.selectionStart,N=b.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(i.key)&&i.preventDefault(),["Enter","ArrowDown"].includes(i.key)&&(S.value=!0),["Escape"].includes(i.key)&&(S.value=!1),H.value&&["Enter","Tab"].includes(i.key)&&!b.value.some(m=>{let{value:x}=m;return x===B.value[0].value})&&te(P.value[0]),i.key==="ArrowDown"&&H.value&&ke.value?.focus("next"),i.key==="Enter"&&z.value&&(te(Ee(s,z.value),!0,!0),W.value&&(O.value="")),["Backspace","Delete"].includes(i.key)){if(!s.multiple&&W.value&&b.value.length>0&&!z.value)return te(b.value[0],!1);if(~f.value){i.preventDefault();const m=f.value;te(b.value[f.value],!1),f.value=m>=N-1?N-2:m}else i.key==="Backspace"&&!z.value&&(f.value=N-1);return}if(s.multiple)if(i.key==="ArrowLeft"){if(f.value<0&&R&&R>0)return;const m=f.value>-1?f.value-1:N-1;b.value[m]?f.value=m:(f.value=-1,T.value?.setSelectionRange(z.value.length,z.value.length))}else if(i.key==="ArrowRight"){if(f.value<0)return;const m=f.value+1;b.value[m]?f.value=m:(f.value=-1,T.value?.setSelectionRange(0,0))}else~f.value&&Me(i)&&(f.value=-1)}function Qe(){s.eager&&M.value?.calculateVisibleItems()}function We(){A.value&&T.value?.focus(),I.value=!0,le.value=null}function te(i){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!(!i||i.props.disabled))if(s.multiple){const m=b.value.findIndex($=>(s.valueComparator||Pe)($.value,i.value)),x=R??!~m;if(~m){const $=x?[...b.value,i]:[...b.value];$.splice(m,1),b.value=$}else x&&(b.value=[...b.value,i]);s.clearOnSelect&&(z.value="")}else{const m=R!==!1;b.value=m?[i]:[],(!I.value||s.alwaysFilter)&&O.value&&(le.value=O.value),O.value=m&&!W.value?i.title:"",Se(()=>{S.value=N,I.value=!0})}}function Ye(i){A.value=!0,setTimeout(()=>{L.value=!0})}function Ze(i){L.value=!1}return re(A,(i,R)=>{if(!(i||i===R)&&(f.value=-1,S.value=!1,z.value)){if(s.multiple){te(Ee(s,z.value));return}if(!W.value)return;b.value.some(N=>{let{title:m}=N;return m===z.value})?O.value="":te(Ee(s,z.value))}}),re(S,i=>{if(!s.hideSelected&&i&&b.value.length&&I.value){const R=B.value.findIndex(N=>b.value.some(m=>(s.valueComparator||Pe)(m.value,N.value)));Ul&&window.requestAnimationFrame(()=>{R>=0&&M.value?.scrollToIndex(R)})}i&&(le.value=null)}),re(_,(i,R)=>{S.value||A.value&&!R.length&&i.length&&(S.value=!0)}),Pl(()=>{const i=!!(!s.hideNoData||B.value.length||C["prepend-item"]||C["append-item"]||C["no-data"]),R=b.value.length>0,N=me.filterProps(s);return e(me,ne({ref:T},N,{modelValue:z.value,"onUpdate:modelValue":m=>z.value=m,focused:A.value,"onUpdate:focused":m=>A.value=m,validationValue:b.externalValue,counterValue:fe.value,dirty:R,class:["v-combobox",{"v-combobox--active-menu":S.value,"v-combobox--chips":!!s.chips,"v-combobox--selection-slot":!!W.value,"v-combobox--selecting-index":f.value>-1,[`v-combobox--${s.multiple?"multiple":"single"}`]:!0},s.class],style:s.style,readonly:ce.isReadonly.value,placeholder:R?void 0:s.placeholder,"onClick:clear":g,"onMousedown:control":t,onKeydown:Ge,"aria-expanded":c.value,"aria-controls":o.value}),{...C,default:()=>a(ye,null,[e(He,ne({id:be.value,ref:j,modelValue:S.value,"onUpdate:modelValue":m=>S.value=m,activator:"parent",contentClass:"v-combobox__content",disabled:oe.value,eager:s.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:Qe,onAfterLeave:We},s.menuProps),{default:()=>[i&&e(je,ne({ref:ke,filterable:!0,selected:J.value,selectStrategy:s.multiple?"independent":"single-independent",onMousedown:m=>m.preventDefault(),selectable:!0,onKeydown:ie,onFocusin:Ye,onFocusout:Ze,tabindex:"-1","aria-live":"polite",color:s.itemColor??s.color},Re,s.listProps),{default:()=>[C["prepend-item"]?.(),!B.value.length&&!s.hideNoData&&(C["no-data"]?.()??e(he,{key:"no-data",title:de(s.noDataText)},null)),e(wl,{ref:M,renderless:!0,items:B.value,itemKey:"value"},{default:m=>{let{item:x,index:$,itemRef:Te}=m;const we=ne(x.props,{ref:Te,key:x.value,active:H.value&&$===0?!0:void 0,onClick:()=>te(x,null)});return x.type==="divider"?C.divider?.({props:x.raw,index:$})??e(Ke,ne(x.props,{key:`divider-${$}`}),null):x.type==="subheader"?C.subheader?.({props:x.raw,index:$})??e(yl,ne(x.props,{key:`subheader-${$}`}),null):C.item?.({item:x,index:$,props:we})??e(he,ne(we,{role:"option"}),{prepend:ze=>{let{isSelected:Y}=ze;return a(ye,null,[s.multiple&&!s.hideSelected?e(zl,{key:x.value,modelValue:Y,ripple:!1,tabindex:"-1",onClick:Je=>Je.preventDefault()},null):void 0,x.props.prependAvatar&&e(fl,{image:x.props.prependAvatar},null),x.props.prependIcon&&e(V,{icon:x.props.prependIcon},null)])},title:()=>I.value?x.title:Rl("v-combobox",x.title,K(x)?.title)})}}),C["append-item"]?.()]})]}),b.value.map((m,x)=>{function $(Y){Y.stopPropagation(),Y.preventDefault(),te(m,!1)}const Te={"onClick:close":$,onKeydown(Y){Y.key!=="Enter"&&Y.key!==" "||(Y.preventDefault(),Y.stopPropagation(),$(Y))},onMousedown(Y){Y.preventDefault(),Y.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},we=ee.value?!!C.chip:!!C.selection,ze=we?Nl(ee.value?C.chip({item:m,index:x,props:Te}):C.selection({item:m,index:x})):void 0;if(!(we&&!ze))return a("div",{key:m.value,class:Oe(["v-combobox__selection",x===f.value&&["v-combobox__selection--selected",p.value]]),style:Xe(x===f.value?Ce.value:{})},[ee.value?C.chip?e(ul,{key:"chip-defaults",defaults:{VChip:{closable:s.closableChips,size:"small",text:m.title}}},{default:()=>[ze]}):e(U,ne({key:"chip",closable:s.closableChips,size:"small",text:m.title,disabled:m.props.disabled},Te),null):ze??a("span",{class:"v-combobox__selection-text"},[m.title,s.multiple&&x<b.value.length-1&&a("span",{class:"v-combobox__selection-comma"},[r(",")])])])})]),"append-inner":function(){for(var m=arguments.length,x=new Array(m),$=0;$<m;$++)x[$]=arguments[$];return a(ye,null,[C["append-inner"]?.(...x),(!s.hideNoData||s.items.length)&&s.menuIcon?e(V,{class:"v-combobox__menu-icon",color:T.value?.fieldIconColor,icon:s.menuIcon,onMousedown:n,onClick:Bl,"aria-label":u.value,title:u.value,tabindex:"-1"},null):void 0])}})}),rl({isFocused:A,isPristine:I,menu:S,search:z,selectionIndex:f,filteredItems:P,select:te},T)}}),Kl={class:"dialog-header"},Hl={class:"dialog-header-content"},Gl={class:"dialog-icon-wrapper"},Ql={class:"dialog-title-section"},Wl={class:"dialog-title"},Yl={class:"dialog-subtitle"},Zl={class:"dialog-content"},Jl={key:0,class:"text-center py-8"},Xl={key:1,class:"text-center py-8"},et={class:"text-body-2 text-grey-darken-1 mb-4"},lt={class:"text-h6 mb-2"},tt={class:"text-body-2 mb-3"},at={class:"d-flex align-center mb-2"},ot={key:0},st={class:"text-body-2"},it={class:"d-flex align-center justify-space-between mb-3"},nt={class:"d-flex align-center"},rt={class:"text-body-2 text-grey"},ut={class:"d-flex align-center gap-2"},dt={class:"text-center"},ct={key:0},mt={class:"mb-3"},vt={class:"text-body-2"},ft={class:"mb-3"},pt={class:"mb-3"},gt={class:"text-body-2"},yt={class:"mb-3"},bt={class:"text-body-2"},Vt={key:0,class:"mb-3"},xt={class:"text-body-2"},_t={key:1,class:"mb-3"},ht={class:"text-body-2"},Ct={key:2,class:"mb-3"},kt={class:"text-body-2"},wt={key:3,class:"mb-3"},zt={class:"text-body-2"},St={key:4,class:"mb-3"},Et={class:"mt-1"},Rt={key:1,class:"text-body-2 text-grey"},Tt={class:"dialog-footer"},It={class:"dialog-actions"},Dt=Be({__name:"RuleFormDialog",props:{modelValue:{type:Boolean},ruleId:{default:null},organizationId:{}},emits:["update:modelValue","saved"],setup(s,{emit:ve}){const D=s,C=ve,de=k(),T=k(!1),A=k(!1),I=k(!1),L=k(!1),j=k(null),M=k([]),f=k(null),Q=dl(),_=X(()=>!!D.ruleId),h=X(()=>_.value&&f.value?.ruleTemplate?f.value.ruleTemplate:M.value.find(c=>c.id===d.ruleTemplateId)),d=Ne({ruleTemplateId:"",isEnabled:!0,status:"inherited",customSeverity:void 0,customMessage:"",customConfiguration:{},organizationSpecificExamples:[],tags:[],notes:"",category:"",priority:0,enforcementRules:{autoFix:!1,skipOnDraft:!1,warningOnly:!1,blockOnViolation:!0}}),p=[{title:"Baixa",value:"low"},{title:"Média",value:"medium"},{title:"Alta",value:"high"},{title:"Crítica",value:"critical"}],Ce=[{title:"Habilitado",value:"enabled"},{title:"Desabilitado",value:"disabled"},{title:"Herdado",value:"inherited"}],b=[c=>!!c||"Template da regra é obrigatório"],ce=[c=>!!c||"Status é obrigatório"],ee=[c=>c>=0||"Prioridade deve ser maior ou igual a 0",c=>c<=100||"Prioridade deve ser menor ou igual a 100"],W=async()=>{if(!_.value){L.value=!0;try{const c=await ue.getEffectiveRules(D.organizationId);M.value=c.map(o=>o.ruleTemplate)}catch(c){console.error("Erro ao carregar templates:",c)}finally{L.value=!1}}},O=async()=>{if(D.ruleId){I.value=!0,j.value=null;try{const c=await ue.getRuleConfig(D.organizationId,D.ruleId);f.value=c,le(c)}catch(c){j.value=c instanceof Error?c.message:"Erro ao carregar configuração"}finally{I.value=!1}}},le=c=>{d.isEnabled=c.isEnabled,d.status=c.status||"inherited",d.customSeverity=c.customSeverity,d.customMessage=c.customMessage||"",d.customConfiguration=c.customConfiguration||{},d.organizationSpecificExamples=c.organizationSpecificExamples||[],d.tags=c.tags||[],d.notes=c.notes||"",d.category=c.category||"",d.priority=c.priority||0,d.enforcementRules=c.enforcementRules||{autoFix:!1,skipOnDraft:!1,warningOnly:!1,blockOnViolation:!0}},z=()=>{Object.assign(d,{ruleTemplateId:"",isEnabled:!0,status:"inherited",customSeverity:void 0,customMessage:"",customConfiguration:{},organizationSpecificExamples:[],tags:[],notes:"",category:"",priority:0,enforcementRules:{autoFix:!1,skipOnDraft:!1,warningOnly:!1,blockOnViolation:!0}}),de.value?.resetValidation(),T.value=!1},fe=()=>{h.value&&(d.customSeverity=void 0,d.category=h.value.category)},P=()=>{d.organizationSpecificExamples||(d.organizationSpecificExamples=[]),d.organizationSpecificExamples.push({context:"",snippet:"",isCorrect:!0,description:""})},K=c=>{d.organizationSpecificExamples&&d.organizationSpecificExamples.splice(c,1)},B=async()=>{if(de.value?.validate()){A.value=!0;try{const c={...d,organizationSpecificExamples:d.organizationSpecificExamples?.filter(o=>o.snippet.trim())||[]};_.value&&D.ruleId?await ue.updateRuleConfig(D.organizationId,D.ruleId,c):await ue.createRuleConfig(D.organizationId,c),C("saved"),Q.success(_.value?"Configuração de regra atualizada com sucesso!":"Configuração de regra criada com sucesso!","Sucesso!",4e3)}catch(c){console.error("Erro ao salvar configuração:",c);let o="Erro desconhecido ao salvar configuração";if(c?.response?.data){const u=c.response.data;u.message&&Array.isArray(u.message)?o=u.message.join(", "):u.message&&typeof u.message=="string"?o=u.message:u.error&&(o=u.error)}else c instanceof Error&&(o=c.message);Q.error(o,"Erro ao salvar configuração",6e3)}finally{A.value=!1}}},oe=()=>{z(),C("update:modelValue",!1)},se=c=>{switch(c){case"low":return"success";case"medium":return"warning";case"high":return"orange";case"critical":return"error";default:return"grey"}},S=c=>{switch(c){case"low":return"Baixa";case"medium":return"Média";case"high":return"Alta";case"critical":return"Crítica";default:return"N/A"}},be=c=>new Date(c).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return re(()=>D.modelValue,c=>{c?_.value?O():(z(),W()):(j.value=null,f.value=null,z())}),re(()=>D.ruleId,()=>{z(),j.value=null,f.value=null}),(c,o)=>(y(),Z(ml,{"model-value":s.modelValue,"onUpdate:modelValue":o[14]||(o[14]=u=>c.$emit("update:modelValue",u)),"max-width":"1200px",persistent:"",transition:"dialog-bottom-transition",class:"modern-dialog"},{default:l(()=>[e(G,{elevation:"24",class:"dialog-card"},{default:l(()=>[a("div",Kl,[a("div",Hl,[a("div",Gl,[e(V,{icon:_.value?"mdi-cog-outline":"mdi-cog",size:"28",class:"dialog-icon"},null,8,["icon"])]),a("div",Ql,[a("h2",Wl,v(_.value?"Editar Configuração de Regra":"Nova Configuração de Regra"),1),a("p",Yl,v(_.value?"Modifique as configurações da regra":"Configure uma nova regra de análise para sua organização"),1)])]),e(q,{icon:"mdi-close",variant:"text",size:"40",class:"dialog-close-btn",onClick:oe})]),a("div",Zl,[_.value&&I.value?(y(),w("div",Jl,[e(qe,{indeterminate:"",color:"primary",size:"64"}),o[15]||(o[15]=a("div",{class:"mt-4 text-body-1"},"Carregando configuração...",-1))])):j.value?(y(),w("div",Xl,[e(V,{size:"64",color:"error",class:"mb-4"},{default:l(()=>[...o[16]||(o[16]=[r("mdi-alert-circle",-1)])]),_:1}),o[18]||(o[18]=a("div",{class:"text-h6 mb-2"},"Erro ao carregar configuração",-1)),a("div",et,v(j.value),1),_.value?(y(),Z(q,{key:0,color:"primary",onClick:O},{default:l(()=>[...o[17]||(o[17]=[r("Tentar Novamente",-1)])]),_:1})):F("",!0)])):(y(),Z(vl,{key:2,ref_key:"formRef",ref:de,modelValue:T.value,"onUpdate:modelValue":o[13]||(o[13]=u=>T.value=u),onSubmit:el(B,["prevent"])},{default:l(()=>[e(pe,null,{default:l(()=>[e(E,{cols:"12",md:"8"},{default:l(()=>[e(G,{variant:"outlined"},{default:l(()=>[e(Ie,null,{default:l(()=>[e(V,{class:"mr-2"},{default:l(()=>[...o[19]||(o[19]=[r("mdi-cog",-1)])]),_:1}),o[20]||(o[20]=r(" Configuração da Regra ",-1))]),_:1}),e(ae,null,{default:l(()=>[_.value?F("",!0):(y(),Z(pl,{key:0,modelValue:d.ruleTemplateId,"onUpdate:modelValue":[o[0]||(o[0]=u=>d.ruleTemplateId=u),fe],items:M.value,loading:L.value,label:"Template da Regra *","item-title":"title","item-value":"id",variant:"outlined",rules:b,required:"",class:"mb-4","no-data-text":"Nenhum template encontrado"},{item:l(({props:u,item:J})=>[e(he,ll(tl(u)),{prepend:l(()=>[e(U,{color:se(J.raw.severity),size:"small",class:"mr-2"},{default:l(()=>[r(v(S(J.raw.severity)),1)]),_:2},1032,["color"])]),default:l(()=>[e(bl,null,{default:l(()=>[r(v(J.raw.category),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items","loading"])),h.value?(y(),Z(G,{key:1,variant:"outlined",class:"mb-4"},{default:l(()=>[e(ae,null,{default:l(()=>[a("h4",lt,v(h.value.title),1),a("p",tt,v(h.value.rule),1),a("div",at,[e(U,{color:se(h.value.severity),size:"small",class:"mr-2"},{default:l(()=>[r(v(S(h.value.severity)),1)]),_:1},8,["color"]),e(U,{size:"small",variant:"outlined",class:"mr-2"},{default:l(()=>[r(v(h.value.language),1)]),_:1}),e(U,{size:"small",variant:"outlined"},{default:l(()=>[r(v(h.value.category),1)]),_:1})]),h.value.whyIsThisImportant?(y(),w("div",ot,[o[21]||(o[21]=a("strong",null,"Por que é importante:",-1)),a("p",st,v(h.value.whyIsThisImportant),1)])):F("",!0)]),_:1})]),_:1})):F("",!0),e(pe,null,{default:l(()=>[e(E,{cols:"12",md:"4"},{default:l(()=>[e(ge,{modelValue:d.isEnabled,"onUpdate:modelValue":o[1]||(o[1]=u=>d.isEnabled=u),label:"Regra ativada",color:"primary","hide-details":""},null,8,["modelValue"]),o[22]||(o[22]=a("div",{class:"text-caption text-grey mt-1"}," Define se a regra será aplicada durante as análises ",-1))]),_:1}),e(E,{cols:"12",md:"4"},{default:l(()=>[e(_e,{modelValue:d.status,"onUpdate:modelValue":o[2]||(o[2]=u=>d.status=u),items:Ce,label:"Status da Regra *",variant:"outlined","item-title":"title","item-value":"value",rules:ce,required:"",hint:"Define o status de aplicação da regra","no-data-text":"Nenhum status disponível","persistent-hint":""},null,8,["modelValue"])]),_:1}),e(E,{cols:"12",md:"4"},{default:l(()=>[e(me,{modelValue:d.priority,"onUpdate:modelValue":o[3]||(o[3]=u=>d.priority=u),modelModifiers:{number:!0},label:"Prioridade",type:"number",variant:"outlined",rules:ee,min:"0",max:"100",hint:"Valor entre 0 e 100 (maior = mais prioritária)","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1}),e(pe,{class:"mb-2"},{default:l(()=>[e(E,{cols:"12",md:"6"},{default:l(()=>[e(_e,{modelValue:d.customSeverity,"onUpdate:modelValue":o[4]||(o[4]=u=>d.customSeverity=u),items:p,label:"Severidade personalizada",variant:"outlined","item-title":"title","item-value":"value",clearable:"",hint:"Substitui a severidade padrão do template","no-data-text":"Nenhuma severidade disponível","persistent-hint":""},null,8,["modelValue"])]),_:1}),e(E,{cols:"12",md:"6"},{default:l(()=>[e(me,{modelValue:d.category,"onUpdate:modelValue":o[5]||(o[5]=u=>d.category=u),label:"Categoria personalizada",variant:"outlined",placeholder:"Ex: security-custom, performance-critical",hint:"Substitui a categoria padrão do template","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1}),e(De,{modelValue:d.customMessage,"onUpdate:modelValue":o[6]||(o[6]=u=>d.customMessage=u),label:"Mensagem personalizada",variant:"outlined",rows:"3",placeholder:"Mensagem que será exibida quando a regra for violada"},null,8,["modelValue"]),e(jl,{modelValue:d.tags,"onUpdate:modelValue":o[7]||(o[7]=u=>d.tags=u),label:"Tags",variant:"outlined",multiple:"",chips:"","closable-chips":"",placeholder:"Adicione tags para organizar a regra"},null,8,["modelValue"]),e(De,{modelValue:d.notes,"onUpdate:modelValue":o[8]||(o[8]=u=>d.notes=u),label:"Observações",variant:"outlined",rows:"3",placeholder:"Notas internas sobre esta configuração"},null,8,["modelValue"])]),_:1})]),_:1}),e(G,{variant:"outlined",class:"mt-4"},{default:l(()=>[e(Ie,null,{default:l(()=>[e(V,{class:"mr-2"},{default:l(()=>[...o[23]||(o[23]=[r("mdi-gavel",-1)])]),_:1}),o[24]||(o[24]=r(" Regras de Aplicação ",-1))]),_:1}),e(ae,null,{default:l(()=>[e(pe,null,{default:l(()=>[e(E,{cols:"12",md:"6"},{default:l(()=>[e(ge,{modelValue:d.enforcementRules.autoFix,"onUpdate:modelValue":o[9]||(o[9]=u=>d.enforcementRules.autoFix=u),label:"Correção automática",color:"primary","hide-details":""},null,8,["modelValue"]),o[25]||(o[25]=a("div",{class:"text-caption text-grey mt-1"}," Tentar corrigir automaticamente quando possível ",-1))]),_:1}),e(E,{cols:"12",md:"6"},{default:l(()=>[e(ge,{modelValue:d.enforcementRules.skipOnDraft,"onUpdate:modelValue":o[10]||(o[10]=u=>d.enforcementRules.skipOnDraft=u),label:"Pular em rascunhos",color:"primary","hide-details":""},null,8,["modelValue"]),o[26]||(o[26]=a("div",{class:"text-caption text-grey mt-1"}," Não aplicar em pull requests em rascunho ",-1))]),_:1}),e(E,{cols:"12",md:"6"},{default:l(()=>[e(ge,{modelValue:d.enforcementRules.warningOnly,"onUpdate:modelValue":o[11]||(o[11]=u=>d.enforcementRules.warningOnly=u),label:"Apenas aviso",color:"primary","hide-details":""},null,8,["modelValue"]),o[27]||(o[27]=a("div",{class:"text-caption text-grey mt-1"}," Mostrar como aviso, não como erro ",-1))]),_:1}),e(E,{cols:"12",md:"6"},{default:l(()=>[e(ge,{modelValue:d.enforcementRules.blockOnViolation,"onUpdate:modelValue":o[12]||(o[12]=u=>d.enforcementRules.blockOnViolation=u),label:"Bloquear em violação",color:"primary","hide-details":""},null,8,["modelValue"]),o[28]||(o[28]=a("div",{class:"text-caption text-grey mt-1"}," Impedir merge quando a regra for violada ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),e(G,{variant:"outlined",class:"mt-4"},{default:l(()=>[e(Ie,null,{default:l(()=>[e(V,{class:"mr-2"},{default:l(()=>[...o[29]||(o[29]=[r("mdi-code-braces",-1)])]),_:1}),o[30]||(o[30]=r(" Exemplos Específicos da Organização ",-1))]),_:1}),e(ae,null,{default:l(()=>[(y(!0),w(ye,null,Ae(d.organizationSpecificExamples,(u,J)=>(y(),w("div",{key:J,class:"mb-6"},[e(G,{variant:"outlined",class:"pa-4"},{default:l(()=>[a("div",it,[a("div",nt,[e(U,{color:u.isCorrect?"success":"error","prepend-icon":u.isCorrect?"mdi-check-circle":"mdi-close-circle",size:"small",class:"mr-3"},{default:l(()=>[r(v(u.isCorrect?"Exemplo Correto":"Exemplo Incorreto"),1)]),_:2},1032,["color","prepend-icon"]),a("span",rt,"Exemplo "+v(J+1),1)]),a("div",ut,[e(cl,{modelValue:u.isCorrect,"onUpdate:modelValue":H=>u.isCorrect=H,color:"primary",density:"compact",mandatory:""},{default:l(()=>[e(q,{value:!0,size:"small",color:u.isCorrect?"success":"grey-lighten-1"},{default:l(()=>[e(V,{size:"16"},{default:l(()=>[...o[31]||(o[31]=[r("mdi-check",-1)])]),_:1}),o[32]||(o[32]=a("span",{class:"ml-1"},"Correto",-1))]),_:1},8,["color"]),e(q,{value:!1,size:"small",color:u.isCorrect?"grey-lighten-1":"error"},{default:l(()=>[e(V,{size:"16"},{default:l(()=>[...o[33]||(o[33]=[r("mdi-close",-1)])]),_:1}),o[34]||(o[34]=a("span",{class:"ml-1"},"Incorreto",-1))]),_:1},8,["color"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(q,{icon:"mdi-delete-outline",size:"small",color:"error",variant:"text",onClick:H=>K(J),title:`Remover exemplo ${J+1}`},null,8,["onClick","title"])])]),e(pe,null,{default:l(()=>[e(E,{cols:"12",md:"4"},{default:l(()=>[e(me,{modelValue:u.context,"onUpdate:modelValue":H=>u.context=H,label:"Contexto",variant:"outlined",density:"compact",placeholder:"Ex: Método de validação, Loop de array..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(E,{cols:"12",md:"8"},{default:l(()=>[e(De,{modelValue:u.snippet,"onUpdate:modelValue":H=>u.snippet=H,label:"Código de exemplo",variant:"outlined",rows:"3",density:"compact",placeholder:"Cole aqui o código de exemplo..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(De,{modelValue:u.description,"onUpdate:modelValue":H=>u.description=H,label:"Descrição e justificativa",variant:"outlined",rows:"2",density:"compact",placeholder:u.isCorrect?"Explique por que este é um bom exemplo e deve ser seguido...":"Explique o problema com este código e como deveria ser corrigido..."},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)]))),128)),a("div",dt,[e(q,{"prepend-icon":"mdi-plus-circle-outline",variant:"outlined",color:"primary",onClick:P,class:"px-6"},{default:l(()=>[...o[35]||(o[35]=[r(" Adicionar Novo Exemplo ",-1)])]),_:1}),o[36]||(o[36]=a("div",{class:"text-caption text-grey mt-2"}," Adicione exemplos práticos para orientar sua equipe sobre esta regra ",-1))])]),_:1})]),_:1})]),_:1}),e(E,{cols:"12",md:"4",class:"sidebar-column"},{default:l(()=>[e(G,{variant:"outlined",class:"sticky-card"},{default:l(()=>[e(Ie,null,{default:l(()=>[e(V,{class:"mr-2"},{default:l(()=>[...o[37]||(o[37]=[r("mdi-information",-1)])]),_:1}),o[38]||(o[38]=r(" Informações ",-1))]),_:1}),e(ae,null,{default:l(()=>[h.value?(y(),w("div",ct,[a("div",mt,[o[39]||(o[39]=a("strong",null,"Template:",-1)),a("div",vt,v(h.value.title),1)]),a("div",ft,[o[40]||(o[40]=a("strong",null,"Severidade padrão:",-1)),e(U,{color:se(h.value.severity),size:"small"},{default:l(()=>[r(v(S(h.value.severity)),1)]),_:1},8,["color"])]),a("div",pt,[o[41]||(o[41]=a("strong",null,"Linguagem:",-1)),a("div",gt,v(h.value.language),1)]),a("div",yt,[o[42]||(o[42]=a("strong",null,"Escopo:",-1)),a("div",bt,v(h.value.scope),1)]),_.value&&f.value?(y(),w("div",Vt,[o[43]||(o[43]=a("strong",null,"Criada em:",-1)),a("div",xt,v(be(f.value.createdAt)),1)])):F("",!0),_.value&&f.value?(y(),w("div",_t,[o[44]||(o[44]=a("strong",null,"Última atualização:",-1)),a("div",ht,v(be(f.value.updatedAt)),1)])):F("",!0),_.value&&f.value&&f.value.createdBy?(y(),w("div",Ct,[o[45]||(o[45]=a("strong",null,"Criado por:",-1)),a("div",kt,v(f.value.createdBy),1)])):F("",!0),_.value&&f.value&&f.value.updatedBy?(y(),w("div",wt,[o[46]||(o[46]=a("strong",null,"Atualizado por:",-1)),a("div",zt,v(f.value.updatedBy),1)])):F("",!0),h.value.tags&&h.value.tags.length?(y(),w("div",St,[o[47]||(o[47]=a("strong",null,"Tags do template:",-1)),a("div",Et,[(y(!0),w(ye,null,Ae(h.value.tags,u=>(y(),Z(U,{key:u,size:"small",variant:"outlined",class:"mr-1 mb-1"},{default:l(()=>[r(v(u),1)]),_:2},1024))),128))])])):F("",!0)])):(y(),w("div",Rt,v(_.value?"Carregando informações...":"Selecione um template para ver as informações"),1))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))]),a("div",Tt,[a("div",It,[e(q,{variant:"outlined",size:"large",class:"action-btn cancel-btn",disabled:A.value,onClick:oe},{default:l(()=>[...o[48]||(o[48]=[r(" Cancelar ",-1)])]),_:1},8,["disabled"]),e(q,{color:"success",variant:"elevated",size:"large",class:"action-btn primary-btn",loading:A.value,disabled:!T.value||_.value&&I.value,onClick:B},{default:l(()=>[e(V,{start:""},{default:l(()=>[r(v(_.value?"mdi-content-save":"mdi-cog"),1)]),_:1}),r(" "+v(_.value?"Salvar Alterações":"Criar Configuração"),1)]),_:1},8,["loading","disabled"])])])]),_:1})]),_:1},8,["model-value"]))}}),At=Le(Dt,[["__scopeId","data-v-a54ecf85"]]),$t={class:"rules-page pa-6"},Ft={class:"d-flex align-center justify-space-between mb-6"},Ut={class:"d-flex align-center gap-3"},Pt={class:"d-flex align-center"},Mt={class:"text-h5 font-weight-bold"},Ot={class:"d-flex align-center"},Bt={class:"text-h5 font-weight-bold"},Nt={class:"d-flex align-center"},qt={class:"text-h5 font-weight-bold"},Lt={class:"d-flex align-center"},jt={class:"text-h5 font-weight-bold"},Kt={class:"px-4 py-3 d-flex align-center justify-space-between border-b"},Ht={class:"d-flex align-center gap-3"},Gt={class:"d-flex align-center"},Qt={class:"px-4 py-4 advanced-filters-section"},Wt={class:"d-flex align-center gap-3"},Yt={class:"d-flex align-center gap-2"},Zt={class:"d-flex align-center justify-end gap-2"},Jt={key:0,class:"text-center py-8"},Xt={key:1,class:"text-center py-8"},ea={class:"text-body-2 text-medium-emphasis mb-4"},la={key:2},ta={class:"rule-header-content"},aa={class:"rule-icon-container"},oa={class:"rule-title-section"},sa={class:"rule-title"},ia={class:"rule-status-badges"},na={class:"rule-actions"},ra={class:"rule-description-section mb-4"},ua={class:"rule-description"},da={key:0,class:"custom-message-section mb-4"},ca={class:"custom-message-header"},ma={class:"custom-message-content"},va={key:1,class:"tags-section mb-4"},fa={class:"tags-header"},pa={class:"tags-list"},ga={class:"rule-footer"},ya={class:"rule-metadata"},ba={class:"metadata-item"},Va={class:"metadata-value"},xa={class:"metadata-item"},_a={class:"metadata-value"},ha={key:0,class:"customization-badge"},Ca={key:0,class:"text-center py-8"},ka={class:"text-body-2 text-grey-darken-1"},wa={key:0},za={key:1},Sa={key:3,class:"d-flex justify-center mt-6"},xe="b1e58ac3-6a88-4fc3-846d-352c8ca4a1db",Ea=Be({__name:"RulesView",setup(s){const{isDemoUser:ve}=il(),D=k({data:[],total:0,page:1,limit:10,totalPages:0}),C=k(null),de=k([]),T=k(!1),A=k(null),I=k(1),L=k(!1),j=k(null),M=k(!1),f=k(null),Q=k(""),_=k(""),h=k(""),d=k(void 0),p=Ne({search:"",status:void 0,severity:void 0,category:void 0,isEnabled:void 0,page:1,limit:10}),Ce=[{title:"Ativada",value:"enabled"},{title:"Desativada",value:"disabled"}],b=[{title:"Baixa",value:"low"},{title:"Média",value:"medium"},{title:"Alta",value:"high"},{title:"Crítica",value:"critical"}],ce=[{title:"Baixa",value:"low"},{title:"Média",value:"medium"},{title:"Alta",value:"high"},{title:"Crítica",value:"critical"}],ee=X(()=>{let g=0;return p.search&&g++,p.status&&g++,p.severity&&g++,p.category&&g++,p.isEnabled!==void 0&&g++,Q.value&&g++,_.value&&g++,h.value&&g++,d.value!==void 0&&g++,g}),W=g=>{p.status=void 0,p.severity=void 0,p.category=void 0,p.isEnabled=void 0,Q.value="",_.value="",h.value="",d.value=void 0,g==="critical"?p.severity="critical":g==="enabled"?p.isEnabled=!0:g==="disabled"?p.isEnabled=!1:g==="high-severity"&&(p.severity="high"),P()},O=()=>{p.search="",p.status=void 0,p.severity=void 0,p.category=void 0,p.isEnabled=void 0,f.value=null,Q.value="",_.value="",h.value="",d.value=void 0,oe()};let le=null;const z=()=>{le&&clearTimeout(le),le=setTimeout(()=>{K()},300)};let fe=null;const P=()=>{fe&&clearTimeout(fe),fe=setTimeout(()=>{K()},300)},K=async()=>{T.value=!0,A.value=null;try{const[g,t,n]=await Promise.all([ue.getRuleConfigs(xe,p),ue.getStatistics(xe),ue.getCategories(xe)]);D.value=g,C.value=t,de.value=n}catch(g){A.value=g instanceof Error?g.message:"Erro ao carregar dados"}finally{T.value=!1}},B=()=>{K()},oe=()=>{p.search="",p.status=void 0,p.severity=void 0,p.category=void 0,p.isEnabled=void 0,I.value=1,p.page=1,K()},se=g=>{I.value=g,p.page=g,K()},S=g=>{j.value=g,L.value=!0},be=()=>{L.value=!1,j.value=null,K()};re(L,g=>{g||setTimeout(()=>{j.value=null},100)});const c=async(g,t)=>{try{await ue.updateRuleConfig(xe,g,{isEnabled:t}),K()}catch(n){console.error("Erro ao alterar status da regra:",n)}},o=async g=>{if(confirm("Tem certeza que deseja deletar esta configuração de regra?"))try{await ue.deleteRuleConfig(xe,g),K()}catch(t){console.error("Erro ao deletar regra:",t)}},u=g=>{switch(g){case"low":return"success";case"medium":return"warning";case"high":return"orange";case"critical":return"error";default:return"grey"}},J=g=>{switch(g){case"low":return"Baixa";case"medium":return"Média";case"high":return"Alta";case"critical":return"Crítica";default:return"N/A"}},H=g=>{switch(g){case"low":return"mdi-shield-check";case"medium":return"mdi-shield-alert";case"high":return"mdi-shield-half-full";case"critical":return"mdi-shield-remove";default:return"mdi-shield-outline"}},ke=g=>new Date(g).toLocaleDateString("pt-BR");let Re;return re(p,()=>{clearTimeout(Re),Re=setTimeout(()=>{p.page=1,I.value=1,K()},500)},{deep:!0}),al(()=>{K()}),(g,t)=>(y(),w("div",$t,[a("div",Ft,[t[16]||(t[16]=a("div",null,[a("h1",{class:"text-h4 font-weight-bold text-grey-darken-3 mb-2"}," Regras de Análise "),a("p",{class:"text-body-1 text-grey-darken-1"}," Configure as regras para análise de código da organização ")],-1)),a("div",Ut,[e(q,{color:"primary","prepend-icon":"mdi-refresh",onClick:B,loading:T.value},{default:l(()=>[...t[14]||(t[14]=[r(" Atualizar ",-1)])]),_:1},8,["loading"]),$e(ve)?F("",!0):(y(),Z(q,{key:0,color:"success","prepend-icon":"mdi-plus",variant:"elevated",onClick:t[0]||(t[0]=n=>L.value=!0),class:"ml-2"},{default:l(()=>[...t[15]||(t[15]=[r(" Adicionar Regra ",-1)])]),_:1}))])]),e(pe,{class:"mb-6"},{default:l(()=>[e(E,{cols:"12",sm:"6",md:"3"},{default:l(()=>[e(G,{color:"primary",variant:"tonal"},{default:l(()=>[e(ae,null,{default:l(()=>[a("div",Pt,[e(V,{size:"32",class:"mr-3"},{default:l(()=>[...t[17]||(t[17]=[r("mdi-shield-check",-1)])]),_:1}),a("div",null,[a("div",Mt,v(C.value?.total||0),1),t[18]||(t[18]=a("div",{class:"text-caption"},"Total de Regras",-1))])])]),_:1})]),_:1})]),_:1}),e(E,{cols:"12",sm:"6",md:"3"},{default:l(()=>[e(G,{color:"success",variant:"tonal"},{default:l(()=>[e(ae,null,{default:l(()=>[a("div",Ot,[e(V,{size:"32",class:"mr-3"},{default:l(()=>[...t[19]||(t[19]=[r("mdi-check-circle",-1)])]),_:1}),a("div",null,[a("div",Bt,v(C.value?.enabled||0),1),t[20]||(t[20]=a("div",{class:"text-caption"},"Ativadas",-1))])])]),_:1})]),_:1})]),_:1}),e(E,{cols:"12",sm:"6",md:"3"},{default:l(()=>[e(G,{color:"warning",variant:"tonal"},{default:l(()=>[e(ae,null,{default:l(()=>[a("div",Nt,[e(V,{size:"32",class:"mr-3"},{default:l(()=>[...t[21]||(t[21]=[r("mdi-pause-circle",-1)])]),_:1}),a("div",null,[a("div",qt,v(C.value?.disabled||0),1),t[22]||(t[22]=a("div",{class:"text-caption"},"Desativadas",-1))])])]),_:1})]),_:1})]),_:1}),e(E,{cols:"12",sm:"6",md:"3"},{default:l(()=>[e(G,{color:"error",variant:"tonal"},{default:l(()=>[e(ae,null,{default:l(()=>[a("div",Lt,[e(V,{size:"32",class:"mr-3"},{default:l(()=>[...t[23]||(t[23]=[r("mdi-alert-circle",-1)])]),_:1}),a("div",null,[a("div",jt,v(C.value?.bySeverity?.critical||0),1),t[24]||(t[24]=a("div",{class:"text-caption"},"Críticas",-1))])])]),_:1})]),_:1})]),_:1})]),_:1}),e(G,{class:"mb-6 filter-card"},{default:l(()=>[a("div",Kt,[a("div",Ht,[e(me,{modelValue:p.search,"onUpdate:modelValue":t[1]||(t[1]=n=>p.search=n),label:"Buscar regras...","prepend-inner-icon":"mdi-magnify",variant:"solo",density:"compact","hide-details":"",clearable:"",style:{"min-width":"280px"},onInput:z},null,8,["modelValue"]),ee.value>0?(y(),Z(U,{key:0,size:"small",color:"primary",variant:"tonal",class:"ml-2"},{default:l(()=>[r(v(ee.value)+" filtro"+v(ee.value>1?"s":""),1)]),_:1})):F("",!0)]),a("div",Gt,[e(Vl,{modelValue:f.value,"onUpdate:modelValue":[t[2]||(t[2]=n=>f.value=n),W],variant:"outlined",color:"primary"},{default:l(()=>[e(U,{value:"critical",size:"small"},{default:l(()=>[e(V,{start:""},{default:l(()=>[...t[25]||(t[25]=[r("mdi-alert-octagon",-1)])]),_:1}),t[26]||(t[26]=r(" Críticas ",-1))]),_:1}),e(U,{value:"enabled",size:"small"},{default:l(()=>[e(V,{start:""},{default:l(()=>[...t[27]||(t[27]=[r("mdi-check-circle",-1)])]),_:1}),t[28]||(t[28]=r(" Ativas ",-1))]),_:1}),e(U,{value:"disabled",size:"small"},{default:l(()=>[e(V,{start:""},{default:l(()=>[...t[29]||(t[29]=[r("mdi-pause-circle",-1)])]),_:1}),t[30]||(t[30]=r(" Inativas ",-1))]),_:1}),e(U,{value:"high-severity",size:"small"},{default:l(()=>[e(V,{start:""},{default:l(()=>[...t[31]||(t[31]=[r("mdi-alert-circle",-1)])]),_:1}),t[32]||(t[32]=r(" Alta Sev. ",-1))]),_:1})]),_:1},8,["modelValue"]),e(q,{color:M.value?"primary":"default",variant:M.value?"flat":"outlined",size:"small",onClick:t[3]||(t[3]=n=>M.value=!M.value),class:"ml-1"},{default:l(()=>[e(V,null,{default:l(()=>[r("mdi-filter"+v(M.value?"-check":""),1)]),_:1}),t[33]||(t[33]=r(" Filtros ",-1))]),_:1},8,["color","variant"]),ee.value>0?(y(),Z(q,{key:0,variant:"outlined",size:"small",color:"error",onClick:O,class:"ml-2"},{default:l(()=>[e(V,{start:""},{default:l(()=>[...t[34]||(t[34]=[r("mdi-filter-remove",-1)])]),_:1}),t[35]||(t[35]=r(" Limpar ",-1))]),_:1})):F("",!0)])]),e(xl,null,{default:l(()=>[ol(a("div",Qt,[e(pe,null,{default:l(()=>[e(E,{cols:"12",sm:"6",md:"3"},{default:l(()=>[e(_e,{modelValue:p.status,"onUpdate:modelValue":[t[4]||(t[4]=n=>p.status=n),P],label:"Status",items:Ce,variant:"outlined",density:"compact",clearable:"","item-title":"title","item-value":"value","prepend-inner-icon":"mdi-toggle-switch","no-data-text":"Nenhum status disponível"},null,8,["modelValue"])]),_:1}),e(E,{cols:"12",sm:"6",md:"3"},{default:l(()=>[e(_e,{modelValue:p.severity,"onUpdate:modelValue":[t[5]||(t[5]=n=>p.severity=n),P],label:"Severidade",items:b,variant:"outlined",density:"compact",clearable:"","item-title":"title","item-value":"value","prepend-inner-icon":"mdi-alert-box","no-data-text":"Nenhuma severidade disponível"},null,8,["modelValue"])]),_:1}),e(E,{cols:"12",sm:"6",md:"3"},{default:l(()=>[e(_e,{modelValue:p.category,"onUpdate:modelValue":[t[6]||(t[6]=n=>p.category=n),P],label:"Categoria",items:de.value,variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-tag","no-data-text":"Nenhuma categoria disponível"},null,8,["modelValue","items"])]),_:1}),e(E,{cols:"12",sm:"6",md:"3"},{default:l(()=>[e(_e,{modelValue:Q.value,"onUpdate:modelValue":[t[7]||(t[7]=n=>Q.value=n),P],label:"Prioridade",items:ce,variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-priority-high","no-data-text":"Nenhuma prioridade disponível"},null,8,["modelValue"])]),_:1}),e(E,{cols:"12",md:"4"},{default:l(()=>[a("div",Wt,[e(V,{color:"medium-emphasis"},{default:l(()=>[...t[36]||(t[36]=[r("mdi-calendar-range",-1)])]),_:1}),t[37]||(t[37]=a("div",{class:"text-caption text-medium-emphasis"},"Atualização:",-1)),e(me,{modelValue:_.value,"onUpdate:modelValue":t[8]||(t[8]=n=>_.value=n),type:"date",label:"De",variant:"outlined",density:"compact","hide-details":"",onChange:P},null,8,["modelValue"]),e(me,{modelValue:h.value,"onUpdate:modelValue":t[9]||(t[9]=n=>h.value=n),type:"date",label:"Até",variant:"outlined",density:"compact","hide-details":"",onChange:P},null,8,["modelValue"])])]),_:1}),e(E,{cols:"12",md:"4"},{default:l(()=>[a("div",Yt,[e(ge,{modelValue:p.isEnabled,"onUpdate:modelValue":[t[10]||(t[10]=n=>p.isEnabled=n),P],label:"Apenas ativas",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"]),e(ge,{modelValue:d.value,"onUpdate:modelValue":[t[11]||(t[11]=n=>d.value=n),P],label:"Personalizadas",color:"orange",density:"compact","hide-details":"",class:"ml-2"},null,8,["modelValue"])])]),_:1}),e(E,{cols:"12",md:"4"},{default:l(()=>[a("div",Zt,[e(q,{color:"primary","prepend-icon":"mdi-refresh",onClick:B},{default:l(()=>[...t[38]||(t[38]=[r(" Atualizar ",-1)])]),_:1})])]),_:1})]),_:1})],512),[[sl,M.value]])]),_:1})]),_:1}),T.value?(y(),w("div",Jt,[e(qe,{indeterminate:"",color:"primary",size:"64"}),t[39]||(t[39]=a("div",{class:"mt-4 text-body-1"},"Carregando regras...",-1))])):A.value?(y(),w("div",Xt,[e(V,{size:"64",color:"error",class:"mb-4"},{default:l(()=>[...t[40]||(t[40]=[r("mdi-alert-circle",-1)])]),_:1}),t[42]||(t[42]=a("div",{class:"text-h6 mb-2"},"Erro ao carregar dados",-1)),a("div",ea,v(A.value),1),e(q,{color:"primary",onClick:B},{default:l(()=>[...t[41]||(t[41]=[r("Tentar Novamente",-1)])]),_:1})])):(y(),w("div",la,[(y(!0),w(ye,null,Ae(D.value.data,n=>(y(),Z(G,{key:n.id,class:"rule-card mb-6",elevation:"2"},{default:l(()=>[a("div",{class:Oe(["rule-header",`severity-${n.customSeverity||n.ruleTemplate?.severity||"low"}`])},[a("div",ta,[a("div",aa,[e(V,{icon:H(n.customSeverity||n.ruleTemplate?.severity),size:"24",color:"white"},null,8,["icon"])]),a("div",oa,[a("h3",sa,v(n.ruleTemplate?.title||"Regra sem título"),1),a("div",ia,[e(U,{color:n.isEnabled?"success":"error",size:"small",variant:"elevated",class:"status-chip"},{default:l(()=>[e(V,{icon:n.isEnabled?"mdi-check-circle":"mdi-pause-circle",size:"14",class:"me-1"},null,8,["icon"]),r(" "+v(n.isEnabled?"Ativa":"Inativa"),1)]),_:2},1032,["color"]),n.category?(y(),Z(U,{key:0,color:"white",size:"small",variant:"outlined",class:"category-chip"},{default:l(()=>[r(v(n.category),1)]),_:2},1024)):F("",!0)])])]),a("div",na,[e(U,{color:u(n.customSeverity||n.ruleTemplate?.severity),variant:"elevated",size:"small",class:"severity-chip"},{default:l(()=>[r(v(J(n.customSeverity||n.ruleTemplate?.severity)),1)]),_:2},1032,["color"]),$e(ve)?F("",!0):(y(),Z(He,{key:0,location:"bottom end"},{activator:l(({props:ie})=>[e(q,ne({icon:"mdi-dots-vertical",variant:"text",size:"small",color:"white",class:"action-menu-btn"},{ref_for:!0},ie),null,16)]),default:l(()=>[e(je,null,{default:l(()=>[e(he,{onClick:ie=>S(n.id)},{prepend:l(()=>[e(V,null,{default:l(()=>[...t[43]||(t[43]=[r("mdi-pencil",-1)])]),_:1})]),default:l(()=>[e(Fe,null,{default:l(()=>[...t[44]||(t[44]=[r("Editar",-1)])]),_:1})]),_:1},8,["onClick"]),e(he,{onClick:ie=>c(n.id,!n.isEnabled)},{prepend:l(()=>[e(V,null,{default:l(()=>[r(v(n.isEnabled?"mdi-pause":"mdi-play"),1)]),_:2},1024)]),default:l(()=>[e(Fe,null,{default:l(()=>[r(v(n.isEnabled?"Desativar":"Ativar"),1)]),_:2},1024)]),_:2},1032,["onClick"]),e(Ke),e(he,{onClick:ie=>o(n.id),class:"text-error"},{prepend:l(()=>[e(V,null,{default:l(()=>[...t[45]||(t[45]=[r("mdi-delete",-1)])]),_:1})]),default:l(()=>[e(Fe,null,{default:l(()=>[...t[46]||(t[46]=[r("Deletar",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))])],2),e(ae,{class:"rule-content"},{default:l(()=>[a("div",ra,[a("div",ua,v(n.ruleTemplate?.rule||"Descrição não disponível"),1)]),n.customMessage?(y(),w("div",da,[a("div",ca,[e(V,{color:"orange",size:"16",class:"me-2"},{default:l(()=>[...t[47]||(t[47]=[r("mdi-pencil",-1)])]),_:1}),t[48]||(t[48]=a("span",{class:"custom-message-label"},"Mensagem Personalizada",-1))]),a("div",ma,v(n.customMessage),1)])):F("",!0),n.tags&&n.tags.length?(y(),w("div",va,[a("div",fa,[e(V,{color:"primary",size:"16",class:"me-2"},{default:l(()=>[...t[49]||(t[49]=[r("mdi-tag-multiple",-1)])]),_:1}),t[50]||(t[50]=a("span",{class:"tags-label"},"Tags",-1))]),a("div",pa,[(y(!0),w(ye,null,Ae(n.tags,ie=>(y(),Z(U,{key:ie,size:"small",color:"primary",variant:"tonal",class:"tag-chip"},{default:l(()=>[r(v(ie),1)]),_:2},1024))),128))])])):F("",!0),a("div",ga,[a("div",ya,[a("div",ba,[e(V,{size:"14",color:"medium-emphasis",class:"me-1"},{default:l(()=>[...t[51]||(t[51]=[r("mdi-flag",-1)])]),_:1}),t[52]||(t[52]=a("span",{class:"metadata-label"},"Prioridade:",-1)),a("span",Va,v(n.priority||"Não definida"),1)]),a("div",xa,[e(V,{size:"14",color:"medium-emphasis",class:"me-1"},{default:l(()=>[...t[53]||(t[53]=[r("mdi-calendar-edit",-1)])]),_:1}),t[54]||(t[54]=a("span",{class:"metadata-label"},"Atualizada:",-1)),a("span",_a,v(ke(n.updatedAt)),1)])]),n.customSeverity&&n.customSeverity!==n.ruleTemplate?.severity?(y(),w("div",ha,[e(U,{color:"orange",size:"x-small",variant:"tonal","prepend-icon":"mdi-tune"},{default:l(()=>[...t[55]||(t[55]=[r(" Personalizada ",-1)])]),_:1})])):F("",!0)])]),_:2},1024)]),_:2},1024))),128)),D.value.data?.length?F("",!0):(y(),w("div",Ca,[e(G,{class:"pa-8"},{default:l(()=>[e(V,{size:"64",color:"grey",class:"mb-4"},{default:l(()=>[...t[56]||(t[56]=[r("mdi-shield-off",-1)])]),_:1}),t[57]||(t[57]=a("div",{class:"text-h6 mb-2"},"Nenhuma regra encontrada",-1)),a("div",ka,[$e(ve)?(y(),w("span",za,"Tente ajustar os filtros para encontrar regras")):(y(),w("span",wa,"Configure regras personalizadas para análise de código"))])]),_:1})]))])),D.value.totalPages>1?(y(),w("div",Sa,[e(ql,{modelValue:I.value,"onUpdate:modelValue":[t[12]||(t[12]=n=>I.value=n),se],length:D.value.totalPages},null,8,["modelValue","length"])])):F("",!0),e(At,{modelValue:L.value,"onUpdate:modelValue":t[13]||(t[13]=n=>L.value=n),"rule-id":j.value,"organization-id":xe,onSaved:be},null,8,["modelValue","rule-id"])]))}}),lo=Le(Ea,[["__scopeId","data-v-9de660b8"]]);export{lo as default};
