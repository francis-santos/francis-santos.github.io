import{b as s}from"./auth.service-BozCwdnf.js";import{u as l}from"./useDemoMode-DpDjlFnd.js";class p{baseUrl="/repositories";async getRepositories(t,e=1,r=20,a={}){const{isDemoUser:n,getMockData:c}=l();if(n.value){const o=await c("repositories",e,r,a);return{data:o.data,total:o.total,page:o.page,limit:o.limit,totalPages:Math.ceil(o.total/o.limit)}}const i=new URLSearchParams({organizationId:t,page:e.toString(),limit:r.toString()});return a.platform&&a.platform!=="all"&&i.append("platform",a.platform),a.status&&a.status!=="all"&&i.append("status",a.status),a.search&&i.append("search",a.search),await s.get(`${this.baseUrl}?${i.toString()}`)}async getRepository(t){const{isDemoUser:e,getMockItem:r}=l();if(e.value){const a=await r("repositories",t);if(a)return{...a,statistics:{totalAnalyses:a.analysesCount||0,completedAnalyses:Math.floor((a.analysesCount||0)*.85),failedAnalyses:Math.floor((a.analysesCount||0)*.15),totalIssues:a.issuesCount||0,averageScore:a.averageScore||null,lastAnalysisAt:a.lastAnalysisAt||null,branches:3,contributors:5},recentAnalyses:[{id:"analysis-1",branchName:"main",commitSha:"a1b2c3d4",status:"completed",qualityScore:8.5,issuesFound:3,createdAt:"2024-11-15T10:30:00Z",completedAt:"2024-11-15T10:35:00Z"},{id:"analysis-2",branchName:"develop",commitSha:"e5f6g7h8",status:"completed",qualityScore:7.8,issuesFound:5,createdAt:"2024-11-14T15:20:00Z",completedAt:"2024-11-14T15:25:00Z"},{id:"analysis-3",branchName:"feature/auth",commitSha:"i9j0k1l2",status:"failed",qualityScore:0,issuesFound:0,createdAt:"2024-11-13T09:10:00Z",completedAt:null}]};throw new Error("Repositório não encontrado")}return await s.get(`${this.baseUrl}/${t}`)}async getRepositoryStatistics(t){return await s.get(`${this.baseUrl}/${t}/statistics`)}async createRepository(t){return await s.post(this.baseUrl,t)}async updateRepository(t,e){return await s.put(`${this.baseUrl}/${t}`,e)}async deleteRepository(t){await s.delete(`${this.baseUrl}/${t}`)}async syncRepository(t){await s.post(`${this.baseUrl}/${t}/sync`)}async pauseRepository(t){await s.post(`${this.baseUrl}/${t}/pause`)}async resumeRepository(t){await s.post(`${this.baseUrl}/${t}/resume`)}}const d=new p;export{d as r};
