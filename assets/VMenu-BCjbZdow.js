import{o as L,B as g,z as R,C as x,Q as b,k as S}from"./index-gFSB3kms.js";import{h as M,p as O,q as B,C as K,aD as k,G as A,u as F,a9 as H,aH as w,aI as U,aJ as N}from"./vendor-ui-Ca7vMALJ.js";import{V as z}from"./dialog-transition-B8nu4acL.js";import{E as G,t as j,d as q,f as J,s as Q,A as W,G as $,I as X,w as Y,h as Z,v as V,n as P,p as _}from"./vendor-vue-BKuzT1x2.js";const ee=O({id:String,submenu:Boolean,disableInitialFocus:Boolean,...H(x({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:z}}),["absolute"])},"VMenu"),se=M()({name:"VMenu",props:ee(),emits:{"update:modelValue":t=>!0},setup(t,T){let{slots:p}=T;const o=B(t,"modelValue"),{scopeId:h}=L(),{isRtl:i}=K(),f=G(),u=j(()=>t.id||`v-menu-${f}`),n=q(),l=J(b,null),c=Q(new Set);_(b,{register(){c.value.add(f)},unregister(){c.value.delete(f)},closeParents(e){setTimeout(()=>{!c.value.size&&!t.persistent&&(e==null||n.value?.contentEl&&!N(e,n.value.contentEl))&&(o.value=!1,l?.closeParents())},40)}}),W(()=>{l?.unregister(),document.removeEventListener("focusin",m)}),$(()=>o.value=!1);let d=!1,E=-1;async function v(){d=!0,E=window.setTimeout(()=>{d=!1},100)}async function m(e){const a=e.relatedTarget,s=e.target;await X(),o.value&&a!==s&&n.value?.rootEl&&n.value?.contentEl&&n.value?.localTop&&![document,n.value.rootEl].includes(s)&&!n.value.rootEl.contains(s)&&(d?!t.openOnHover&&!n.value.activatorEl?.contains(s)&&(o.value=!1):(k(n.value.contentEl)[0]?.focus(),document.removeEventListener("pointerdown",v)))}Y(o,e=>{e?(l?.register(),A&&!t.disableInitialFocus&&(document.addEventListener("pointerdown",v),document.addEventListener("focusin",m,{once:!0}))):(l?.unregister(),A&&(clearTimeout(E),document.removeEventListener("pointerdown",v),document.removeEventListener("focusin",m)))},{immediate:!0});function C(e){l?.closeParents(e)}function I(e){if(!t.disabled)if(e.key==="Tab"||e.key==="Enter"&&!t.closeOnContentClick){if(e.key==="Enter"&&(e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLInputElement&&e.target.closest("form")))return;e.key==="Enter"&&e.preventDefault(),U(k(n.value?.contentEl,!1),e.shiftKey?"prev":"next",s=>s.tabIndex>=0)||(o.value=!1,n.value?.activatorEl?.focus())}else t.submenu&&e.key===(i.value?"ArrowRight":"ArrowLeft")&&(o.value=!1,n.value?.activatorEl?.focus())}function y(e){if(t.disabled)return;const a=n.value?.contentEl;a&&o.value?e.key==="ArrowDown"?(e.preventDefault(),e.stopImmediatePropagation(),w(a,"next")):e.key==="ArrowUp"?(e.preventDefault(),e.stopImmediatePropagation(),w(a,"prev")):t.submenu&&(e.key===(i.value?"ArrowRight":"ArrowLeft")?o.value=!1:e.key===(i.value?"ArrowLeft":"ArrowRight")&&(e.preventDefault(),w(a,"first"))):(t.submenu?e.key===(i.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(e.key))&&(o.value=!0,e.preventDefault(),setTimeout(()=>setTimeout(()=>y(e))))}const D=Z(()=>V({"aria-haspopup":"menu","aria-expanded":String(o.value),"aria-controls":u.value,"aria-owns":u.value,onKeydown:y},t.activatorProps));return F(()=>{const e=g.filterProps(t);return P(g,V({ref:n,id:u.value,class:["v-menu",t.class],style:t.style},e,{modelValue:o.value,"onUpdate:modelValue":a=>o.value=a,absolute:!0,activatorProps:D.value,location:t.location??(t.submenu?"end":"bottom"),"onClick:outside":C,onKeydown:I},h),{activator:p.activator,default:function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return P(S,{root:"VMenu"},{default:()=>[p.default?.(...s)]})}})}),R({id:u,Î¨openChildren:c},n)}});export{se as V};
