import{A as i}from"./auth.service-BozCwdnf.js";import{u as a}from"./useDemoMode-DpDjlFnd.js";class n extends i{async getDashboardAnalytics(){try{return await this.get("/dashboard/analytics")}catch(e){return console.error("Error fetching dashboard analytics:",e),this.getMockDashboardData()}}async getDashboardStats(){try{return await this.get("/dashboard/stats")}catch(e){return console.error("Error fetching dashboard stats:",e),{totalAnalyses:1247,activeRepositories:12,issuesFound:89,qualityScore:8.5}}}async getAnalysisTrend(e=30){try{return await this.get(`/dashboard/analysis-trend?days=${e}`)}catch(t){return console.error("Error fetching analysis trend:",t),this.getMockAnalysisTrend()}}async getQualityDistribution(){try{return await this.get("/dashboard/quality-distribution")}catch(e){return console.error("Error fetching quality distribution:",e),{excellent:34,good:45,fair:15,poor:6}}}async getSecurityIssues(){try{return await this.get("/dashboard/security-issues")}catch(e){return console.error("Error fetching security issues:",e),{high:12,medium:34,low:67,resolved:156}}}async getRecentActivity(e=10){try{return await this.get(`/dashboard/recent-activity?limit=${e}`)}catch(t){return console.error("Error fetching recent activity:",t),this.getMockRecentActivity()}}async getTopRepositories(e=5){try{const t=await this.get(`/dashboard/top-repositories?limit=${e}`);return!t||t.length===0?this.getMockTopRepositories():t}catch(t){return console.error("Error fetching top repositories, using mock data:",t),this.getMockTopRepositories()}}async getDetailedMetrics(){try{return await this.get("/dashboard/detailed-metrics")}catch(e){return console.error("Error fetching detailed metrics:",e),this.getMockDetailedMetrics()}}async getAnalyses(e=1,t=20){const{isDemoUser:o,getMockData:r}=a();if(o.value){const s=await r("analyses",e,t);return{data:s.data,total:s.total,page:s.page,limit:s.limit,totalPages:Math.ceil(s.total/s.limit)}}try{return await this.get(`/analyses?page=${e}&limit=${t}`)}catch(s){throw console.error("Error fetching analyses:",s),s}}async getAnalysisById(e){const{isDemoUser:t,getMockItem:o}=a();if(t.value){const r=await o("analyses",e);if(!r)throw new Error("Análise não encontrada");return r}try{return await this.get(`/analyses/${e}`)}catch(r){throw console.error("Error fetching analysis details:",r),r}}getMockDashboardData(){return{stats:{totalAnalyses:1247,activeRepositories:12,issuesFound:89,qualityScore:8.5},analysisTrend:this.getMockAnalysisTrend(),qualityDistribution:{excellent:34,good:45,fair:15,poor:6},securityIssues:{high:12,medium:34,low:67,resolved:156},recentActivity:this.getMockRecentActivity(),topRepositories:this.getMockTopRepositories()}}getMockAnalysisTrend(){const e=[],t=new Date;for(let o=29;o>=0;o--){const r=new Date(t);r.setDate(r.getDate()-o),e.push({date:r.toISOString().split("T")[0],analyses:Math.floor(Math.random()*20)+5,issues:Math.floor(Math.random()*15)+2,resolved:Math.floor(Math.random()*10)+1})}return e}getMockRecentActivity(){return[{id:"1",type:"analysis",title:"Code Analysis Completed",description:"Analysis completed for main branch",repository:"project-alpha/frontend",author:"John Doe",timestamp:new Date(Date.now()-600*1e3).toISOString()},{id:"2",type:"issue",title:"Security Issue Found",description:"Potential SQL injection vulnerability detected",repository:"project-beta/api",author:"Jane Smith",timestamp:new Date(Date.now()-1500*1e3).toISOString(),severity:"high"},{id:"3",type:"resolved",title:"Issue Resolved",description:"Memory leak in data processor fixed",repository:"project-gamma/worker",author:"Mike Johnson",timestamp:new Date(Date.now()-2700*1e3).toISOString()},{id:"4",type:"repository",title:"New Repository Added",description:"Repository connected for monitoring",repository:"project-delta/mobile",author:"Sarah Wilson",timestamp:new Date(Date.now()-7200*1e3).toISOString()}]}getMockTopRepositories(){return[{id:"1",name:"frontend",fullName:"project-alpha/frontend",lastAnalysisAt:new Date(Date.now()-7200*1e3).toISOString(),qualityScore:9.2,issuesCount:3,analysisCount:45},{id:"2",name:"api",fullName:"project-beta/api",lastAnalysisAt:new Date(Date.now()-14400*1e3).toISOString(),qualityScore:8.7,issuesCount:7,analysisCount:38},{id:"3",name:"worker",fullName:"project-gamma/worker",lastAnalysisAt:new Date(Date.now()-360*60*1e3).toISOString(),qualityScore:8.1,issuesCount:12,analysisCount:29}]}getMockDetailedMetrics(){return{totalAnalyses:150,completedAnalyses:135,failedAnalyses:15,averageProcessingTime:180,topIssueTypes:[{type:"Segurança",count:45,percentage:35},{type:"Performance",count:32,percentage:25},{type:"Qualidade",count:28,percentage:22},{type:"Boas Práticas",count:23,percentage:18}],repositoryGrowth:{thisMonth:5,lastMonth:3,growthRate:66.7}}}}const y=new n;export{y as d};
