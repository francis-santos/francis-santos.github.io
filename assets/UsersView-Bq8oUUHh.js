import{k as Ie,f as V,r as se,j as Z,E as Pe,q as a,x as ee,G as Fe,z as s,F as Le,_ as G,$ as D,a0 as P,a1 as l,a8 as n,W as m,a2 as x}from"./vendor-vue-BOgiBTV5.js";import{b as B}from"./auth-Dt5LZyuD.js";import{u as ue,V as N}from"./VChip-CnfVI7ta.js";import{y as Oe,_ as je,b as v,a as z}from"./index-Fi5SlckD.js";import{a as c,V as Y}from"./VRow-i_tVuNAF.js";import{V as A,e as F,a as L,b as q,d as ie,c as K}from"./VGrid-BenhMHcZ.js";import{V as J}from"./VTextField-B2IaUgQ6.js";import{d as te,e as Te,f as Me,g as Ge,V as W}from"./VSelect-0fCGXKgg.js";import{V as Be}from"./VDataTable-BLzqgo4z.js";import{V as qe}from"./VForm-Da-i8RCh.js";import{V as Je}from"./VSwitch-DM6dFJzZ.js";import{V as Q}from"./VSpacer-CoP99NGt.js";import{V as X}from"./VDialog-CwamhhG7.js";import{V as We}from"./VAlert-CGm6uEMH.js";import{V as re,a as Ze,m as He}from"./autofocus-BDwW2Sox.js";import{h as me,p as ce,u as fe,q as Ye,ap as Ke,I as ne,ab as Qe}from"./vendor-ui-BR0KSDoQ.js";import"./vendor-utils-C9OYYH06.js";import"./token-storage.service-BqAv9k07.js";import"./index-DzEvJ-T3.js";import"./VList-DIl281p1.js";import"./ssrBoot-Cswv876e.js";import"./VMenu-DelZx27A.js";import"./dialog-transition-BRPqoOP4.js";import"./VPagination-BthfBpUL.js";import"./VTable-CEZlMFDz.js";import"./filter-BU9fsv7R.js";var I=(r=>(r.ADMIN="admin",r.MANAGER="manager",r.DEVELOPER="developer",r.VIEWER="viewer",r))(I||{});const Xe=r=>{switch(r){case"admin":return"Administrador";case"manager":return"Gerente";case"developer":return"Desenvolvedor";case"viewer":return"Visualizador";default:return"Desconhecido"}},$e=r=>{switch(r){case"admin":return"error";case"manager":return"warning";case"developer":return"primary";case"viewer":return"info";default:return"grey"}},et=r=>{switch(r){case"admin":return"mdi-shield-crown";case"manager":return"mdi-account-tie";case"developer":return"mdi-code-braces";case"viewer":return"mdi-eye";default:return"mdi-account"}},tt=r=>r?"Ativo":"Inativo",at=r=>r?"success":"error";class lt{async getUsers(e,u={}){const{isDemoUser:t,getMockData:p,simulateApiDelay:d}=ue();if(t.value){await d();const f=await p("users",u.page||1,u.limit||20,u);return{data:f.data,total:f.total,page:f.page,limit:f.limit,totalPages:Math.ceil(f.total/f.limit)}}const o=new URLSearchParams({organizationId:e,...Object.fromEntries(Object.entries(u).filter(([,f])=>f!==void 0&&f!==""))}),b=await B.get(`/users?${o}`);return{data:b,total:b.length}}async getUserDetails(e,u){return await B.get(`/users/${e}?organizationId=${u}`)}async createUser(e,u){return await B.post("/users",{...u,organizationId:e})}async updateUser(e,u,t){return await B.put(`/users/${e}?organizationId=${u}`,t)}async deleteUser(e,u){await B.delete(`/users/${e}?organizationId=${u}`)}async getUserStats(e,u={}){const p=(await this.getUsers(e,u)).data,d=p.length,o=p.filter(g=>g.isActive).length,b=d-o,f=new Map;p.forEach(g=>{f.set(g.role,(f.get(g.role)||0)+1)});const S=Array.from(f.entries()).map(([g,_])=>({role:g,count:_})),C=new Date;C.setDate(C.getDate()-30);const E=p.filter(g=>g.lastLoginAt&&new Date(g.lastLoginAt)>C).length,R=p.filter(g=>!g.emailVerifiedAt).length,w=new Date;w.setDate(w.getDate()-7);const U=p.filter(g=>new Date(g.createdAt)>w).length;return{total:d,active:o,inactive:b,byRole:S,recentLogins:E,unverifiedEmails:R,recentRegistrations:U}}getRoles(){return[{title:"Administrador",value:I.ADMIN,description:"Acesso completo ao sistema, pode gerenciar usuários e configurações"},{title:"Gerente",value:I.MANAGER,description:"Pode gerenciar projetos e visualizar relatórios avançados"},{title:"Desenvolvedor",value:I.DEVELOPER,description:"Acesso a funcionalidades de desenvolvimento e análise de código"},{title:"Visualizador",value:I.VIEWER,description:"Apenas visualização de dados e relatórios básicos"}]}getLanguages(){return[{title:"Português (Brasil)",value:"pt-BR"},{title:"English (US)",value:"en-US"},{title:"English (UK)",value:"en-GB"},{title:"Español",value:"es-ES"}]}getTimezones(){return[{title:"São Paulo (GMT-3)",value:"America/Sao_Paulo"},{title:"Rio de Janeiro (GMT-3)",value:"America/Sao_Paulo"},{title:"Brasília (GMT-3)",value:"America/Sao_Paulo"},{title:"Manaus (GMT-4)",value:"America/Manaus"},{title:"Acre (GMT-5)",value:"America/Rio_Branco"},{title:"UTC",value:"UTC"},{title:"New York (GMT-5)",value:"America/New_York"},{title:"London (GMT+0)",value:"Europe/London"}]}validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}validateUsername(e){return/^[a-zA-Z0-9._-]{3,20}$/.test(e)}validatePassword(e){return e.length<8?{isValid:!1,message:"Senha deve ter pelo menos 8 caracteres"}:/[a-z]/.test(e)?/[A-Z]/.test(e)?/[0-9]/.test(e)?/[^a-zA-Z0-9]/.test(e)?{isValid:!0,message:"Senha válida"}:{isValid:!1,message:"Senha deve conter pelo menos um caractere especial"}:{isValid:!1,message:"Senha deve conter pelo menos um número"}:{isValid:!1,message:"Senha deve conter pelo menos uma letra maiúscula"}:{isValid:!1,message:"Senha deve conter pelo menos uma letra minúscula"}}async exportUsers(e,u={},t="csv"){const d=(await this.getUsers(e,u)).data;if(t==="csv"){const o=this.convertToCSV(d);return new Blob([o],{type:"text/csv"})}else{const o=JSON.stringify(d,null,2);return new Blob([o],{type:"application/json"})}}convertToCSV(e){if(e.length===0)return"";const u=["ID","Nome Completo","Username","Email","Perfil","Status","Último Login","Data de Criação"],t=e.map(d=>[d.id,d.fullName,d.username,d.email,d.role,d.isActive?"Ativo":"Inativo",d.lastLoginAt||"Nunca",d.createdAt]);return[u.join(","),...t.map(d=>d.map(o=>`"${o}"`).join(","))].join(`
`)}}const y=new lt,h="b1e58ac3-6a88-4fc3-846d-352c8ca4a1db",ot=Ie({__name:"UsersView",setup(r,{expose:e}){e();const{isDemoUser:u}=ue(),t=V([]),p=V({total:0,active:0,inactive:0,byRole:[],recentLogins:0,unverifiedEmails:0,recentRegistrations:0}),d=se({search:"",role:void 0,isActive:void 0}),o=V(!1),b=V(!1),f=V(!1),S=V(!1),C=V(!1),E=V(!1),R=V(!1),w=V(!1),U=V(null),g=V(null),_=V(null),H=V(!1),O=V("csv"),j=se({fullName:"",username:"",email:"",password:"",role:I.DEVELOPER,language:"pt-BR",timezone:"America/Sao_Paulo",isActive:!0}),ve=[{title:"Usuário",value:"fullName",sortable:!0},{title:"Email",value:"email",sortable:!0},{title:"Perfil",value:"role",sortable:!0},{title:"Status",value:"isActive",sortable:!0},{title:"Email Verificado",value:"emailVerifiedAt",sortable:!1},{title:"Último Login",value:"lastLoginAt",sortable:!0},{title:"Criado em",value:"createdAt",sortable:!0},{title:"Ações",value:"actions",sortable:!1,align:"center"}],ge=Z(()=>y.getRoles().map(i=>({title:i.title,value:i.value}))),pe=Z(()=>y.getRoles().map(i=>({title:`${i.title} - ${i.description}`,value:i.value}))),Ve=[{title:"Ativo",value:!0},{title:"Inativo",value:!1}],xe=Z(()=>y.getLanguages()),be=Z(()=>y.getTimezones()),ye=i=>!!i||"Campo obrigatório",Ue=i=>i?y.validateEmail(i)||"Email inválido":!0,we=i=>i?y.validateUsername(i)||"Username deve ter 3-20 caracteres alfanuméricos, pontos, hífens ou underscores":!0,De=i=>{if(!i&&U.value)return!0;if(!i)return"Campo obrigatório";const k=y.validatePassword(i);return k.isValid||k.message},T=async()=>{o.value=!0;try{const i=await y.getUsers(h,d);t.value=i.data}catch(i){console.error("Erro ao carregar usuários:",i)}finally{o.value=!1}},M=async()=>{try{p.value=await y.getUserStats(h,d)}catch(i){console.error("Erro ao carregar estatísticas:",i)}},ae=()=>{T(),M()},Ae=()=>{Object.keys(d).forEach(i=>{d[i]=i==="search"?"":void 0}),ae()},Ce=i=>{g.value=i,E.value=!0},Re=i=>{U.value=i,Object.assign(j,{fullName:i.fullName,username:i.username,email:i.email,role:i.role,language:i.language||"pt-BR",timezone:i.timezone||"America/Sao_Paulo",isActive:i.isActive}),E.value=!1,C.value=!0},_e=i=>{_.value=i,R.value=!0},Se=async()=>{if(H.value){b.value=!0;try{U.value?await y.updateUser(U.value.id,h,j):await y.createUser(h,j),le(),T(),M()}catch(i){console.error("Erro ao salvar usuário:",i)}finally{b.value=!1}}},Ee=async()=>{if(_.value){f.value=!0;try{await y.deleteUser(_.value.id,h),R.value=!1,_.value=null,T(),M()}catch(i){console.error("Erro ao excluir usuário:",i)}finally{f.value=!1}}},ke=()=>{w.value=!0},Ne=async()=>{S.value=!0;try{const i=await y.exportUsers(h,d,O.value),k=URL.createObjectURL(i),$=document.createElement("a");$.href=k,$.download=`usuarios.${O.value}`,$.click(),URL.revokeObjectURL(k),w.value=!1}catch(i){console.error("Erro ao exportar usuários:",i)}finally{S.value=!1}},le=()=>{C.value=!1,U.value=null,Object.assign(j,{fullName:"",username:"",email:"",password:"",role:I.DEVELOPER,language:"pt-BR",timezone:"America/Sao_Paulo",isActive:!0})},ze=i=>i.split(" ").map(k=>k.charAt(0)).join("").substring(0,2).toUpperCase(),he=i=>new Date(i).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});Pe(()=>{T(),M()});const oe={isDemoUser:u,organizationId:h,users:t,stats:p,filters:d,loading:o,saving:b,deleting:f,exporting:S,showCreateDialog:C,showDetailsDialog:E,showDeleteDialog:R,showExportDialog:w,editingUser:U,selectedUser:g,userToDelete:_,formValid:H,exportFormat:O,userFormData:j,headers:ve,roleOptions:ge,roleSelectOptions:pe,statusOptions:Ve,languageOptions:xe,timezoneOptions:be,requiredRule:ye,emailRule:Ue,usernameRule:we,passwordRule:De,loadUsers:T,loadStats:M,applyFilters:ae,clearFilters:Ae,viewUserDetails:Ce,editUser:Re,confirmDelete:_e,saveUser:Se,executeDelete:Ee,exportUsers:ke,executeExport:Ne,closeCreateDialog:le,getInitials:ze,formatDate:he,get getRoleDisplayName(){return Xe},get getRoleColor(){return $e},get getRoleIcon(){return et},get getStatusText(){return tt},get getStatusColor(){return at}};return Object.defineProperty(oe,"__isScriptSetup",{enumerable:!1,value:!0}),oe}}),st=ce({...Te({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),de=me()({name:"VRadio",props:st(),setup(r,e){let{slots:u}=e;return fe(()=>{const t=te.filterProps(r);return a(te,ee(t,{class:["v-radio",r.class],style:r.style,type:"radio"}),u)}),{}}}),it=ce({height:{type:[Number,String],default:"auto"},...He(),...Qe(Ge(),["multiple"]),trueIcon:{type:ne,default:"$radioOn"},falseIcon:{type:ne,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),rt=me()({name:"VRadioGroup",inheritAttrs:!1,props:it(),emits:{"update:modelValue":r=>!0},setup(r,e){let{attrs:u,slots:t}=e;const p=Fe(),d=Z(()=>r.id||`radio-group-${p}`),o=Ye(r,"modelValue"),b=V();return fe(()=>{const[f,S]=Ke(u),C=re.filterProps(r),E=te.filterProps(r),R=t.label?t.label({label:r.label,props:{for:d.value}}):r.label;return a(re,ee({ref:b,class:["v-radio-group",r.class],style:r.style},f,C,{modelValue:o.value,"onUpdate:modelValue":w=>o.value=w,id:d.value}),{...t,default:w=>{let{id:U,messagesId:g,isDisabled:_,isReadonly:H}=w;return s(Le,null,[R&&a(Ze,{id:U.value},{default:()=>[R]}),a(Me,ee(E,{id:U.value,"aria-describedby":g.value,defaultsTarget:"VRadio",trueIcon:r.trueIcon,falseIcon:r.falseIcon,type:r.type,disabled:_.value,readonly:H.value,"aria-labelledby":R?U.value:void 0,multiple:!1},S,{modelValue:o.value,"onUpdate:modelValue":O=>o.value=O}),t)])}})}),Oe({},b)}}),nt={class:"users-view"},dt={class:"d-flex justify-space-between align-center mb-6"},ut={class:"d-flex align-center"},mt={class:"text-h5 font-weight-bold"},ct={class:"d-flex align-center"},ft={class:"text-h5 font-weight-bold"},vt={class:"d-flex align-center"},gt={class:"text-h5 font-weight-bold"},pt={class:"d-flex align-center"},Vt={class:"text-h5 font-weight-bold"},xt={class:"d-flex gap-2"},bt={class:"d-flex gap-2"},yt={class:"d-flex align-center py-2"},Ut={key:1,class:"text-subtitle-2"},wt={class:"font-weight-medium"},Dt={class:"text-caption text-medium-emphasis"},At={key:0},Ct={key:1,class:"text-medium-emphasis"},Rt={class:"d-flex gap-1"},_t={class:"d-flex align-center"},St={class:"d-flex align-center"},Et={key:1,class:"text-subtitle-2 text-primary"},kt={class:"text-h6"},Nt={class:"text-caption opacity-80"},zt={class:"mb-3"},ht={class:"mb-3"},It={class:"mb-3"},Pt={class:"mb-3"},Ft={class:"mb-3"},Lt={class:"mb-3"},Ot={class:"mb-3"},jt={class:"mb-3"},Tt={class:"d-flex align-center"},Mt={class:"mb-4"},Gt={class:"d-flex align-center"};function Bt(r,e,u,t,p,d){return x(),G("div",nt,[s("div",dt,[e[26]||(e[26]=s("div",null,[s("h1",{class:"text-h4 font-weight-bold"},"Usuários"),s("p",{class:"text-subtitle-1 text-medium-emphasis mt-1"}," Gerencie os usuários da sua organização ")],-1)),t.isDemoUser?P("",!0):(x(),D(v,{key:0,color:"primary","prepend-icon":"mdi-account-plus",onClick:e[0]||(e[0]=o=>t.showCreateDialog=!0)},{default:l(()=>[...e[25]||(e[25]=[n(" Novo Usuário ",-1)])]),_:1}))]),a(Y,{class:"mb-6"},{default:l(()=>[a(c,{cols:"12",sm:"6",md:"3"},{default:l(()=>[a(A,{class:"pa-4"},{default:l(()=>[s("div",ut,[a(F,{color:"primary",class:"me-3"},{default:l(()=>[a(z,{color:"white"},{default:l(()=>[...e[27]||(e[27]=[n("mdi-account-group",-1)])]),_:1})]),_:1}),s("div",null,[s("div",mt,m(t.stats.total),1),e[28]||(e[28]=s("div",{class:"text-caption text-medium-emphasis"},"Total de Usuários",-1))])])]),_:1})]),_:1}),a(c,{cols:"12",sm:"6",md:"3"},{default:l(()=>[a(A,{class:"pa-4"},{default:l(()=>[s("div",ct,[a(F,{color:"success",class:"me-3"},{default:l(()=>[a(z,{color:"white"},{default:l(()=>[...e[29]||(e[29]=[n("mdi-account-check",-1)])]),_:1})]),_:1}),s("div",null,[s("div",ft,m(t.stats.active),1),e[30]||(e[30]=s("div",{class:"text-caption text-medium-emphasis"},"Usuários Ativos",-1))])])]),_:1})]),_:1}),a(c,{cols:"12",sm:"6",md:"3"},{default:l(()=>[a(A,{class:"pa-4"},{default:l(()=>[s("div",vt,[a(F,{color:"warning",class:"me-3"},{default:l(()=>[a(z,{color:"white"},{default:l(()=>[...e[31]||(e[31]=[n("mdi-login",-1)])]),_:1})]),_:1}),s("div",null,[s("div",gt,m(t.stats.recentLogins),1),e[32]||(e[32]=s("div",{class:"text-caption text-medium-emphasis"},"Logins Recentes",-1))])])]),_:1})]),_:1}),a(c,{cols:"12",sm:"6",md:"3"},{default:l(()=>[a(A,{class:"pa-4"},{default:l(()=>[s("div",pt,[a(F,{color:"info",class:"me-3"},{default:l(()=>[a(z,{color:"white"},{default:l(()=>[...e[33]||(e[33]=[n("mdi-account-plus",-1)])]),_:1})]),_:1}),s("div",null,[s("div",Vt,m(t.stats.recentRegistrations),1),e[34]||(e[34]=s("div",{class:"text-caption text-medium-emphasis"},"Novos Usuários",-1))])])]),_:1})]),_:1})]),_:1}),a(A,{class:"mb-6"},{default:l(()=>[a(L,null,{default:l(()=>[...e[35]||(e[35]=[n("Filtros",-1)])]),_:1}),a(q,null,{default:l(()=>[a(Y,null,{default:l(()=>[a(c,{cols:"12",sm:"6",md:"3"},{default:l(()=>[a(J,{modelValue:t.filters.search,"onUpdate:modelValue":e[1]||(e[1]=o=>t.filters.search=o),label:"Buscar usuários","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),a(c,{cols:"12",sm:"6",md:"3"},{default:l(()=>[a(W,{modelValue:t.filters.role,"onUpdate:modelValue":e[2]||(e[2]=o=>t.filters.role=o),label:"Perfil",items:t.roleOptions,variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1}),a(c,{cols:"12",sm:"6",md:"3"},{default:l(()=>[a(W,{modelValue:t.filters.isActive,"onUpdate:modelValue":e[3]||(e[3]=o=>t.filters.isActive=o),label:"Status",items:t.statusOptions,variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),a(c,{cols:"12",sm:"6",md:"3"},{default:l(()=>[s("div",xt,[a(v,{color:"primary",variant:"outlined",onClick:t.applyFilters},{default:l(()=>[...e[36]||(e[36]=[n(" Aplicar ",-1)])]),_:1}),a(v,{variant:"outlined",onClick:t.clearFilters,class:"ml-2"},{default:l(()=>[...e[37]||(e[37]=[n(" Limpar ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),a(A,null,{default:l(()=>[a(L,{class:"d-flex justify-space-between align-center"},{default:l(()=>[s("span",null,"Usuários ("+m(t.users.length)+")",1),s("div",bt,[a(v,{variant:"outlined","prepend-icon":"mdi-download",onClick:t.exportUsers},{default:l(()=>[...e[38]||(e[38]=[n(" Exportar ",-1)])]),_:1})])]),_:1}),a(Be,{headers:t.headers,items:t.users,loading:t.loading,class:"elevation-0","no-data-text":"Nenhum usuário encontrado"},{"item.fullName":l(({item:o})=>[s("div",yt,[a(F,{size:"32",color:o.avatarUrl?void 0:"primary",class:"me-3"},{default:l(()=>[o.avatarUrl?(x(),D(ie,{key:0,src:o.avatarUrl,alt:o.fullName},null,8,["src","alt"])):(x(),G("span",Ut,m(t.getInitials(o.fullName)),1))]),_:2},1032,["color"]),s("div",null,[s("div",wt,m(o.fullName),1),s("div",Dt,m(o.username),1)])])]),"item.role":l(({item:o})=>[a(N,{size:"small",color:t.getRoleColor(o.role),"prepend-icon":t.getRoleIcon(o.role)},{default:l(()=>[n(m(t.getRoleDisplayName(o.role)),1)]),_:2},1032,["color","prepend-icon"])]),"item.isActive":l(({item:o})=>[a(N,{size:"small",color:t.getStatusColor(o.isActive)},{default:l(()=>[n(m(t.getStatusText(o.isActive)),1)]),_:2},1032,["color"])]),"item.emailVerifiedAt":l(({item:o})=>[o.emailVerifiedAt?(x(),D(N,{key:0,size:"small",color:"success","prepend-icon":"mdi-email-check"},{default:l(()=>[...e[39]||(e[39]=[n(" Verificado ",-1)])]),_:1})):(x(),D(N,{key:1,size:"small",color:"warning","prepend-icon":"mdi-email-alert"},{default:l(()=>[...e[40]||(e[40]=[n(" Pendente ",-1)])]),_:1}))]),"item.lastLoginAt":l(({item:o})=>[o.lastLoginAt?(x(),G("span",At,m(t.formatDate(o.lastLoginAt)),1)):(x(),G("span",Ct," Nunca "))]),"item.createdAt":l(({item:o})=>[n(m(t.formatDate(o.createdAt)),1)]),"item.actions":l(({item:o})=>[s("div",Rt,[a(v,{icon:"mdi-eye",size:"small",variant:"text",onClick:b=>t.viewUserDetails(o)},null,8,["onClick"]),t.isDemoUser?P("",!0):(x(),D(v,{key:0,icon:"mdi-pencil",size:"small",variant:"text",onClick:b=>t.editUser(o)},null,8,["onClick"])),t.isDemoUser?P("",!0):(x(),D(v,{key:1,icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:b=>t.confirmDelete(o)},null,8,["onClick"]))])]),_:2},1032,["items","loading"])]),_:1}),a(X,{modelValue:t.showCreateDialog,"onUpdate:modelValue":e[13]||(e[13]=o=>t.showCreateDialog=o),"max-width":"600",persistent:"",scrollable:""},{default:l(()=>[a(A,null,{default:l(()=>[a(L,{class:"text-h6 d-flex align-center justify-space-between bg-primary text-white sticky-header"},{default:l(()=>[s("div",_t,[a(z,{class:"me-2"},{default:l(()=>[...e[41]||(e[41]=[n("mdi-account",-1)])]),_:1}),n(" "+m(t.editingUser?"Editar Usuário":"Novo Usuário"),1)]),a(v,{icon:"mdi-close",variant:"text",size:"small",color:"white",onClick:t.closeCreateDialog})]),_:1}),a(q,null,{default:l(()=>[a(qe,{ref:"userForm",modelValue:t.formValid,"onUpdate:modelValue":e[12]||(e[12]=o=>t.formValid=o)},{default:l(()=>[a(Y,null,{default:l(()=>[a(c,{cols:"12",sm:"6"},{default:l(()=>[a(J,{modelValue:t.userFormData.fullName,"onUpdate:modelValue":e[4]||(e[4]=o=>t.userFormData.fullName=o),label:"Nome Completo",rules:[t.requiredRule],variant:"outlined",required:""},null,8,["modelValue","rules"])]),_:1}),a(c,{cols:"12",sm:"6"},{default:l(()=>[a(J,{modelValue:t.userFormData.username,"onUpdate:modelValue":e[5]||(e[5]=o=>t.userFormData.username=o),label:"Nome de Usuário",rules:[t.requiredRule,t.usernameRule],variant:"outlined",required:""},null,8,["modelValue","rules"])]),_:1}),a(c,{cols:"12"},{default:l(()=>[a(J,{modelValue:t.userFormData.email,"onUpdate:modelValue":e[6]||(e[6]=o=>t.userFormData.email=o),label:"Email",rules:[t.requiredRule,t.emailRule],variant:"outlined",type:"email",required:""},null,8,["modelValue","rules"])]),_:1}),t.editingUser?P("",!0):(x(),D(c,{key:0,cols:"12"},{default:l(()=>[a(J,{modelValue:t.userFormData.password,"onUpdate:modelValue":e[7]||(e[7]=o=>t.userFormData.password=o),label:"Senha",rules:[t.requiredRule,t.passwordRule],variant:"outlined",type:"password",required:""},null,8,["modelValue","rules"])]),_:1})),a(c,{cols:"12",sm:"6"},{default:l(()=>[a(W,{modelValue:t.userFormData.role,"onUpdate:modelValue":e[8]||(e[8]=o=>t.userFormData.role=o),label:"Perfil",items:t.roleSelectOptions,rules:[t.requiredRule],variant:"outlined",required:""},null,8,["modelValue","items","rules"])]),_:1}),a(c,{cols:"12",sm:"6"},{default:l(()=>[a(W,{modelValue:t.userFormData.language,"onUpdate:modelValue":e[9]||(e[9]=o=>t.userFormData.language=o),label:"Idioma",items:t.languageOptions,variant:"outlined"},null,8,["modelValue","items"])]),_:1}),a(c,{cols:"12"},{default:l(()=>[a(W,{modelValue:t.userFormData.timezone,"onUpdate:modelValue":e[10]||(e[10]=o=>t.userFormData.timezone=o),label:"Fuso Horário",items:t.timezoneOptions,variant:"outlined"},null,8,["modelValue","items"])]),_:1}),a(c,{cols:"12"},{default:l(()=>[a(Je,{modelValue:t.userFormData.isActive,"onUpdate:modelValue":e[11]||(e[11]=o=>t.userFormData.isActive=o),label:"Usuário Ativo",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(K,{class:"px-6 py-4 bg-surface border-t"},{default:l(()=>[a(Q),a(v,{variant:"text",onClick:t.closeCreateDialog,disabled:t.saving},{default:l(()=>[...e[42]||(e[42]=[n(" Cancelar ",-1)])]),_:1},8,["disabled"]),a(v,{color:"primary",variant:"flat",loading:t.saving,disabled:!t.formValid,onClick:t.saveUser},{default:l(()=>[n(m(t.editingUser?"Salvar Alterações":"Criar Usuário"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(X,{modelValue:t.showDetailsDialog,"onUpdate:modelValue":e[17]||(e[17]=o=>t.showDetailsDialog=o),"max-width":"600",scrollable:""},{default:l(()=>[t.selectedUser?(x(),D(A,{key:0},{default:l(()=>[a(L,{class:"text-h6 d-flex align-center justify-space-between bg-primary text-white sticky-header"},{default:l(()=>[s("div",St,[a(F,{size:"32",color:t.selectedUser.avatarUrl?void 0:"white",class:"me-2"},{default:l(()=>[t.selectedUser.avatarUrl?(x(),D(ie,{key:0,src:t.selectedUser.avatarUrl,alt:t.selectedUser.fullName},null,8,["src","alt"])):(x(),G("span",Et,m(t.getInitials(t.selectedUser.fullName)),1))]),_:1},8,["color"]),s("div",null,[s("div",kt,m(t.selectedUser.fullName),1),s("div",Nt,m(t.selectedUser.username),1)])]),a(v,{icon:"mdi-close",variant:"text",size:"small",color:"white",onClick:e[14]||(e[14]=o=>t.showDetailsDialog=!1)})]),_:1}),a(q,null,{default:l(()=>[a(Y,null,{default:l(()=>[a(c,{cols:"12",sm:"6"},{default:l(()=>[s("div",zt,[e[43]||(e[43]=s("div",{class:"text-caption text-medium-emphasis"},"Email",-1)),s("div",null,m(t.selectedUser.email),1)])]),_:1}),a(c,{cols:"12",sm:"6"},{default:l(()=>[s("div",ht,[e[44]||(e[44]=s("div",{class:"text-caption text-medium-emphasis"},"Perfil",-1)),a(N,{size:"small",color:t.getRoleColor(t.selectedUser.role),"prepend-icon":t.getRoleIcon(t.selectedUser.role)},{default:l(()=>[n(m(t.getRoleDisplayName(t.selectedUser.role)),1)]),_:1},8,["color","prepend-icon"])])]),_:1}),a(c,{cols:"12",sm:"6"},{default:l(()=>[s("div",It,[e[45]||(e[45]=s("div",{class:"text-caption text-medium-emphasis"},"Status",-1)),a(N,{size:"small",color:t.getStatusColor(t.selectedUser.isActive)},{default:l(()=>[n(m(t.getStatusText(t.selectedUser.isActive)),1)]),_:1},8,["color"])])]),_:1}),a(c,{cols:"12",sm:"6"},{default:l(()=>[s("div",Pt,[e[46]||(e[46]=s("div",{class:"text-caption text-medium-emphasis"},"Email Verificado",-1)),a(N,{size:"small",color:t.selectedUser.emailVerifiedAt?"success":"warning","prepend-icon":t.selectedUser.emailVerifiedAt?"mdi-email-check":"mdi-email-alert"},{default:l(()=>[n(m(t.selectedUser.emailVerifiedAt?"Sim":"Não"),1)]),_:1},8,["color","prepend-icon"])])]),_:1}),a(c,{cols:"12",sm:"6"},{default:l(()=>[s("div",Ft,[e[47]||(e[47]=s("div",{class:"text-caption text-medium-emphasis"},"Idioma",-1)),s("div",null,m(t.selectedUser.language||"pt-BR"),1)])]),_:1}),a(c,{cols:"12",sm:"6"},{default:l(()=>[s("div",Lt,[e[48]||(e[48]=s("div",{class:"text-caption text-medium-emphasis"},"Fuso Horário",-1)),s("div",null,m(t.selectedUser.timezone||"America/Sao_Paulo"),1)])]),_:1}),a(c,{cols:"12",sm:"6"},{default:l(()=>[s("div",Ot,[e[49]||(e[49]=s("div",{class:"text-caption text-medium-emphasis"},"Último Login",-1)),s("div",null,m(t.selectedUser.lastLoginAt?t.formatDate(t.selectedUser.lastLoginAt):"Nunca"),1)])]),_:1}),a(c,{cols:"12",sm:"6"},{default:l(()=>[s("div",jt,[e[50]||(e[50]=s("div",{class:"text-caption text-medium-emphasis"},"Criado em",-1)),s("div",null,m(t.formatDate(t.selectedUser.createdAt)),1)])]),_:1})]),_:1})]),_:1}),a(K,{class:"px-6 py-4 bg-surface border-t"},{default:l(()=>[a(Q),a(v,{variant:"text",color:"primary",onClick:e[15]||(e[15]=o=>t.showDetailsDialog=!1)},{default:l(()=>[...e[51]||(e[51]=[n(" Fechar ",-1)])]),_:1}),t.isDemoUser?P("",!0):(x(),D(v,{key:0,color:"primary",variant:"flat","prepend-icon":"mdi-pencil",onClick:e[16]||(e[16]=o=>t.editUser(t.selectedUser))},{default:l(()=>[...e[52]||(e[52]=[n(" Editar ",-1)])]),_:1}))]),_:1})]),_:1})):P("",!0)]),_:1},8,["modelValue"]),a(X,{modelValue:t.showDeleteDialog,"onUpdate:modelValue":e[20]||(e[20]=o=>t.showDeleteDialog=o),"max-width":"500"},{default:l(()=>[a(A,null,{default:l(()=>[a(L,{class:"text-h6 d-flex align-center justify-space-between bg-primary text-white sticky-header"},{default:l(()=>[s("div",Tt,[a(z,{class:"me-2"},{default:l(()=>[...e[53]||(e[53]=[n("mdi-delete",-1)])]),_:1}),e[54]||(e[54]=n(" Confirmar Exclusão ",-1))]),a(v,{icon:"mdi-close",variant:"text",size:"small",color:"white",onClick:e[18]||(e[18]=o=>t.showDeleteDialog=!1)})]),_:1}),a(q,{class:"py-6"},{default:l(()=>[s("p",Mt,[e[55]||(e[55]=n(" Tem certeza que deseja excluir o usuário ",-1)),s("strong",null,m(t.userToDelete?.fullName),1),e[56]||(e[56]=n("? ",-1))]),a(We,{type:"warning",class:"mb-0"},{default:l(()=>[...e[57]||(e[57]=[n(" Esta ação não pode ser desfeita e todos os dados relacionados serão perdidos. ",-1)])]),_:1})]),_:1}),a(K,{class:"px-6 py-4 bg-surface border-t"},{default:l(()=>[a(Q),a(v,{variant:"text",onClick:e[19]||(e[19]=o=>t.showDeleteDialog=!1),disabled:t.deleting},{default:l(()=>[...e[58]||(e[58]=[n(" Cancelar ",-1)])]),_:1},8,["disabled"]),a(v,{color:"error",variant:"flat",loading:t.deleting,onClick:t.executeDelete},{default:l(()=>[...e[59]||(e[59]=[n(" Excluir ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(X,{modelValue:t.showExportDialog,"onUpdate:modelValue":e[24]||(e[24]=o=>t.showExportDialog=o),"max-width":"400"},{default:l(()=>[a(A,null,{default:l(()=>[a(L,{class:"text-h6 d-flex align-center justify-space-between bg-primary text-white sticky-header"},{default:l(()=>[s("div",Gt,[a(z,{class:"me-2"},{default:l(()=>[...e[60]||(e[60]=[n("mdi-download",-1)])]),_:1}),e[61]||(e[61]=n(" Exportar Usuários ",-1))]),a(v,{icon:"mdi-close",variant:"text",size:"small",color:"white",onClick:e[21]||(e[21]=o=>t.showExportDialog=!1)})]),_:1}),a(q,{class:"py-6"},{default:l(()=>[e[62]||(e[62]=s("p",{class:"mb-4"},"Selecione o formato desejado para exportação:",-1)),a(rt,{modelValue:t.exportFormat,"onUpdate:modelValue":e[22]||(e[22]=o=>t.exportFormat=o)},{default:l(()=>[a(de,{label:"CSV (Comma Separated Values)",value:"csv"}),a(de,{label:"JSON (JavaScript Object Notation)",value:"json"})]),_:1},8,["modelValue"])]),_:1}),a(K,{class:"px-6 py-4 bg-surface border-t"},{default:l(()=>[a(Q),a(v,{variant:"text",onClick:e[23]||(e[23]=o=>t.showExportDialog=!1),disabled:t.exporting},{default:l(()=>[...e[63]||(e[63]=[n(" Cancelar ",-1)])]),_:1},8,["disabled"]),a(v,{color:"primary",variant:"flat","prepend-icon":"mdi-download",loading:t.exporting,onClick:t.executeExport},{default:l(()=>[...e[64]||(e[64]=[n(" Exportar ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const pa=je(ot,[["render",Bt],["__scopeId","data-v-93f04328"],["__file","D:/Development/Projetos/Mira/mira-client/src/views/users/UsersView.vue"]]);export{pa as default};
