import{k as ze,f as p,r as se,j as Z,E as Fe,q as l,x as ee,G as he,z as s,F as Le,X as M,Q as b,_ as z,T as a,S as V,a4 as n,a1 as m}from"./vendor-vue-BvKyvIVR.js";import{a as G}from"./auth-PiWOMLtm.js";import{u as ue,a as N}from"./VChip-BzUv3cXC.js";import{_ as Oe}from"./index-CQBjCOQw.js";import{f as U,j as A,i as F,l as h,k as B,V as re,p as W}from"./VGrid-CuJrScxf.js";import{V as Y,a as c}from"./VRow-C_rLTo1r.js";import{V as K}from"./VDialog-C6XAQXKq.js";import{V as Q}from"./VIcon-CM-KW5Qw.js";import{f as te,g as Te,h as je,i as Me,V as q,a as J}from"./VSelect-JVxEisdn.js";import{V as Ge}from"./VDataTable-BIdz-mlh.js";import{V as Be}from"./VForm-BjI_k9Xt.js";import{V as qe}from"./VSwitch-K3EdCM7X.js";import{V as X}from"./VSpacer-kp13s616.js";import{V as ie,a as Je,m as Ze}from"./autofocus-Bh6bNAdk.js";import{f as He}from"./forwardRefs-D_qxKlPu.js";import{g as me,p as ce,f as fe,s as We,O as Ye,I as ne,o as Ke}from"./vendor-ui-Dz8XL-co.js";import"./vendor-utils-Cfk84l6i.js";import"./token-storage.service-BqAv9k07.js";import"./tag-Bnbpnddf.js";import"./dimensions-DVh0fwa7.js";import"./VMenu-B2XC7rkF.js";import"./lazy-DADzjSlN.js";import"./VList-CaAoEaF2.js";import"./ssrBoot-COakMcr6.js";import"./VPagination-C7VPvwfo.js";import"./VTable-BhCG_aMe.js";import"./filter-3ET2mAtK.js";var P=(i=>(i.ADMIN="admin",i.MANAGER="manager",i.DEVELOPER="developer",i.VIEWER="viewer",i))(P||{});const Qe=i=>{switch(i){case"admin":return"Administrador";case"manager":return"Gerente";case"developer":return"Desenvolvedor";case"viewer":return"Visualizador";default:return"Desconhecido"}},Xe=i=>{switch(i){case"admin":return"error";case"manager":return"warning";case"developer":return"primary";case"viewer":return"info";default:return"grey"}},$e=i=>{switch(i){case"admin":return"mdi-shield-crown";case"manager":return"mdi-account-tie";case"developer":return"mdi-code-braces";case"viewer":return"mdi-eye";default:return"mdi-account"}},et=i=>i?"Ativo":"Inativo",tt=i=>i?"success":"error";class lt{async getUsers(e,u={}){const{isDemoUser:t,getMockData:g,simulateApiDelay:d}=ue();if(t.value){await d();const f=await g("users",u.page||1,u.limit||20,u);return{data:f.data,total:f.total,page:f.page,limit:f.limit,totalPages:Math.ceil(f.total/f.limit)}}const o=new URLSearchParams({organizationId:e,...Object.fromEntries(Object.entries(u).filter(([,f])=>f!==void 0&&f!==""))}),x=await G.get(`/users?${o}`);return{data:x,total:x.length}}async getUserDetails(e,u){return await G.get(`/users/${e}?organizationId=${u}`)}async createUser(e,u){return await G.post("/users",{...u,organizationId:e})}async updateUser(e,u,t){return await G.put(`/users/${e}?organizationId=${u}`,t)}async deleteUser(e,u){await G.delete(`/users/${e}?organizationId=${u}`)}async getUserStats(e,u={}){const g=(await this.getUsers(e,u)).data,d=g.length,o=g.filter(v=>v.isActive).length,x=d-o,f=new Map;g.forEach(v=>{f.set(v.role,(f.get(v.role)||0)+1)});const E=Array.from(f.entries()).map(([v,_])=>({role:v,count:_})),R=new Date;R.setDate(R.getDate()-30);const S=g.filter(v=>v.lastLoginAt&&new Date(v.lastLoginAt)>R).length,C=g.filter(v=>!v.emailVerifiedAt).length,w=new Date;w.setDate(w.getDate()-7);const y=g.filter(v=>new Date(v.createdAt)>w).length;return{total:d,active:o,inactive:x,byRole:E,recentLogins:S,unverifiedEmails:C,recentRegistrations:y}}getRoles(){return[{title:"Administrador",value:P.ADMIN,description:"Acesso completo ao sistema, pode gerenciar usuários e configurações"},{title:"Gerente",value:P.MANAGER,description:"Pode gerenciar projetos e visualizar relatórios avançados"},{title:"Desenvolvedor",value:P.DEVELOPER,description:"Acesso a funcionalidades de desenvolvimento e análise de código"},{title:"Visualizador",value:P.VIEWER,description:"Apenas visualização de dados e relatórios básicos"}]}getLanguages(){return[{title:"Português (Brasil)",value:"pt-BR"},{title:"English (US)",value:"en-US"},{title:"English (UK)",value:"en-GB"},{title:"Español",value:"es-ES"}]}getTimezones(){return[{title:"São Paulo (GMT-3)",value:"America/Sao_Paulo"},{title:"Rio de Janeiro (GMT-3)",value:"America/Sao_Paulo"},{title:"Brasília (GMT-3)",value:"America/Sao_Paulo"},{title:"Manaus (GMT-4)",value:"America/Manaus"},{title:"Acre (GMT-5)",value:"America/Rio_Branco"},{title:"UTC",value:"UTC"},{title:"New York (GMT-5)",value:"America/New_York"},{title:"London (GMT+0)",value:"Europe/London"}]}validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}validateUsername(e){return/^[a-zA-Z0-9._-]{3,20}$/.test(e)}validatePassword(e){return e.length<8?{isValid:!1,message:"Senha deve ter pelo menos 8 caracteres"}:/[a-z]/.test(e)?/[A-Z]/.test(e)?/[0-9]/.test(e)?/[^a-zA-Z0-9]/.test(e)?{isValid:!0,message:"Senha válida"}:{isValid:!1,message:"Senha deve conter pelo menos um caractere especial"}:{isValid:!1,message:"Senha deve conter pelo menos um número"}:{isValid:!1,message:"Senha deve conter pelo menos uma letra maiúscula"}:{isValid:!1,message:"Senha deve conter pelo menos uma letra minúscula"}}async exportUsers(e,u={},t="csv"){const d=(await this.getUsers(e,u)).data;if(t==="csv"){const o=this.convertToCSV(d);return new Blob([o],{type:"text/csv"})}else{const o=JSON.stringify(d,null,2);return new Blob([o],{type:"application/json"})}}convertToCSV(e){if(e.length===0)return"";const u=["ID","Nome Completo","Username","Email","Perfil","Status","Último Login","Data de Criação"],t=e.map(d=>[d.id,d.fullName,d.username,d.email,d.role,d.isActive?"Ativo":"Inativo",d.lastLoginAt||"Nunca",d.createdAt]);return[u.join(","),...t.map(d=>d.map(o=>`"${o}"`).join(","))].join(`
`)}}const D=new lt,I="b1e58ac3-6a88-4fc3-846d-352c8ca4a1db",at=ze({__name:"UsersView",setup(i,{expose:e}){e();const{isDemoUser:u}=ue(),t=p([]),g=p({total:0,active:0,inactive:0,byRole:[],recentLogins:0,unverifiedEmails:0,recentRegistrations:0}),d=se({search:"",role:void 0,isActive:void 0}),o=p(!1),x=p(!1),f=p(!1),E=p(!1),R=p(!1),S=p(!1),C=p(!1),w=p(!1),y=p(null),v=p(null),_=p(null),H=p(!1),L=p("csv"),O=se({fullName:"",username:"",email:"",password:"",role:P.DEVELOPER,language:"pt-BR",timezone:"America/Sao_Paulo",isActive:!0}),ve=[{title:"Usuário",value:"fullName",sortable:!0},{title:"Email",value:"email",sortable:!0},{title:"Perfil",value:"role",sortable:!0},{title:"Status",value:"isActive",sortable:!0},{title:"Email Verificado",value:"emailVerifiedAt",sortable:!1},{title:"Último Login",value:"lastLoginAt",sortable:!0},{title:"Criado em",value:"createdAt",sortable:!0},{title:"Ações",value:"actions",sortable:!1,align:"center"}],ge=Z(()=>D.getRoles().map(r=>({title:r.title,value:r.value}))),pe=Z(()=>D.getRoles().map(r=>({title:`${r.title} - ${r.description}`,value:r.value}))),Ve=[{title:"Ativo",value:!0},{title:"Inativo",value:!1}],Ue=Z(()=>D.getLanguages()),xe=Z(()=>D.getTimezones()),De=r=>!!r||"Campo obrigatório",ye=r=>r?D.validateEmail(r)||"Email inválido":!0,we=r=>r?D.validateUsername(r)||"Username deve ter 3-20 caracteres alfanuméricos, pontos, hífens ou underscores":!0,be=r=>{if(!r&&y.value)return!0;if(!r)return"Campo obrigatório";const k=D.validatePassword(r);return k.isValid||k.message},T=async()=>{o.value=!0;try{const r=await D.getUsers(I,d);t.value=r.data}catch(r){console.error("Erro ao carregar usuários:",r)}finally{o.value=!1}},j=async()=>{try{g.value=await D.getUserStats(I,d)}catch(r){console.error("Erro ao carregar estatísticas:",r)}},le=()=>{T(),j()},Ae=()=>{Object.keys(d).forEach(r=>{d[r]=r==="search"?"":void 0}),le()},Re=r=>{v.value=r,S.value=!0},Ce=r=>{y.value=r,Object.assign(O,{fullName:r.fullName,username:r.username,email:r.email,role:r.role,language:r.language||"pt-BR",timezone:r.timezone||"America/Sao_Paulo",isActive:r.isActive}),S.value=!1,R.value=!0},_e=r=>{_.value=r,C.value=!0},Ee=async()=>{if(H.value){x.value=!0;try{y.value?await D.updateUser(y.value.id,I,O):await D.createUser(I,O),ae(),T(),j()}catch(r){console.error("Erro ao salvar usuário:",r)}finally{x.value=!1}}},Se=async()=>{if(_.value){f.value=!0;try{await D.deleteUser(_.value.id,I),C.value=!1,_.value=null,T(),j()}catch(r){console.error("Erro ao excluir usuário:",r)}finally{f.value=!1}}},ke=()=>{w.value=!0},Ne=async()=>{E.value=!0;try{const r=await D.exportUsers(I,d,L.value),k=URL.createObjectURL(r),$=document.createElement("a");$.href=k,$.download=`usuarios.${L.value}`,$.click(),URL.revokeObjectURL(k),w.value=!1}catch(r){console.error("Erro ao exportar usuários:",r)}finally{E.value=!1}},ae=()=>{R.value=!1,y.value=null,Object.assign(O,{fullName:"",username:"",email:"",password:"",role:P.DEVELOPER,language:"pt-BR",timezone:"America/Sao_Paulo",isActive:!0})},Ie=r=>r.split(" ").map(k=>k.charAt(0)).join("").substring(0,2).toUpperCase(),Pe=r=>new Date(r).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});Fe(()=>{T(),j()});const oe={isDemoUser:u,organizationId:I,users:t,stats:g,filters:d,loading:o,saving:x,deleting:f,exporting:E,showCreateDialog:R,showDetailsDialog:S,showDeleteDialog:C,showExportDialog:w,editingUser:y,selectedUser:v,userToDelete:_,formValid:H,exportFormat:L,userFormData:O,headers:ve,roleOptions:ge,roleSelectOptions:pe,statusOptions:Ve,languageOptions:Ue,timezoneOptions:xe,requiredRule:De,emailRule:ye,usernameRule:we,passwordRule:be,loadUsers:T,loadStats:j,applyFilters:le,clearFilters:Ae,viewUserDetails:Re,editUser:Ce,confirmDelete:_e,saveUser:Ee,executeDelete:Se,exportUsers:ke,executeExport:Ne,closeCreateDialog:ae,getInitials:Ie,formatDate:Pe,get getRoleDisplayName(){return Qe},get getRoleColor(){return Xe},get getRoleIcon(){return $e},get getStatusText(){return et},get getStatusColor(){return tt}};return Object.defineProperty(oe,"__isScriptSetup",{enumerable:!1,value:!0}),oe}}),ot=ce({...Te({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),de=me()({name:"VRadio",props:ot(),setup(i,e){let{slots:u}=e;return fe(()=>{const t=te.filterProps(i);return l(te,ee(t,{class:["v-radio",i.class],style:i.style,type:"radio"}),u)}),{}}}),st=ce({height:{type:[Number,String],default:"auto"},...Ze(),...Ke(Me(),["multiple"]),trueIcon:{type:ne,default:"$radioOn"},falseIcon:{type:ne,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),rt=me()({name:"VRadioGroup",inheritAttrs:!1,props:st(),emits:{"update:modelValue":i=>!0},setup(i,e){let{attrs:u,slots:t}=e;const g=he(),d=Z(()=>i.id||`radio-group-${g}`),o=We(i,"modelValue"),x=p();return fe(()=>{const[f,E]=Ye(u),R=ie.filterProps(i),S=te.filterProps(i),C=t.label?t.label({label:i.label,props:{for:d.value}}):i.label;return l(ie,ee({ref:x,class:["v-radio-group",i.class],style:i.style},f,R,{modelValue:o.value,"onUpdate:modelValue":w=>o.value=w,id:d.value}),{...t,default:w=>{let{id:y,messagesId:v,isDisabled:_,isReadonly:H}=w;return s(Le,null,[C&&l(Je,{id:y.value},{default:()=>[C]}),l(je,ee(S,{id:y.value,"aria-describedby":v.value,defaultsTarget:"VRadio",trueIcon:i.trueIcon,falseIcon:i.falseIcon,type:i.type,disabled:_.value,readonly:H.value,"aria-labelledby":C?y.value:void 0,multiple:!1},E,{modelValue:o.value,"onUpdate:modelValue":L=>o.value=L}),t)])}})}),He({},x)}}),it={class:"users-view"},nt={class:"d-flex justify-space-between align-center mb-6"},dt={class:"d-flex align-center"},ut={class:"text-h5 font-weight-bold"},mt={class:"d-flex align-center"},ct={class:"text-h5 font-weight-bold"},ft={class:"d-flex align-center"},vt={class:"text-h5 font-weight-bold"},gt={class:"d-flex align-center"},pt={class:"text-h5 font-weight-bold"},Vt={class:"d-flex gap-2"},Ut={class:"d-flex gap-2"},xt={class:"d-flex align-center py-2"},Dt={key:1,class:"text-subtitle-2"},yt={class:"font-weight-medium"},wt={class:"text-caption text-medium-emphasis"},bt={key:0},At={key:1,class:"text-medium-emphasis"},Rt={class:"d-flex gap-1"},Ct={key:1,class:"text-h6"},_t={class:"text-h6"},Et={class:"text-caption text-medium-emphasis"},St={class:"mb-3"},kt={class:"mb-3"},Nt={class:"mb-3"},It={class:"mb-3"},Pt={class:"mb-3"},zt={class:"mb-3"},Ft={class:"mb-3"},ht={class:"mb-3"};function Lt(i,e,u,t,g,d){return V(),M("div",it,[s("div",nt,[e[23]||(e[23]=s("div",null,[s("h1",{class:"text-h4 font-weight-bold"},"Usuários"),s("p",{class:"text-subtitle-1 text-medium-emphasis mt-1"}," Gerencie os usuários da sua organização ")],-1)),t.isDemoUser?z("",!0):(V(),b(U,{key:0,color:"primary","prepend-icon":"mdi-account-plus",onClick:e[0]||(e[0]=o=>t.showCreateDialog=!0)},{default:a(()=>[...e[22]||(e[22]=[n(" Novo Usuário ",-1)])]),_:1}))]),l(Y,{class:"mb-6"},{default:a(()=>[l(c,{cols:"12",sm:"6",md:"3"},{default:a(()=>[l(A,{class:"pa-4"},{default:a(()=>[s("div",dt,[l(F,{color:"primary",class:"me-3"},{default:a(()=>[l(Q,{color:"white"},{default:a(()=>[...e[24]||(e[24]=[n("mdi-account-group",-1)])]),_:1})]),_:1}),s("div",null,[s("div",ut,m(t.stats.total),1),e[25]||(e[25]=s("div",{class:"text-caption text-medium-emphasis"},"Total de Usuários",-1))])])]),_:1})]),_:1}),l(c,{cols:"12",sm:"6",md:"3"},{default:a(()=>[l(A,{class:"pa-4"},{default:a(()=>[s("div",mt,[l(F,{color:"success",class:"me-3"},{default:a(()=>[l(Q,{color:"white"},{default:a(()=>[...e[26]||(e[26]=[n("mdi-account-check",-1)])]),_:1})]),_:1}),s("div",null,[s("div",ct,m(t.stats.active),1),e[27]||(e[27]=s("div",{class:"text-caption text-medium-emphasis"},"Usuários Ativos",-1))])])]),_:1})]),_:1}),l(c,{cols:"12",sm:"6",md:"3"},{default:a(()=>[l(A,{class:"pa-4"},{default:a(()=>[s("div",ft,[l(F,{color:"warning",class:"me-3"},{default:a(()=>[l(Q,{color:"white"},{default:a(()=>[...e[28]||(e[28]=[n("mdi-login",-1)])]),_:1})]),_:1}),s("div",null,[s("div",vt,m(t.stats.recentLogins),1),e[29]||(e[29]=s("div",{class:"text-caption text-medium-emphasis"},"Logins Recentes",-1))])])]),_:1})]),_:1}),l(c,{cols:"12",sm:"6",md:"3"},{default:a(()=>[l(A,{class:"pa-4"},{default:a(()=>[s("div",gt,[l(F,{color:"info",class:"me-3"},{default:a(()=>[l(Q,{color:"white"},{default:a(()=>[...e[30]||(e[30]=[n("mdi-account-plus",-1)])]),_:1})]),_:1}),s("div",null,[s("div",pt,m(t.stats.recentRegistrations),1),e[31]||(e[31]=s("div",{class:"text-caption text-medium-emphasis"},"Novos Usuários",-1))])])]),_:1})]),_:1})]),_:1}),l(A,{class:"mb-6"},{default:a(()=>[l(h,null,{default:a(()=>[...e[32]||(e[32]=[n("Filtros",-1)])]),_:1}),l(B,null,{default:a(()=>[l(Y,null,{default:a(()=>[l(c,{cols:"12",sm:"6",md:"3"},{default:a(()=>[l(q,{modelValue:t.filters.search,"onUpdate:modelValue":e[1]||(e[1]=o=>t.filters.search=o),label:"Buscar usuários","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),l(c,{cols:"12",sm:"6",md:"3"},{default:a(()=>[l(J,{modelValue:t.filters.role,"onUpdate:modelValue":e[2]||(e[2]=o=>t.filters.role=o),label:"Perfil",items:t.roleOptions,variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1}),l(c,{cols:"12",sm:"6",md:"3"},{default:a(()=>[l(J,{modelValue:t.filters.isActive,"onUpdate:modelValue":e[3]||(e[3]=o=>t.filters.isActive=o),label:"Status",items:t.statusOptions,variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),l(c,{cols:"12",sm:"6",md:"3"},{default:a(()=>[s("div",Vt,[l(U,{color:"primary",variant:"outlined",onClick:t.applyFilters},{default:a(()=>[...e[33]||(e[33]=[n(" Aplicar ",-1)])]),_:1}),l(U,{variant:"outlined",onClick:t.clearFilters},{default:a(()=>[...e[34]||(e[34]=[n(" Limpar ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),l(A,null,{default:a(()=>[l(h,{class:"d-flex justify-space-between align-center"},{default:a(()=>[s("span",null,"Usuários ("+m(t.users.length)+")",1),s("div",Ut,[l(U,{variant:"outlined","prepend-icon":"mdi-download",onClick:t.exportUsers},{default:a(()=>[...e[35]||(e[35]=[n(" Exportar ",-1)])]),_:1})])]),_:1}),l(Ge,{headers:t.headers,items:t.users,loading:t.loading,class:"elevation-0","no-data-text":"Nenhum usuário encontrado"},{"item.fullName":a(({item:o})=>[s("div",xt,[l(F,{size:"32",color:o.avatarUrl?void 0:"primary",class:"me-3"},{default:a(()=>[o.avatarUrl?(V(),b(re,{key:0,src:o.avatarUrl,alt:o.fullName},null,8,["src","alt"])):(V(),M("span",Dt,m(t.getInitials(o.fullName)),1))]),_:2},1032,["color"]),s("div",null,[s("div",yt,m(o.fullName),1),s("div",wt,m(o.username),1)])])]),"item.role":a(({item:o})=>[l(N,{size:"small",color:t.getRoleColor(o.role),"prepend-icon":t.getRoleIcon(o.role)},{default:a(()=>[n(m(t.getRoleDisplayName(o.role)),1)]),_:2},1032,["color","prepend-icon"])]),"item.isActive":a(({item:o})=>[l(N,{size:"small",color:t.getStatusColor(o.isActive)},{default:a(()=>[n(m(t.getStatusText(o.isActive)),1)]),_:2},1032,["color"])]),"item.emailVerifiedAt":a(({item:o})=>[o.emailVerifiedAt?(V(),b(N,{key:0,size:"small",color:"success","prepend-icon":"mdi-email-check"},{default:a(()=>[...e[36]||(e[36]=[n(" Verificado ",-1)])]),_:1})):(V(),b(N,{key:1,size:"small",color:"warning","prepend-icon":"mdi-email-alert"},{default:a(()=>[...e[37]||(e[37]=[n(" Pendente ",-1)])]),_:1}))]),"item.lastLoginAt":a(({item:o})=>[o.lastLoginAt?(V(),M("span",bt,m(t.formatDate(o.lastLoginAt)),1)):(V(),M("span",At," Nunca "))]),"item.createdAt":a(({item:o})=>[n(m(t.formatDate(o.createdAt)),1)]),"item.actions":a(({item:o})=>[s("div",Rt,[l(U,{icon:"mdi-eye",size:"small",variant:"text",onClick:x=>t.viewUserDetails(o)},null,8,["onClick"]),t.isDemoUser?z("",!0):(V(),b(U,{key:0,icon:"mdi-pencil",size:"small",variant:"text",onClick:x=>t.editUser(o)},null,8,["onClick"])),t.isDemoUser?z("",!0):(V(),b(U,{key:1,icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:x=>t.confirmDelete(o)},null,8,["onClick"]))])]),_:2},1032,["items","loading"])]),_:1}),l(K,{modelValue:t.showCreateDialog,"onUpdate:modelValue":e[13]||(e[13]=o=>t.showCreateDialog=o),"max-width":"600",persistent:""},{default:a(()=>[l(A,null,{default:a(()=>[l(h,null,{default:a(()=>[n(m(t.editingUser?"Editar Usuário":"Novo Usuário"),1)]),_:1}),l(B,null,{default:a(()=>[l(Be,{ref:"userForm",modelValue:t.formValid,"onUpdate:modelValue":e[12]||(e[12]=o=>t.formValid=o)},{default:a(()=>[l(Y,null,{default:a(()=>[l(c,{cols:"12",sm:"6"},{default:a(()=>[l(q,{modelValue:t.userFormData.fullName,"onUpdate:modelValue":e[4]||(e[4]=o=>t.userFormData.fullName=o),label:"Nome Completo",rules:[t.requiredRule],variant:"outlined",required:""},null,8,["modelValue","rules"])]),_:1}),l(c,{cols:"12",sm:"6"},{default:a(()=>[l(q,{modelValue:t.userFormData.username,"onUpdate:modelValue":e[5]||(e[5]=o=>t.userFormData.username=o),label:"Nome de Usuário",rules:[t.requiredRule,t.usernameRule],variant:"outlined",required:""},null,8,["modelValue","rules"])]),_:1}),l(c,{cols:"12"},{default:a(()=>[l(q,{modelValue:t.userFormData.email,"onUpdate:modelValue":e[6]||(e[6]=o=>t.userFormData.email=o),label:"Email",rules:[t.requiredRule,t.emailRule],variant:"outlined",type:"email",required:""},null,8,["modelValue","rules"])]),_:1}),t.editingUser?z("",!0):(V(),b(c,{key:0,cols:"12"},{default:a(()=>[l(q,{modelValue:t.userFormData.password,"onUpdate:modelValue":e[7]||(e[7]=o=>t.userFormData.password=o),label:"Senha",rules:[t.requiredRule,t.passwordRule],variant:"outlined",type:"password",required:""},null,8,["modelValue","rules"])]),_:1})),l(c,{cols:"12",sm:"6"},{default:a(()=>[l(J,{modelValue:t.userFormData.role,"onUpdate:modelValue":e[8]||(e[8]=o=>t.userFormData.role=o),label:"Perfil",items:t.roleSelectOptions,rules:[t.requiredRule],variant:"outlined",required:""},null,8,["modelValue","items","rules"])]),_:1}),l(c,{cols:"12",sm:"6"},{default:a(()=>[l(J,{modelValue:t.userFormData.language,"onUpdate:modelValue":e[9]||(e[9]=o=>t.userFormData.language=o),label:"Idioma",items:t.languageOptions,variant:"outlined"},null,8,["modelValue","items"])]),_:1}),l(c,{cols:"12"},{default:a(()=>[l(J,{modelValue:t.userFormData.timezone,"onUpdate:modelValue":e[10]||(e[10]=o=>t.userFormData.timezone=o),label:"Fuso Horário",items:t.timezoneOptions,variant:"outlined"},null,8,["modelValue","items"])]),_:1}),l(c,{cols:"12"},{default:a(()=>[l(qe,{modelValue:t.userFormData.isActive,"onUpdate:modelValue":e[11]||(e[11]=o=>t.userFormData.isActive=o),label:"Usuário Ativo",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(W,null,{default:a(()=>[l(X),l(U,{onClick:t.closeCreateDialog},{default:a(()=>[...e[38]||(e[38]=[n(" Cancelar ",-1)])]),_:1}),l(U,{color:"primary",loading:t.saving,disabled:!t.formValid,onClick:t.saveUser},{default:a(()=>[n(m(t.editingUser?"Atualizar":"Criar"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(K,{modelValue:t.showDetailsDialog,"onUpdate:modelValue":e[16]||(e[16]=o=>t.showDetailsDialog=o),"max-width":"600"},{default:a(()=>[t.selectedUser?(V(),b(A,{key:0},{default:a(()=>[l(h,{class:"d-flex align-center"},{default:a(()=>[l(F,{size:"40",color:t.selectedUser.avatarUrl?void 0:"primary",class:"me-3"},{default:a(()=>[t.selectedUser.avatarUrl?(V(),b(re,{key:0,src:t.selectedUser.avatarUrl,alt:t.selectedUser.fullName},null,8,["src","alt"])):(V(),M("span",Ct,m(t.getInitials(t.selectedUser.fullName)),1))]),_:1},8,["color"]),s("div",null,[s("div",_t,m(t.selectedUser.fullName),1),s("div",Et,m(t.selectedUser.username),1)])]),_:1}),l(B,null,{default:a(()=>[l(Y,null,{default:a(()=>[l(c,{cols:"12",sm:"6"},{default:a(()=>[s("div",St,[e[39]||(e[39]=s("div",{class:"text-caption text-medium-emphasis"},"Email",-1)),s("div",null,m(t.selectedUser.email),1)])]),_:1}),l(c,{cols:"12",sm:"6"},{default:a(()=>[s("div",kt,[e[40]||(e[40]=s("div",{class:"text-caption text-medium-emphasis"},"Perfil",-1)),l(N,{size:"small",color:t.getRoleColor(t.selectedUser.role),"prepend-icon":t.getRoleIcon(t.selectedUser.role)},{default:a(()=>[n(m(t.getRoleDisplayName(t.selectedUser.role)),1)]),_:1},8,["color","prepend-icon"])])]),_:1}),l(c,{cols:"12",sm:"6"},{default:a(()=>[s("div",Nt,[e[41]||(e[41]=s("div",{class:"text-caption text-medium-emphasis"},"Status",-1)),l(N,{size:"small",color:t.getStatusColor(t.selectedUser.isActive)},{default:a(()=>[n(m(t.getStatusText(t.selectedUser.isActive)),1)]),_:1},8,["color"])])]),_:1}),l(c,{cols:"12",sm:"6"},{default:a(()=>[s("div",It,[e[42]||(e[42]=s("div",{class:"text-caption text-medium-emphasis"},"Email Verificado",-1)),l(N,{size:"small",color:t.selectedUser.emailVerifiedAt?"success":"warning","prepend-icon":t.selectedUser.emailVerifiedAt?"mdi-email-check":"mdi-email-alert"},{default:a(()=>[n(m(t.selectedUser.emailVerifiedAt?"Sim":"Não"),1)]),_:1},8,["color","prepend-icon"])])]),_:1}),l(c,{cols:"12",sm:"6"},{default:a(()=>[s("div",Pt,[e[43]||(e[43]=s("div",{class:"text-caption text-medium-emphasis"},"Idioma",-1)),s("div",null,m(t.selectedUser.language||"pt-BR"),1)])]),_:1}),l(c,{cols:"12",sm:"6"},{default:a(()=>[s("div",zt,[e[44]||(e[44]=s("div",{class:"text-caption text-medium-emphasis"},"Fuso Horário",-1)),s("div",null,m(t.selectedUser.timezone||"America/Sao_Paulo"),1)])]),_:1}),l(c,{cols:"12",sm:"6"},{default:a(()=>[s("div",Ft,[e[45]||(e[45]=s("div",{class:"text-caption text-medium-emphasis"},"Último Login",-1)),s("div",null,m(t.selectedUser.lastLoginAt?t.formatDate(t.selectedUser.lastLoginAt):"Nunca"),1)])]),_:1}),l(c,{cols:"12",sm:"6"},{default:a(()=>[s("div",ht,[e[46]||(e[46]=s("div",{class:"text-caption text-medium-emphasis"},"Criado em",-1)),s("div",null,m(t.formatDate(t.selectedUser.createdAt)),1)])]),_:1})]),_:1})]),_:1}),l(W,null,{default:a(()=>[l(X),l(U,{onClick:e[14]||(e[14]=o=>t.showDetailsDialog=!1)},{default:a(()=>[...e[47]||(e[47]=[n(" Fechar ",-1)])]),_:1}),t.isDemoUser?z("",!0):(V(),b(U,{key:0,color:"primary",onClick:e[15]||(e[15]=o=>t.editUser(t.selectedUser))},{default:a(()=>[...e[48]||(e[48]=[n(" Editar ",-1)])]),_:1}))]),_:1})]),_:1})):z("",!0)]),_:1},8,["modelValue"]),l(K,{modelValue:t.showDeleteDialog,"onUpdate:modelValue":e[18]||(e[18]=o=>t.showDeleteDialog=o),"max-width":"400"},{default:a(()=>[l(A,null,{default:a(()=>[l(h,null,{default:a(()=>[...e[49]||(e[49]=[n("Confirmar Exclusão",-1)])]),_:1}),l(B,null,{default:a(()=>[e[50]||(e[50]=n(" Tem certeza que deseja excluir o usuário ",-1)),s("strong",null,m(t.userToDelete?.fullName),1),e[51]||(e[51]=n("? Esta ação não pode ser desfeita. ",-1))]),_:1}),l(W,null,{default:a(()=>[l(X),l(U,{onClick:e[17]||(e[17]=o=>t.showDeleteDialog=!1)},{default:a(()=>[...e[52]||(e[52]=[n("Cancelar",-1)])]),_:1}),l(U,{color:"error",onClick:t.executeDelete,loading:t.deleting},{default:a(()=>[...e[53]||(e[53]=[n("Excluir",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(K,{modelValue:t.showExportDialog,"onUpdate:modelValue":e[21]||(e[21]=o=>t.showExportDialog=o),"max-width":"400"},{default:a(()=>[l(A,null,{default:a(()=>[l(h,null,{default:a(()=>[...e[54]||(e[54]=[n("Exportar Usuários",-1)])]),_:1}),l(B,null,{default:a(()=>[l(rt,{modelValue:t.exportFormat,"onUpdate:modelValue":e[19]||(e[19]=o=>t.exportFormat=o)},{default:a(()=>[l(de,{label:"CSV",value:"csv"}),l(de,{label:"JSON",value:"json"})]),_:1},8,["modelValue"])]),_:1}),l(W,null,{default:a(()=>[l(X),l(U,{onClick:e[20]||(e[20]=o=>t.showExportDialog=!1)},{default:a(()=>[...e[55]||(e[55]=[n("Cancelar",-1)])]),_:1}),l(U,{color:"primary",onClick:t.executeExport,loading:t.exporting},{default:a(()=>[...e[56]||(e[56]=[n("Exportar",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ml=Oe(at,[["render",Lt],["__scopeId","data-v-93f04328"],["__file","D:/Development/Projetos/Mira/mira-client/src/views/users/UsersView.vue"]]);export{ml as default};
