import{k as G,Q as g,T as t,S as n,q as a,z as l,X as p,_ as x,a4 as r,a1 as c,x as ae,Z as le,F as U,a8 as M,W as se,f as D,r as ie,w as oe,E as re}from"./vendor-vue-BvKyvIVR.js";import{s as C}from"./specialists-UonPH132.js";import{u as Q,a as _}from"./VChip-BzUv3cXC.js";import{_ as W}from"./index-CQBjCOQw.js";import{j as T,k as z,f as E,p as ne,o as de}from"./VGrid-CuJrScxf.js";import{V as m}from"./VIcon-CM-KW5Qw.js";import{V as ce}from"./VMenu-B2XC7rkF.js";import{a as ue,b as j,c as I,V as me}from"./VList-CaAoEaF2.js";import{V as q}from"./VSpacer-kp13s616.js";import{V as fe}from"./VRating-CWbKRju-.js";import{V as R,a as v}from"./VRow-C_rLTo1r.js";import{V as ve}from"./VPagination-C7VPvwfo.js";import{V as ge,a as B}from"./VSelect-JVxEisdn.js";import{V as pe}from"./VSwitch-K3EdCM7X.js";import"./auth-PiWOMLtm.js";import"./vendor-utils-Cfk84l6i.js";import"./token-storage.service-BqAv9k07.js";import"./vendor-ui-Dz8XL-co.js";import"./tag-Bnbpnddf.js";import"./dimensions-DVh0fwa7.js";import"./lazy-DADzjSlN.js";import"./forwardRefs-D_qxKlPu.js";import"./ssrBoot-COakMcr6.js";import"./autofocus-Bh6bNAdk.js";const ye=G({__name:"SpecialistCard",props:{specialist:{type:Object,required:!0}},emits:["click","edit","duplicate","toggle-active","delete"],setup(b,{expose:e}){e();const{isDemoUser:i}=Q(),w={isDemoUser:i,getTypeIcon:d=>({language:"mdi-code-tags",framework:"mdi-application-cog",security:"mdi-shield-check",custom:"mdi-cog"})[d]||"mdi-help-circle",getTypeColor:d=>({language:"primary",framework:"success",security:"error",custom:"purple"})[d]||"grey",getTypeLabel:d=>({language:"Linguagem",framework:"Framework",security:"Segurança",custom:"Personalizado"})[d],getStatusColor:d=>{switch(d){case"active":return"success";case"inactive":return"error";case"draft":return"warning";default:return"grey"}},getStatusLabel:d=>({active:"Ativo",inactive:"Inativo",draft:"Rascunho"})[d],formatRelativeTime:d=>{const F=new Date().getTime()-new Date(d).getTime(),P=Math.floor(F/(1e3*60*60)),f=Math.floor(P/24);return f>0?`há ${f}d`:P>0?`há ${P}h`:"agora"}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),_e={class:"d-flex align-center justify-space-between mb-3"},xe={class:"d-flex align-center"},be={class:"mb-3"},ke={class:"text-h6 font-weight-bold text-truncate mb-1"},Ve={class:"d-flex align-center"},we={class:"text-body-2 text-grey-darken-1"},Se={class:"mb-3"},Ce={class:"d-flex flex-wrap gap-1"},Te={class:"mb-3"},ze={class:"d-flex justify-space-between text-caption"},De={class:"d-flex align-center"},he={class:"d-flex align-center"},Ae={class:"d-flex align-center"},Pe={key:0,class:"mb-3"},Ee={class:"d-flex flex-wrap gap-1"},Le={class:"d-flex align-center justify-space-between"},je={class:"d-flex align-center"},Ie={class:"text-caption"},Ue={class:"d-flex align-center gap-2"},Me={key:1,class:"mt-3"},Fe={class:"d-flex flex-wrap gap-1"},Oe={class:"text-caption text-grey-darken-1"},Re={class:"d-flex align-center"};function Be(b,e,i,s,h,A){return n(),g(T,{class:"specialist-card h-100",variant:"outlined",hover:"",onClick:e[5]||(e[5]=o=>b.$emit("click"))},{default:t(()=>[a(z,{class:"pb-2"},{default:t(()=>[l("div",_e,[l("div",xe,[a(m,{color:s.getTypeColor(i.specialist.type),size:"24",class:"mr-2"},{default:t(()=>[r(c(s.getTypeIcon(i.specialist.type)),1)]),_:1},8,["color"]),a(_,{color:s.getTypeColor(i.specialist.type),size:"small",variant:"tonal"},{default:t(()=>[r(c(s.getTypeLabel(i.specialist.type)),1)]),_:1},8,["color"])]),s.isDemoUser?x("",!0):(n(),g(ce,{key:0},{activator:t(({props:o})=>[a(E,ae({icon:"mdi-dots-vertical",variant:"text",size:"small"},o,{onClick:e[0]||(e[0]=le(()=>{},["stop"]))}),null,16)]),default:t(()=>[a(ue,null,{default:t(()=>[a(j,{onClick:e[1]||(e[1]=o=>b.$emit("edit",i.specialist.id))},{prepend:t(()=>[a(m,null,{default:t(()=>[...e[6]||(e[6]=[r("mdi-pencil",-1)])]),_:1})]),default:t(()=>[a(I,null,{default:t(()=>[...e[7]||(e[7]=[r("Editar",-1)])]),_:1})]),_:1}),a(j,{onClick:e[2]||(e[2]=o=>b.$emit("duplicate",i.specialist.id))},{prepend:t(()=>[a(m,null,{default:t(()=>[...e[8]||(e[8]=[r("mdi-content-copy",-1)])]),_:1})]),default:t(()=>[a(I,null,{default:t(()=>[...e[9]||(e[9]=[r("Duplicar",-1)])]),_:1})]),_:1}),a(j,{onClick:e[3]||(e[3]=o=>b.$emit("toggle-active",i.specialist.id,!i.specialist.isActive))},{prepend:t(()=>[a(m,null,{default:t(()=>[r(c(i.specialist.isActive?"mdi-pause":"mdi-play"),1)]),_:1})]),default:t(()=>[a(I,null,{default:t(()=>[r(c(i.specialist.isActive?"Desativar":"Ativar"),1)]),_:1})]),_:1}),a(me),a(j,{onClick:e[4]||(e[4]=o=>b.$emit("delete",i.specialist.id)),class:"text-error"},{prepend:t(()=>[a(m,{color:"error"},{default:t(()=>[...e[10]||(e[10]=[r("mdi-delete",-1)])]),_:1})]),default:t(()=>[a(I,null,{default:t(()=>[...e[11]||(e[11]=[r("Excluir",-1)])]),_:1})]),_:1})]),_:1})]),_:1}))]),l("div",be,[l("div",ke,c(i.specialist.name),1),l("div",Ve,[a(m,{size:"16",class:"mr-1"},{default:t(()=>[...e[12]||(e[12]=[r("mdi-code-tags",-1)])]),_:1}),l("span",we,c(i.specialist.language),1),a(q),a(_,{color:s.getStatusColor(i.specialist.status),size:"x-small",variant:"tonal"},{default:t(()=>[r(c(s.getStatusLabel(i.specialist.status)),1)]),_:1},8,["color"])])]),l("div",Se,[e[13]||(e[13]=l("div",{class:"text-subtitle-2 font-weight-bold mb-1"},"Extensões",-1)),l("div",Ce,[(n(!0),p(U,null,M(i.specialist.extensions.slice(0,4),o=>(n(),g(_,{key:o,size:"x-small",variant:"outlined",color:"primary"},{default:t(()=>[r(c(o),1)]),_:2},1024))),128)),i.specialist.extensions.length>4?(n(),g(_,{key:0,size:"x-small",variant:"text",color:"grey"},{default:t(()=>[r(" +"+c(i.specialist.extensions.length-4),1)]),_:1})):x("",!0)])]),l("div",Te,[e[17]||(e[17]=l("div",{class:"text-subtitle-2 font-weight-bold mb-1"},"Padrões de Análise",-1)),l("div",ze,[l("div",De,[a(m,{size:"12",color:"error",class:"mr-1"},{default:t(()=>[...e[14]||(e[14]=[r("mdi-shield",-1)])]),_:1}),l("span",null,c(i.specialist.patterns.security.length)+" segurança",1)]),l("div",he,[a(m,{size:"12",color:"warning",class:"mr-1"},{default:t(()=>[...e[15]||(e[15]=[r("mdi-speedometer",-1)])]),_:1}),l("span",null,c(i.specialist.patterns.performance.length)+" performance",1)]),l("div",Ae,[a(m,{size:"12",color:"info",class:"mr-1"},{default:t(()=>[...e[16]||(e[16]=[r("mdi-check-circle",-1)])]),_:1}),l("span",null,c(i.specialist.patterns.quality.length)+" qualidade",1)])])]),i.specialist.frameworks?.length?(n(),p("div",Pe,[e[18]||(e[18]=l("div",{class:"text-subtitle-2 font-weight-bold mb-1"},"Frameworks",-1)),l("div",Ee,[(n(!0),p(U,null,M(i.specialist.frameworks.slice(0,3),o=>(n(),g(_,{key:o.name,size:"small",variant:"tonal",color:"success"},{default:t(()=>[r(c(o.name),1)]),_:2},1024))),128)),i.specialist.frameworks.length>3?(n(),g(_,{key:0,size:"small",variant:"text",color:"grey"},{default:t(()=>[r(" +"+c(i.specialist.frameworks.length-3),1)]),_:1})):x("",!0)])])):x("",!0),l("div",Le,[l("div",je,[a(m,{color:i.specialist.isActive?"success":"error",size:"12",class:"mr-1"},{default:t(()=>[...e[19]||(e[19]=[r(" mdi-circle ",-1)])]),_:1},8,["color"]),l("span",Ie,c(i.specialist.isActive?"Ativo":"Inativo"),1)]),l("div",Ue,[a(_,{size:"x-small",variant:"outlined",color:"grey"},{default:t(()=>[r(" v"+c(i.specialist.version),1)]),_:1}),i.specialist.isGlobal?(n(),g(_,{key:0,size:"x-small",variant:"tonal",color:"purple"},{default:t(()=>[...e[20]||(e[20]=[r(" Global ",-1)])]),_:1})):x("",!0)])]),i.specialist.tags?.length?(n(),p("div",Me,[l("div",Fe,[(n(!0),p(U,null,M(i.specialist.tags.slice(0,3),o=>(n(),g(_,{key:o,size:"x-small",variant:"outlined",color:"grey"},{default:t(()=>[r(" # "+c(o),1)]),_:2},1024))),128))])])):x("",!0)]),_:1}),a(ne,{class:"pt-0"},{default:t(()=>[l("div",Oe," Atualizado "+c(s.formatRelativeTime(i.specialist.updatedAt)),1),a(q),l("div",Re,[e[21]||(e[21]=l("span",{class:"text-caption text-grey-darken-1 mr-1"},"Prioridade:",-1)),a(fe,{"model-value":Math.min(i.specialist.priority,5),density:"compact",size:"x-small",readonly:"",color:"orange"},null,8,["model-value"])])]),_:1})]),_:1})}const Ne=W(ye,[["render",Be],["__scopeId","data-v-f718aeff"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/experts/SpecialistCard.vue"]]),k="b1e58ac3-6a88-4fc3-846d-352c8ca4a1db",qe=G({__name:"ExpertsView",setup(b,{expose:e}){e();const i=se(),{isDemoUser:s}=Q(),h=D({data:[],meta:{total:0,page:1,limit:12,totalPages:0}}),A=D(null),o=D([]),V=D(!1),L=D(null),w=D(1),d=ie({search:"",type:void 0,status:void 0,language:void 0,isActive:void 0,page:1,limit:12});let y=null;oe(d,()=>{d.page=1,w.value=1,y&&clearTimeout(y),y=setTimeout(()=>{f(),y=null},350)},{deep:!0});const F=[{title:"Linguagem",value:"language"},{title:"Framework",value:"framework"},{title:"Segurança",value:"security"},{title:"Personalizado",value:"custom"}],P=[{title:"Ativo",value:"active"},{title:"Inativo",value:"inactive"},{title:"Rascunho",value:"draft"}],f=async()=>{V.value=!0,L.value=null;try{const[u,S,O]=await Promise.all([C.getSpecialists(k,d),C.getStats(k),C.getLanguages(k)]);h.value=u,A.value=S,o.value=O}catch(u){console.error("Erro ao carregar dados:",u),L.value=u instanceof Error?u.message:"Erro ao carregar dados"}finally{V.value=!1}},X=()=>{f()},Z=()=>{d.search="",d.type=void 0,d.status=void 0,d.language=void 0,d.isActive=void 0,w.value=1,d.page=1,f()},H=u=>{w.value=u,d.page=u,f()},J=u=>{i.push(`/experts/${u}`)},K=()=>{i.push("/experts/add")},Y=u=>{i.push(`/experts/${u}/edit`)},$=async u=>{try{await C.duplicateSpecialist(k,u),f()}catch(S){console.error("Erro ao duplicar especialista:",S)}},ee=async(u,S)=>{try{S?await C.activateSpecialist(k,u):await C.deactivateSpecialist(k,u),f()}catch(O){console.error("Erro ao alterar status:",O)}},te=async u=>{try{await C.deleteSpecialist(k,u),f()}catch(S){console.error("Erro ao deletar especialista:",S)}};re(()=>{f()});const N={router:i,isDemoUser:s,organizationId:k,specialists:h,stats:A,availableLanguages:o,loading:V,error:L,currentPage:w,filters:d,get filterTimer(){return y},set filterTimer(u){y=u},typeOptions:F,statusOptions:P,loadData:f,refreshData:X,clearFilters:Z,onPageChange:H,viewSpecialistDetails:J,createSpecialist:K,editSpecialist:Y,duplicateSpecialist:$,toggleActive:ee,deleteSpecialist:te,SpecialistCard:Ne};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}}),Ge={class:"specialists-page"},Qe={class:"d-flex align-center justify-space-between mb-6"},We={class:"d-flex align-center gap-3"},Xe={class:"d-flex align-center"},Ze={class:"text-h5 font-weight-bold"},He={class:"d-flex align-center"},Je={class:"text-h5 font-weight-bold"},Ke={class:"d-flex align-center"},Ye={class:"text-h5 font-weight-bold"},$e={class:"d-flex align-center"},et={class:"text-h5 font-weight-bold"},tt={key:0,class:"text-center py-8"},at={key:1,class:"text-center py-8"},lt={class:"text-body-2 text-grey-darken-1 mb-4"},st={class:"text-body-2 text-grey-darken-1"},it={key:0},ot={key:1},rt={key:3,class:"d-flex justify-center mt-6"};function nt(b,e,i,s,h,A){return n(),p("div",Ge,[l("div",Qe,[e[8]||(e[8]=l("div",null,[l("h1",{class:"text-h4 font-weight-bold text-grey-darken-3 mb-2"}," Especialistas de IA "),l("p",{class:"text-body-1 text-grey-darken-1"}," Gerencie os especialistas de IA para análise de código ")],-1)),l("div",We,[a(E,{color:"primary","prepend-icon":"mdi-refresh",onClick:s.refreshData,loading:s.loading},{default:t(()=>[...e[6]||(e[6]=[r(" Atualizar ",-1)])]),_:1},8,["loading"]),s.isDemoUser?x("",!0):(n(),g(E,{key:0,color:"success","prepend-icon":"mdi-plus",variant:"elevated",onClick:s.createSpecialist},{default:t(()=>[...e[7]||(e[7]=[r(" Criar Especialista ",-1)])]),_:1}))])]),a(R,{class:"mb-6"},{default:t(()=>[a(v,{cols:"12",sm:"6",md:"3"},{default:t(()=>[a(T,{color:"primary",variant:"tonal"},{default:t(()=>[a(z,null,{default:t(()=>[l("div",Xe,[a(m,{size:"32",class:"mr-3"},{default:t(()=>[...e[9]||(e[9]=[r("mdi-robot",-1)])]),_:1}),l("div",null,[l("div",Ze,c(s.stats?.total||0),1),e[10]||(e[10]=l("div",{class:"text-caption"},"Total de Especialistas",-1))])])]),_:1})]),_:1})]),_:1}),a(v,{cols:"12",sm:"6",md:"3"},{default:t(()=>[a(T,{color:"success",variant:"tonal"},{default:t(()=>[a(z,null,{default:t(()=>[l("div",He,[a(m,{size:"32",class:"mr-3"},{default:t(()=>[...e[11]||(e[11]=[r("mdi-check-circle",-1)])]),_:1}),l("div",null,[l("div",Je,c(s.stats?.active||0),1),e[12]||(e[12]=l("div",{class:"text-caption"},"Ativos",-1))])])]),_:1})]),_:1})]),_:1}),a(v,{cols:"12",sm:"6",md:"3"},{default:t(()=>[a(T,{color:"warning",variant:"tonal"},{default:t(()=>[a(z,null,{default:t(()=>[l("div",Ke,[a(m,{size:"32",class:"mr-3"},{default:t(()=>[...e[13]||(e[13]=[r("mdi-pause-circle",-1)])]),_:1}),l("div",null,[l("div",Ye,c(s.stats?.inactive||0),1),e[14]||(e[14]=l("div",{class:"text-caption"},"Inativos",-1))])])]),_:1})]),_:1})]),_:1}),a(v,{cols:"12",sm:"6",md:"3"},{default:t(()=>[a(T,{color:"info",variant:"tonal"},{default:t(()=>[a(z,null,{default:t(()=>[l("div",$e,[a(m,{size:"32",class:"mr-3"},{default:t(()=>[...e[15]||(e[15]=[r("mdi-earth",-1)])]),_:1}),l("div",null,[l("div",et,c(s.stats?.byType?Object.values(s.stats.byType).reduce((o,V)=>o+V,0):0),1),e[16]||(e[16]=l("div",{class:"text-caption"},"Globais",-1))])])]),_:1})]),_:1})]),_:1})]),_:1}),a(T,{class:"mb-6"},{default:t(()=>[a(z,null,{default:t(()=>[a(R,null,{default:t(()=>[a(v,{cols:"12",md:"3"},{default:t(()=>[a(ge,{modelValue:s.filters.search,"onUpdate:modelValue":e[0]||(e[0]=o=>s.filters.search=o),label:"Buscar especialistas","prepend-inner-icon":"mdi-magnify",clearable:"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),a(v,{cols:"12",md:"2"},{default:t(()=>[a(B,{modelValue:s.filters.type,"onUpdate:modelValue":e[1]||(e[1]=o=>s.filters.type=o),items:s.typeOptions,"item-title":"title","item-value":"value",label:"Tipo",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),a(v,{cols:"12",md:"2"},{default:t(()=>[a(B,{modelValue:s.filters.status,"onUpdate:modelValue":e[2]||(e[2]=o=>s.filters.status=o),items:s.statusOptions,"item-title":"title","item-value":"value",label:"Status",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),a(v,{cols:"12",md:"2"},{default:t(()=>[a(B,{modelValue:s.filters.language,"onUpdate:modelValue":e[3]||(e[3]=o=>s.filters.language=o),items:s.availableLanguages,label:"Linguagem",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1}),a(v,{cols:"12",md:"2"},{default:t(()=>[a(pe,{modelValue:s.filters.isActive,"onUpdate:modelValue":e[4]||(e[4]=o=>s.filters.isActive=o),label:"Apenas ativos",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),a(v,{cols:"12",md:"1"},{default:t(()=>[a(E,{icon:"mdi-filter-off",variant:"outlined",onClick:s.clearFilters,title:"Limpar filtros"})]),_:1})]),_:1})]),_:1})]),_:1}),s.loading?(n(),p("div",tt,[a(de,{indeterminate:"",color:"primary",size:"64"}),e[17]||(e[17]=l("div",{class:"mt-4 text-body-1"},"Carregando especialistas...",-1))])):s.error?(n(),p("div",at,[a(m,{size:"64",color:"error",class:"mb-4"},{default:t(()=>[...e[18]||(e[18]=[r("mdi-alert-circle",-1)])]),_:1}),e[20]||(e[20]=l("div",{class:"text-h6 mb-2"},"Erro ao carregar dados",-1)),l("div",lt,c(s.error),1),a(E,{color:"primary",onClick:s.refreshData},{default:t(()=>[...e[19]||(e[19]=[r("Tentar Novamente",-1)])]),_:1})])):(n(),g(R,{key:2},{default:t(()=>[(n(!0),p(U,null,M(s.specialists.data,o=>(n(),g(v,{key:o.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:t(()=>[a(s.SpecialistCard,{specialist:o,onClick:V=>s.viewSpecialistDetails(o.id),onEdit:s.editSpecialist,onDuplicate:s.duplicateSpecialist,onToggleActive:s.toggleActive,onDelete:s.deleteSpecialist},null,8,["specialist","onClick"])]),_:2},1024))),128)),s.specialists.data?.length?x("",!0):(n(),g(v,{key:0,cols:"12"},{default:t(()=>[a(T,{class:"text-center py-8"},{default:t(()=>[a(z,null,{default:t(()=>[a(m,{size:"64",color:"grey",class:"mb-4"},{default:t(()=>[...e[21]||(e[21]=[r("mdi-robot",-1)])]),_:1}),e[22]||(e[22]=l("div",{class:"text-h6 mb-2"},"Nenhum especialista encontrado",-1)),l("div",st,[s.isDemoUser?(n(),p("span",ot,"Tente ajustar os filtros para encontrar especialistas")):(n(),p("span",it,"Tente ajustar os filtros ou criar um novo especialista"))])]),_:1})]),_:1})]),_:1}))]),_:1})),s.specialists.meta.totalPages>1?(n(),p("div",rt,[a(ve,{modelValue:s.currentPage,"onUpdate:modelValue":[e[5]||(e[5]=o=>s.currentPage=o),s.onPageChange],length:s.specialists.meta.totalPages},null,8,["modelValue","length"])])):x("",!0)])}const Lt=W(qe,[["render",nt],["__scopeId","data-v-c0feefc4"],["__file","D:/Development/Projetos/Mira/mira-client/src/views/experts/ExpertsView.vue"]]);export{Lt as default};
