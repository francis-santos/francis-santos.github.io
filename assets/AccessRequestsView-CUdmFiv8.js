import{j as xe,d as c,r as Ae,h as le,w as ke,D as Ve,Z as V,y as t,n as a,a1 as s,_ as m,aa as i,V as n,$ as x,a0 as p,u,U as we,Y as Ce}from"./vendor-vue-BKuzT1x2.js";import{a as f}from"./access-request.service-HkwY3PVP.js";import{o as he}from"./organizations-Hcfct8HQ.js";import{u as Se}from"./useDemoMode-DpDjlFnd.js";import{a as D,b as ze,V as Te}from"./VChip-BfcyEr4e.js";import{d as ie}from"./vendor-utils-6xD0fNU8.js";import{V as E,a as v}from"./VRow-C_u8820H.js";import{V as b,e as N,a as j,b as P,c as De}from"./VGrid-CBGRWS1y.js";import{V as ne}from"./VDialog-BfRWf8LZ.js";import{a as r,b as A,_ as je}from"./index-gFSB3kms.js";import{V as ae,a as J}from"./VSelect-BorMXFwi.js";import{V as Pe}from"./VDataTable-CaN6duAr.js";import{V as Ie}from"./VTextarea-CqCSgYZa.js";import{V as qe}from"./VAlert-BZmB2o6G.js";import{V as Re}from"./VSpacer-CTPiANoM.js";import"./auth.service-BozCwdnf.js";import"./token-storage.service-BqAv9k07.js";import"./auth--EmZq-C7.js";import"./vendor-ui-Ca7vMALJ.js";import"./dialog-transition-B8nu4acL.js";import"./autofocus-Cv2p5X6o.js";import"./form-PEXhLZdP.js";import"./VList-Dg4abNUz.js";import"./ssrBoot-DJyMk-ri.js";import"./VMenu-BCjbZdow.js";import"./VPagination-B83tja3x.js";import"./VTable-SZOAnLd3.js";import"./filter-BaTOFc6H.js";const Ue={class:"access-requests-page pa-6"},Ne={class:"d-flex align-center"},Oe={class:"text-h5 font-weight-bold"},Ze={class:"d-flex align-center"},Fe={class:"text-h5 font-weight-bold"},Ee={class:"d-flex align-center"},Be={class:"text-h5 font-weight-bold"},$e={class:"d-flex align-center"},Me={class:"text-h5 font-weight-bold"},Le={class:"px-4 py-3 d-flex align-center justify-space-between border-b"},Ge={class:"d-flex align-center gap-3"},Qe={class:"d-flex align-center gap-2"},We={class:"px-4 py-4 advanced-filters-section"},He={class:"d-flex align-center gap-3"},Je={class:"d-flex align-center justify-end gap-2"},Ye={class:"organization-info"},Ke={class:"org-name"},Xe={key:0,class:"org-slug"},et={class:"date-info"},tt={class:"date-primary"},at={class:"date-time"},st={class:"action-buttons text-center"},ot={class:"no-data-container"},lt={class:"text-body-2 text-grey-lighten-1"},it={class:"dialog-header"},nt={class:"dialog-header-content"},dt={class:"dialog-icon-wrapper"},rt={class:"dialog-title-section"},ut={class:"dialog-subtitle"},ct={class:"dialog-content"},mt={class:"d-flex align-center mb-4"},vt={class:"text-h6 mb-1"},pt={class:"text-body-2 text-medium-emphasis"},ft={key:0,class:"text-body-2 text-medium-emphasis"},gt={class:"info-item"},bt={class:"info-value"},_t={class:"info-item"},yt={class:"info-value"},xt=["href"],At={class:"info-item"},kt={class:"info-value"},Vt={class:"info-item"},wt={class:"info-value"},Ct={class:"info-item"},ht={class:"info-value"},St={class:"info-item"},zt={class:"info-value font-mono"},Tt={class:"info-item"},Dt={class:"info-value"},jt={class:"pa-4 bg-grey-lighten-4 rounded border"},Pt={class:"text-body-1 mb-0 text-grey-darken-2"},It={class:"pa-3 bg-warning-lighten-4 rounded"},qt={class:"text-body-2 mb-0"},Rt={class:"text-center mb-4"},Ut={class:"text-h6 mt-2"},Nt={class:"text-body-2 text-medium-emphasis"},Ot={class:"mb-3"},Zt={class:"text-body-2 font-mono"},Ft={class:"mb-3"},Et={class:"mb-3"},Bt={class:"text-body-2"},$t={class:"mb-3"},Mt={class:"text-body-2"},Lt={key:0,class:"mb-3"},Gt={class:"text-body-2"},Qt={key:1,class:"mt-4 pa-3 bg-grey-lighten-5 rounded border"},Wt={class:"mb-2"},Ht={class:"text-caption font-mono text-grey-darken-3"},Jt={key:0},Yt={class:"text-caption text-grey-darken-3",style:{"word-break":"break-word"}},Kt={class:"mt-4 pa-3 bg-blue-lighten-5 rounded border"},Xt={class:"text-caption text-blue-darken-1"},ea={key:0},ta={key:1},aa={key:2},sa={key:3},oa={class:"dialog-footer"},la={class:"dialog-actions"},ia={class:"d-flex align-center"},na={class:"request-info"},da={class:"text-body-2 text-medium-emphasis"},ra={class:"text-body-2 text-medium-emphasis"},ua={class:"d-flex align-center"},ca={class:"font-weight-medium"},ma={class:"text-body-2"},va=xe({__name:"AccessRequestsView",setup(pa){const{isDemoUser:h}=Se(),Y=c(!1),B=c(!1),S=c(""),_=c(""),w=c(""),O=c(1),$=c(25),M=c(0),z=c([]),L=c([]),k=Ae({total:0,pending:0,approved:0,rejected:0,thisMonth:0}),I=c(!1),K=c(null),G=c(void 0),Q=c(void 0),Z=c(""),W=c(""),q=c(!1),F=c(!1),l=c(null),C=c(null),g=c("approve"),R=c(""),de=[{title:"Solicitante",key:"fullName",sortable:!0},{title:"Email",key:"email",sortable:!0},{title:"Cargo",key:"position",sortable:!1},{title:"Organização",key:"organization",sortable:!1},{title:"Status",key:"status",sortable:!0},{title:"Data",key:"createdAt",sortable:!0},{title:"Ações",key:"actions",sortable:!1,width:"120px",align:"center"}],re=[{title:"Pendente",value:"pending"},{title:"Aprovada",value:"approved"},{title:"Rejeitada",value:"rejected"},{title:"Expirada",value:"expired"}],ue=[{title:"Desenvolvedor",value:"developer"},{title:"Gerente",value:"manager"},{title:"Analista",value:"analyst"},{title:"Arquiteto",value:"architect"},{title:"Consultor",value:"consultant"},{title:"Professor",value:"professor"}],ce=[{title:"Admin Principal",value:"admin"},{title:"Supervisor",value:"supervisor"},{title:"Sistema Automático",value:"system"}],me=le(()=>L.value.map(d=>({title:d.name,value:d.id}))),H=le(()=>{let d=0;return S.value&&d++,_.value&&d++,w.value&&d++,G.value!==void 0&&d++,Q.value!==void 0&&d++,Z.value&&d++,W.value&&d++,d}),T=ie(()=>{U()},300),U=async d=>{Y.value=!0;try{if(h.value){await new Promise(y=>setTimeout(y,800));let o=[{id:"1",fullName:"João Silva Santos",email:"joao.silva@techcorp.com.br",phone:"(11) 99999-8888",position:"Desenvolvedor Frontend",reason:"Preciso acessar o sistema para implementar análises de código em projetos React da empresa.",status:"pending",organizationId:"1",organization:{id:"1",name:"TechCorp Solutions",slug:"techcorp-solutions",description:"Empresa de desenvolvimento de software"},metadata:{ipAddress:"192.168.1.150",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"},createdAt:"2024-11-15T09:30:00Z",updatedAt:"2024-11-15T09:30:00Z"},{id:"2",fullName:"Maria Oliveira",email:"maria.oliveira@startup.io",position:"Tech Lead",reason:"Nossa equipe precisa integrar o sistema de análise de código no processo de CI/CD.",status:"approved",organizationId:"2",organization:{id:"2",name:"InnovaStart",slug:"innovastart",description:"Startup de tecnologia"},adminComments:"Solicitação aprovada. Acesso liberado para toda a equipe de desenvolvimento.",processedAt:"2024-11-14T16:45:00Z",metadata:{ipAddress:"10.0.0.25"},createdAt:"2024-11-14T14:20:00Z",updatedAt:"2024-11-14T16:45:00Z"},{id:"3",fullName:"Carlos Roberto Lima",email:"carlos.lima@consultoria.net",phone:"(21) 98765-4321",position:"Arquiteto de Software",reason:"Consultoria para cliente necessita de análise de qualidade de código.",status:"rejected",organizationId:"3",organization:{id:"3",name:"DevConsulting Pro",slug:"devconsulting-pro"},adminComments:"Solicitação rejeitada. A organização não possui plano ativo no momento.",processedAt:"2024-11-13T10:15:00Z",metadata:{ipAddress:"203.0.113.45"},createdAt:"2024-11-13T08:30:00Z",updatedAt:"2024-11-13T10:15:00Z"},{id:"4",fullName:"Ana Paula Santos",email:"ana.santos@university.edu.br",position:"Professora de Engenharia de Software",reason:"Uso acadêmico para ensinar boas práticas de desenvolvimento aos alunos.",status:"pending",organizationId:"4",organization:{id:"4",name:"Universidade Federal Tech",slug:"uftech",description:"Instituição de ensino superior"},metadata:{ipAddress:"200.144.0.78"},createdAt:"2024-11-15T11:00:00Z",updatedAt:"2024-11-15T11:00:00Z"},{id:"5",fullName:"Pedro Henrique Costa",email:"pedro.costa@agritech.com.br",phone:"(16) 99988-7766",position:"Desenvolvedor Backend",reason:"Implementar análises de segurança em APIs do sistema de gestão agrícola.",status:"approved",organizationId:"1",organization:{id:"1",name:"TechCorp Solutions",slug:"techcorp-solutions",description:"Empresa de desenvolvimento de software"},adminComments:"Aprovado para uso em projetos específicos da área agrícola.",processedAt:"2024-11-12T14:30:00Z",metadata:{ipAddress:"172.16.0.92"},createdAt:"2024-11-12T10:15:00Z",updatedAt:"2024-11-12T14:30:00Z"}];if(_.value&&(o=o.filter(y=>y.status===_.value)),w.value&&(o=o.filter(y=>y.organizationId===w.value)),S.value){const y=S.value.toLowerCase();o=o.filter(te=>te.fullName.toLowerCase().includes(y)||te.email.toLowerCase().includes(y)||te.organization.name.toLowerCase().includes(y))}z.value=o,M.value=o.length}else{const e={page:O.value,limit:$.value,search:S.value||void 0,status:_.value||void 0,organizationId:w.value||void 0},o=await f.getAccessRequests(e);z.value=o.data,M.value=o.total}}catch(e){console.error("Error loading access requests:",e),z.value=[],M.value=0}finally{Y.value=!1}},ve=async()=>{try{if(h.value){await new Promise(e=>setTimeout(e,500));const d=[{id:"1",name:"TechCorp Solutions",slug:"techcorp-solutions",email:"contato@techcorp.com.br",description:"Empresa de desenvolvimento de software",tier:"professional",status:"active",isActive:!0,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-11-15T14:30:00Z"},{id:"2",name:"InnovaStart",slug:"innovastart",email:"hello@innovastart.io",description:"Startup de tecnologia",tier:"basic",status:"active",isActive:!0,createdAt:"2024-03-20T09:15:00Z",updatedAt:"2024-11-10T16:45:00Z"},{id:"3",name:"DevConsulting Pro",slug:"devconsulting-pro",email:"contato@devconsulting.net",tier:"enterprise",status:"suspended",isActive:!1,createdAt:"2024-02-10T14:20:00Z",updatedAt:"2024-11-08T10:15:00Z"},{id:"4",name:"Universidade Federal Tech",slug:"uftech",email:"sistemas@uftech.edu.br",description:"Instituição de ensino superior",tier:"basic",status:"active",isActive:!0,createdAt:"2024-05-15T12:45:00Z",updatedAt:"2024-10-20T17:10:00Z"}];L.value=d.filter(e=>e.isActive)}else{const d=await he.getOrganizations({isActive:!0,limit:100});L.value=d.data}}catch(d){console.error("Error loading organizations:",d),L.value=[]}},pe=async()=>{try{if(h.value)await new Promise(e=>setTimeout(e,400)),Object.assign(k,{total:47,pending:12,approved:28,rejected:7,expired:0,thisMonth:15});else{const d=await f.getStatistics();Object.assign(k,d)}}catch(d){console.error("Error loading stats:",d),Object.assign(k,{total:0,pending:0,approved:0,rejected:0,expired:0,thisMonth:0})}},X=async()=>{await Promise.all([U(),pe()])},fe=async d=>{O.value=d.page,$.value=d.itemsPerPage,await U()},ge=d=>{l.value=d,q.value=!0},ee=(d,e)=>{C.value=d,g.value=e,R.value="",F.value=!0},se=d=>{l.value&&(q.value=!1,setTimeout(()=>{ee(l.value,d)},300))},be=async()=>{if(C.value){B.value=!0;try{if(h.value){await new Promise(e=>setTimeout(e,1500));const d=z.value.findIndex(e=>e.id===C.value.id);d!==-1&&(z.value[d].status=g.value==="approve"?"approved":"rejected",z.value[d].processedAt=new Date().toISOString(),z.value[d].adminComments=R.value||void 0,g.value==="approve"?(k.pending--,k.approved++):(k.pending--,k.rejected++))}else await f.processAccessRequest(C.value.id,{action:g.value,adminComments:R.value||void 0}),await X();F.value=!1,C.value=null,R.value=""}catch(d){console.error("Error processing request:",d)}finally{B.value=!1}}},_e=ie(U,500);function oe(){S.value="",_.value="",w.value="",G.value=void 0,Q.value=void 0,Z.value="",W.value="",K.value=null,U()}function ye(d){switch(oe(),d){case"pending":_.value="pending";break;case"approved":_.value="approved";break;case"rejected":_.value="rejected";break;case"recent":const e=new Date;e.setDate(e.getDate()-7),Z.value=e.toISOString().split("T")[0];break}d&&T()}return ke([_,w],()=>{O.value=1,U()}),Ve(async()=>{await Promise.all([ve(),X()])}),(d,e)=>(m(),V("div",Ue,[e[79]||(e[79]=t("div",{class:"d-flex justify-space-between align-center mb-6"},[t("div",null,[t("h1",{class:"text-h4 font-weight-bold text-high-emphasis mb-2"}," Solicitações de Acesso "),t("p",{class:"text-body-1 text-grey-darken-1"}," Gerencie as solicitações de acesso ao sistema ")])],-1)),a(E,{class:"mb-6"},{default:s(()=>[a(v,{cols:"12",sm:"6",md:"3"},{default:s(()=>[a(b,{class:"pa-4"},{default:s(()=>[t("div",Ne,[a(N,{color:"warning",class:"me-3"},{default:s(()=>[a(r,{color:"white"},{default:s(()=>[...e[19]||(e[19]=[i("mdi-clock-outline",-1)])]),_:1})]),_:1}),t("div",null,[t("div",Oe,n(k.pending),1),e[20]||(e[20]=t("div",{class:"text-caption text-medium-emphasis"},"Pendentes",-1))])])]),_:1})]),_:1}),a(v,{cols:"12",sm:"6",md:"3"},{default:s(()=>[a(b,{class:"pa-4"},{default:s(()=>[t("div",Ze,[a(N,{color:"success",class:"me-3"},{default:s(()=>[a(r,{color:"white"},{default:s(()=>[...e[21]||(e[21]=[i("mdi-check-circle",-1)])]),_:1})]),_:1}),t("div",null,[t("div",Fe,n(k.approved),1),e[22]||(e[22]=t("div",{class:"text-caption text-medium-emphasis"},"Aprovadas",-1))])])]),_:1})]),_:1}),a(v,{cols:"12",sm:"6",md:"3"},{default:s(()=>[a(b,{class:"pa-4"},{default:s(()=>[t("div",Ee,[a(N,{color:"error",class:"me-3"},{default:s(()=>[a(r,{color:"white"},{default:s(()=>[...e[23]||(e[23]=[i("mdi-close-circle",-1)])]),_:1})]),_:1}),t("div",null,[t("div",Be,n(k.rejected),1),e[24]||(e[24]=t("div",{class:"text-caption text-medium-emphasis"},"Rejeitadas",-1))])])]),_:1})]),_:1}),a(v,{cols:"12",sm:"6",md:"3"},{default:s(()=>[a(b,{class:"pa-4"},{default:s(()=>[t("div",$e,[a(N,{color:"primary",class:"me-3"},{default:s(()=>[a(r,{color:"white"},{default:s(()=>[...e[25]||(e[25]=[i("mdi-account-group",-1)])]),_:1})]),_:1}),t("div",null,[t("div",Me,n(k.total),1),e[26]||(e[26]=t("div",{class:"text-caption text-medium-emphasis"},"Total",-1))])])]),_:1})]),_:1})]),_:1}),a(b,{class:"mb-6 filter-card"},{default:s(()=>[t("div",Le,[t("div",Ge,[a(ae,{modelValue:S.value,"onUpdate:modelValue":e[0]||(e[0]=o=>S.value=o),label:"Buscar solicitações...","prepend-inner-icon":"mdi-magnify",variant:"solo",density:"compact","hide-details":"",clearable:"",style:{"min-width":"280px"},placeholder:"Nome, email ou organização",onInput:u(_e)},null,8,["modelValue","onInput"]),H.value>0?(m(),x(D,{key:0,size:"small",color:"primary",variant:"tonal",class:"ml-2"},{default:s(()=>[i(n(H.value)+" filtro"+n(H.value>1?"s":""),1)]),_:1})):p("",!0)]),t("div",Qe,[a(ze,{modelValue:K.value,"onUpdate:modelValue":[e[1]||(e[1]=o=>K.value=o),ye],variant:"outlined",color:"primary"},{default:s(()=>[a(D,{value:"pending",size:"small"},{default:s(()=>[a(r,{start:""},{default:s(()=>[...e[27]||(e[27]=[i("mdi-clock-outline",-1)])]),_:1}),e[28]||(e[28]=i(" Pendentes ",-1))]),_:1}),a(D,{value:"approved",size:"small"},{default:s(()=>[a(r,{start:""},{default:s(()=>[...e[29]||(e[29]=[i("mdi-check-circle",-1)])]),_:1}),e[30]||(e[30]=i(" Aprovadas ",-1))]),_:1}),a(D,{value:"rejected",size:"small"},{default:s(()=>[a(r,{start:""},{default:s(()=>[...e[31]||(e[31]=[i("mdi-close-circle",-1)])]),_:1}),e[32]||(e[32]=i(" Rejeitadas ",-1))]),_:1}),a(D,{value:"recent",size:"small"},{default:s(()=>[a(r,{start:""},{default:s(()=>[...e[33]||(e[33]=[i("mdi-calendar",-1)])]),_:1}),e[34]||(e[34]=i(" Recentes ",-1))]),_:1})]),_:1},8,["modelValue"]),a(A,{color:I.value?"primary":"default",variant:I.value?"flat":"outlined",size:"small",onClick:e[2]||(e[2]=o=>I.value=!I.value),class:"ml-1"},{default:s(()=>[a(r,null,{default:s(()=>[i("mdi-filter"+n(I.value?"-check":""),1)]),_:1}),e[35]||(e[35]=i(" Filtros ",-1))]),_:1},8,["color","variant"]),H.value>0?(m(),x(A,{key:0,variant:"outlined",size:"small",color:"error",onClick:oe,class:"ml-2"},{default:s(()=>[a(r,{start:""},{default:s(()=>[...e[36]||(e[36]=[i("mdi-filter-remove",-1)])]),_:1}),e[37]||(e[37]=i(" Limpar ",-1))]),_:1})):p("",!0)])]),a(Te,null,{default:s(()=>[we(t("div",We,[a(E,null,{default:s(()=>[a(v,{cols:"12",sm:"6",md:"3"},{default:s(()=>[a(J,{modelValue:_.value,"onUpdate:modelValue":[e[3]||(e[3]=o=>_.value=o),u(T)],label:"Status",items:re,variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-chart-circle"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(v,{cols:"12",sm:"6",md:"3"},{default:s(()=>[a(J,{modelValue:w.value,"onUpdate:modelValue":[e[4]||(e[4]=o=>w.value=o),u(T)],label:"Organização",items:me.value,variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-domain"},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),a(v,{cols:"12",sm:"6",md:"3"},{default:s(()=>[a(J,{modelValue:G.value,"onUpdate:modelValue":[e[5]||(e[5]=o=>G.value=o),u(T)],label:"Tipo de Cargo",items:ue,variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-account-tie"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(v,{cols:"12",sm:"6",md:"3"},{default:s(()=>[a(J,{modelValue:Q.value,"onUpdate:modelValue":[e[6]||(e[6]=o=>Q.value=o),u(T)],label:"Processado Por",items:ce,variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-account-check"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(v,{cols:"12",md:"6"},{default:s(()=>[t("div",He,[a(r,{color:"medium-emphasis"},{default:s(()=>[...e[38]||(e[38]=[i("mdi-calendar-range",-1)])]),_:1}),e[39]||(e[39]=t("div",{class:"text-caption text-medium-emphasis"},"Data da Solicitação:",-1)),a(ae,{modelValue:Z.value,"onUpdate:modelValue":e[7]||(e[7]=o=>Z.value=o),type:"date",label:"De",variant:"outlined",density:"compact","hide-details":"",onChange:u(T),class:"ml-2"},null,8,["modelValue","onChange"]),a(ae,{modelValue:W.value,"onUpdate:modelValue":e[8]||(e[8]=o=>W.value=o),type:"date",label:"Até",variant:"outlined",density:"compact","hide-details":"",onChange:u(T),class:"ml-2"},null,8,["modelValue","onChange"])])]),_:1}),a(v,{cols:"12",md:"6"},{default:s(()=>[t("div",Je,[a(A,{color:"primary","prepend-icon":"mdi-refresh",onClick:X},{default:s(()=>[...e[40]||(e[40]=[i(" Atualizar ",-1)])]),_:1})])]),_:1})]),_:1})],512),[[Ce,I.value]])]),_:1})]),_:1}),a(b,null,{default:s(()=>[a(Pe,{"items-per-page":$.value,"onUpdate:itemsPerPage":e[9]||(e[9]=o=>$.value=o),page:O.value,"onUpdate:page":e[10]||(e[10]=o=>O.value=o),headers:de,items:z.value,"items-length":M.value,loading:Y.value,class:"access-requests-table","item-value":"id","onUpdate:options":fe},{"item.status":s(({item:o})=>[a(D,{color:u(f).getStatusColor(o.status),variant:"tonal",size:"small"},{default:s(()=>[a(r,{start:"",icon:u(f).getStatusIcon(o.status)},null,8,["icon"]),i(" "+n(u(f).getStatusText(o.status)),1)]),_:2},1032,["color"])]),"item.organization":s(({item:o})=>[t("div",Ye,[t("div",Ke,n(o.organization.name),1),o.organization.description?(m(),V("div",Xe,n(o.organization.description),1)):p("",!0)])]),"item.createdAt":s(({item:o})=>[t("div",et,[t("div",tt,n(u(f).formatDateShort(o.createdAt)),1),t("div",at,n(new Date(o.createdAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})),1)])]),"item.actions":s(({item:o})=>[t("div",st,[a(A,{icon:"mdi-eye",variant:"text",size:"small",onClick:y=>ge(o)},null,8,["onClick"]),!u(h)&&o.status==="pending"?(m(),x(A,{key:0,icon:"mdi-check",variant:"text",size:"small",color:"success",onClick:y=>ee(o,"approve")},null,8,["onClick"])):p("",!0),!u(h)&&o.status==="pending"?(m(),x(A,{key:1,icon:"mdi-close",variant:"text",size:"small",color:"error",onClick:y=>ee(o,"reject")},null,8,["onClick"])):p("",!0)])]),"no-data":s(()=>[t("div",ot,[a(r,{size:"64",color:"grey-lighten-2"},{default:s(()=>[...e[41]||(e[41]=[i("mdi-account-search",-1)])]),_:1}),e[42]||(e[42]=t("h3",{class:"text-h6 text-grey-lighten-1 mt-4"},"Nenhuma solicitação encontrada",-1)),t("p",lt,n(S.value||_.value||w.value?"Tente ajustar os filtros de busca":"Ainda não há solicitações de acesso"),1)])]),_:1},8,["items-per-page","page","items","items-length","loading"])]),_:1}),a(ne,{modelValue:q.value,"onUpdate:modelValue":e[15]||(e[15]=o=>q.value=o),"max-width":"900px",persistent:"",transition:"dialog-bottom-transition",class:"modern-dialog"},{default:s(()=>[l.value?(m(),x(b,{key:0,elevation:"24",class:"dialog-card"},{default:s(()=>[t("div",it,[t("div",nt,[t("div",dt,[a(r,{icon:"mdi-account-search",size:"28",class:"dialog-icon"})]),t("div",rt,[e[43]||(e[43]=t("h2",{class:"dialog-title"},"Detalhes da Solicitação",-1)),t("p",ut,n(l.value.fullName)+" - "+n(l.value.email),1)])]),a(A,{icon:"mdi-close",variant:"text",size:"40",class:"dialog-close-btn",onClick:e[11]||(e[11]=o=>q.value=!1)})]),t("div",ct,[a(E,null,{default:s(()=>[a(v,{cols:"12",md:"8"},{default:s(()=>[a(b,{variant:"outlined",class:"mb-4"},{default:s(()=>[a(j,null,{default:s(()=>[a(r,{class:"mr-2"},{default:s(()=>[...e[44]||(e[44]=[i("mdi-account-check",-1)])]),_:1}),e[45]||(e[45]=i(" Status da Solicitação ",-1))]),_:1}),a(P,null,{default:s(()=>[t("div",mt,[a(N,{size:"64",color:u(f).getStatusColor(l.value.status),class:"me-4"},{default:s(()=>[a(r,{size:"32",icon:u(f).getStatusIcon(l.value.status)},null,8,["icon"])]),_:1},8,["color"]),t("div",null,[t("h3",vt,n(u(f).getStatusText(l.value.status)),1),t("p",pt," Solicitado em "+n(u(f).formatDate(l.value.createdAt)),1),l.value.processedAt?(m(),V("p",ft," Processado em "+n(u(f).formatDate(l.value.processedAt)),1)):p("",!0)])])]),_:1})]),_:1}),a(b,{variant:"outlined",class:"mb-4"},{default:s(()=>[a(j,null,{default:s(()=>[a(r,{class:"mr-2"},{default:s(()=>[...e[46]||(e[46]=[i("mdi-account",-1)])]),_:1}),e[47]||(e[47]=i(" Informações Pessoais ",-1))]),_:1}),a(P,null,{default:s(()=>[a(E,null,{default:s(()=>[a(v,{cols:"12",sm:"6"},{default:s(()=>[t("div",gt,[e[48]||(e[48]=t("div",{class:"info-label"},"Nome Completo",-1)),t("div",bt,n(l.value.fullName),1)])]),_:1}),a(v,{cols:"12",sm:"6"},{default:s(()=>[t("div",_t,[e[49]||(e[49]=t("div",{class:"info-label"},"Email",-1)),t("div",yt,[t("a",{href:`mailto:${l.value.email}`,class:"text-decoration-none text-primary"},n(l.value.email),9,xt)])])]),_:1}),a(v,{cols:"12",sm:"6"},{default:s(()=>[t("div",At,[e[50]||(e[50]=t("div",{class:"info-label"},"Cargo/Posição",-1)),t("div",kt,n(l.value.position),1)])]),_:1}),l.value.phone?(m(),x(v,{key:0,cols:"12",sm:"6"},{default:s(()=>[t("div",Vt,[e[51]||(e[51]=t("div",{class:"info-label"},"Telefone",-1)),t("div",wt,n(l.value.phone),1)])]),_:1})):p("",!0)]),_:1})]),_:1})]),_:1}),a(b,{variant:"outlined",class:"mb-4"},{default:s(()=>[a(j,null,{default:s(()=>[a(r,{class:"mr-2"},{default:s(()=>[...e[52]||(e[52]=[i("mdi-domain",-1)])]),_:1}),e[53]||(e[53]=i(" Organização ",-1))]),_:1}),a(P,null,{default:s(()=>[a(E,null,{default:s(()=>[a(v,{cols:"12",sm:"6"},{default:s(()=>[t("div",Ct,[e[54]||(e[54]=t("div",{class:"info-label"},"Nome da Organização",-1)),t("div",ht,n(l.value.organization.name),1)])]),_:1}),a(v,{cols:"12",sm:"6"},{default:s(()=>[t("div",St,[e[55]||(e[55]=t("div",{class:"info-label"},"Identificador (Slug)",-1)),t("div",zt,n(l.value.organization.slug),1)])]),_:1}),l.value.organization.description?(m(),x(v,{key:0,cols:"12"},{default:s(()=>[t("div",Tt,[e[56]||(e[56]=t("div",{class:"info-label"},"Descrição",-1)),t("div",Dt,n(l.value.organization.description),1)])]),_:1})):p("",!0)]),_:1})]),_:1})]),_:1}),l.value.reason?(m(),x(b,{key:0,variant:"outlined",class:"mb-4"},{default:s(()=>[a(j,null,{default:s(()=>[a(r,{class:"mr-2"},{default:s(()=>[...e[57]||(e[57]=[i("mdi-text-box",-1)])]),_:1}),e[58]||(e[58]=i(" Motivo da Solicitação ",-1))]),_:1}),a(P,null,{default:s(()=>[t("div",jt,[t("p",Pt,n(l.value.reason),1)])]),_:1})]),_:1})):p("",!0),l.value.adminComments?(m(),x(b,{key:1,variant:"outlined"},{default:s(()=>[a(j,null,{default:s(()=>[a(r,{class:"mr-2"},{default:s(()=>[...e[59]||(e[59]=[i("mdi-comment-account",-1)])]),_:1}),e[60]||(e[60]=i(" Comentários do Administrador ",-1))]),_:1}),a(P,null,{default:s(()=>[t("div",It,[t("p",qt,n(l.value.adminComments),1)])]),_:1})]),_:1})):p("",!0)]),_:1}),a(v,{cols:"12",md:"4",class:"sidebar-column"},{default:s(()=>[a(b,{variant:"outlined",class:"sticky-card"},{default:s(()=>[a(j,null,{default:s(()=>[a(r,{class:"mr-2"},{default:s(()=>[...e[61]||(e[61]=[i("mdi-information",-1)])]),_:1}),e[62]||(e[62]=i(" Resumo ",-1))]),_:1}),a(P,null,{default:s(()=>[t("div",Rt,[a(N,{size:"80",color:"primary"},{default:s(()=>[a(r,{size:"40"},{default:s(()=>[...e[63]||(e[63]=[i("mdi-account",-1)])]),_:1})]),_:1}),t("div",Ut,n(l.value.fullName),1),t("div",Nt,n(l.value.position),1)]),t("div",Ot,[e[64]||(e[64]=t("strong",null,"ID da Solicitação:",-1)),t("div",Zt,n(l.value.id),1)]),t("div",Ft,[e[65]||(e[65]=t("strong",null,"Status Atual:",-1)),a(D,{color:u(f).getStatusColor(l.value.status),size:"small",class:"mt-1"},{default:s(()=>[a(r,{start:"",icon:u(f).getStatusIcon(l.value.status)},null,8,["icon"]),i(" "+n(u(f).getStatusText(l.value.status)),1)]),_:1},8,["color"])]),t("div",Et,[e[66]||(e[66]=t("strong",null,"Organização:",-1)),t("div",Bt,n(l.value.organization.name),1)]),t("div",$t,[e[67]||(e[67]=t("strong",null,"Data da Solicitação:",-1)),t("div",Mt,n(u(f).formatDate(l.value.createdAt)),1)]),l.value.processedAt?(m(),V("div",Lt,[e[68]||(e[68]=t("strong",null,"Data de Processamento:",-1)),t("div",Gt,n(u(f).formatDate(l.value.processedAt)),1)])):p("",!0),l.value.metadata?.ipAddress?(m(),V("div",Qt,[e[71]||(e[71]=t("div",{class:"text-caption font-weight-bold mb-2 text-grey-darken-1"},"INFORMAÇÕES TÉCNICAS",-1)),t("div",Wt,[e[69]||(e[69]=t("div",{class:"text-caption text-grey-darken-1 font-weight-medium"},"Endereço IP",-1)),t("div",Ht,n(l.value.metadata.ipAddress),1)]),l.value.metadata.userAgent?(m(),V("div",Jt,[e[70]||(e[70]=t("div",{class:"text-caption text-grey-darken-1 font-weight-medium"},"User Agent",-1)),t("div",Yt,n(l.value.metadata.userAgent),1)])):p("",!0)])):p("",!0),t("div",Kt,[e[72]||(e[72]=t("div",{class:"text-caption font-weight-bold mb-2 text-blue-darken-2"},"SOBRE O STATUS",-1)),t("div",Xt,[l.value.status==="pending"?(m(),V("span",ea," Esta solicitação está aguardando análise de um administrador. ")):l.value.status==="approved"?(m(),V("span",ta," Esta solicitação foi aprovada e o usuário tem acesso ao sistema. ")):l.value.status==="rejected"?(m(),V("span",aa," Esta solicitação foi rejeitada e o acesso foi negado. ")):(m(),V("span",sa," Status da solicitação não reconhecido. "))])])]),_:1})]),_:1})]),_:1})]),_:1})]),t("div",oa,[t("div",la,[a(A,{variant:"outlined",size:"large",class:"action-btn cancel-btn",onClick:e[12]||(e[12]=o=>q.value=!1)},{default:s(()=>[...e[73]||(e[73]=[i(" Fechar ",-1)])]),_:1}),!u(h)&&l.value.status==="pending"?(m(),x(A,{key:0,color:"error",variant:"elevated",size:"large",class:"action-btn error-btn",onClick:e[13]||(e[13]=o=>se("reject"))},{default:s(()=>[a(r,{start:""},{default:s(()=>[...e[74]||(e[74]=[i("mdi-close",-1)])]),_:1}),e[75]||(e[75]=i(" Rejeitar ",-1))]),_:1})):p("",!0),!u(h)&&l.value.status==="pending"?(m(),x(A,{key:1,color:"success",variant:"elevated",size:"large",class:"action-btn primary-btn",onClick:e[14]||(e[14]=o=>se("approve"))},{default:s(()=>[a(r,{start:""},{default:s(()=>[...e[76]||(e[76]=[i("mdi-check",-1)])]),_:1}),e[77]||(e[77]=i(" Aprovar ",-1))]),_:1})):p("",!0)])])]),_:1})):p("",!0)]),_:1},8,["modelValue"]),a(ne,{modelValue:F.value,"onUpdate:modelValue":e[18]||(e[18]=o=>F.value=o),"max-width":"600px",persistent:""},{default:s(()=>[C.value?(m(),x(b,{key:0},{default:s(()=>[a(j,{class:"dialog-title"},{default:s(()=>[t("div",ia,[a(r,{class:"me-2",color:g.value==="approve"?"success":"error"},{default:s(()=>[i(n(g.value==="approve"?"mdi-check-circle":"mdi-close-circle"),1)]),_:1},8,["color"]),i(" "+n(g.value==="approve"?"Aprovar":"Rejeitar")+" Solicitação ",1)])]),_:1}),a(P,{class:"pa-6"},{default:s(()=>[t("div",na,[t("h4",null,"Solicitante: "+n(C.value.fullName),1),t("p",da,n(C.value.email),1),t("p",ra,n(C.value.organization.name),1)]),a(Ie,{modelValue:R.value,"onUpdate:modelValue":e[16]||(e[16]=o=>R.value=o),label:"Comentários (opcional)",variant:"outlined",rows:"3",placeholder:g.value==="approve"?"Adicione comentários sobre a aprovação...":"Explique o motivo da rejeição...",counter:"",maxlength:"500"},null,8,["modelValue","placeholder"]),a(qe,{type:g.value==="approve"?"success":"warning",variant:"tonal",class:"mt-4"},{default:s(()=>[t("div",ua,[t("div",null,[t("div",ca,n(g.value==="approve"?"Confirmar aprovação?":"Confirmar rejeição?"),1),t("div",ma,n(g.value==="approve"?"O solicitante receberá um email de confirmação e poderá acessar o sistema.":"O solicitante será notificado sobre a rejeição."),1)])])]),_:1},8,["type"])]),_:1}),a(De,{class:"pa-6 pt-0"},{default:s(()=>[a(Re),a(A,{variant:"outlined",onClick:e[17]||(e[17]=o=>F.value=!1),disabled:B.value},{default:s(()=>[...e[78]||(e[78]=[i(" Cancelar ",-1)])]),_:1},8,["disabled"]),a(A,{color:g.value==="approve"?"success":"error",variant:"flat",loading:B.value,onClick:be},{default:s(()=>[a(r,{start:""},{default:s(()=>[i(n(g.value==="approve"?"mdi-check":"mdi-close"),1)]),_:1}),i(" "+n(g.value==="approve"?"Aprovar":"Rejeitar"),1)]),_:1},8,["color","loading"])]),_:1})]),_:1})):p("",!0)]),_:1},8,["modelValue"])]))}}),$a=je(va,[["__scopeId","data-v-1a37d31a"]]);export{$a as default};
