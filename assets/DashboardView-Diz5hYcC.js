import{k as A,Q as f,T as o,S as d,X as b,F as $,a8 as F,q as i,z as a,a4 as m,a1 as c,j as y,v as re,f as C,E as pe,L as me,_ as se}from"./vendor-vue-BvKyvIVR.js";import{_ as k}from"./index-CQBjCOQw.js";import{V as O,a as x}from"./VRow-C_rLTo1r.js";import{j as R,i as H,f as V,l as K,k as Y,n as oe}from"./VGrid-CuJrScxf.js";import{V as M}from"./VIcon-CM-KW5Qw.js";import{a as B,u as fe}from"./VChip-BzUv3cXC.js";import{C as E,a as ee,L as te,P as ge,b as ye,p as ae,c as N,d as Q,i as _e,e as he,A as ve,D as be,B as ie,f as ne}from"./vendor-charts-CQKzH4aX.js";import{V as T}from"./VSkeletonLoader-Dnxv1z-d.js";import{d as I}from"./dashboard.service-DgUQ6u-a.js";import{V as xe}from"./VAlert-ChhMmNH2.js";import{a as we,b as Ce,c as Se,d as De}from"./VList-CaAoEaF2.js";import"./vendor-ui-Dz8XL-co.js";import"./tag-Bnbpnddf.js";import"./dimensions-DVh0fwa7.js";import"./auth-PiWOMLtm.js";import"./vendor-utils-Cfk84l6i.js";import"./token-storage.service-BqAv9k07.js";import"./ssrBoot-COakMcr6.js";const Ae=A({__name:"StatsCards",props:{stats:{type:Array,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t();const s={};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),ke={class:"d-flex align-center justify-space-between mb-3"},Re={class:"text-h4 font-weight-bold text-grey-darken-3 mb-1"},Ie={class:"text-body-2 text-grey-darken-1 mb-0"};function Me(p,t,s,e,l,u){return d(),f(O,null,{default:o(()=>[(d(!0),b($,null,F(s.stats,r=>(d(),f(x,{key:r.title,cols:"12",sm:"6",lg:"3"},{default:o(()=>[i(R,{class:"stats-card pa-4",elevation:"2",loading:s.loading},{default:o(()=>[a("div",ke,[i(H,{color:r.color,size:"48",class:"elevation-2"},{default:o(()=>[i(M,{color:`${r.color}-darken-2`,size:"24"},{default:o(()=>[m(c(r.icon),1)]),_:2},1032,["color"])]),_:2},1032,["color"]),i(B,{color:r.changeColor,size:"small",variant:"tonal","prepend-icon":"mdi-trending-up"},{default:o(()=>[m(c(r.change),1)]),_:2},1032,["color"])]),a("div",null,[a("h3",Re,c(r.value),1),a("p",Ie,c(r.title),1)])]),_:2},1032,["loading"])]),_:2},1024))),128))]),_:1})}const je=k(Ae,[["render",Me],["__scopeId","data-v-30033f77"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/StatsCards.vue"]]),Pe=A({__name:"AnalysisChart",props:{data:{type:Object,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t(),E.register(ee,te,ge,ye,ae,N,Q,_e);const e={chartOptions:y(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12,weight:"500"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,padding:12}},scales:{x:{border:{display:!1},grid:{display:!1},ticks:{font:{size:11},color:"rgba(0, 0, 0, 0.6)"}},y:{border:{display:!1},grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{font:{size:11},color:"rgba(0, 0, 0, 0.6)",beginAtZero:!0}}},interaction:{intersect:!1,mode:"index"}})),get Line(){return he}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}}),Te={class:"d-flex align-center justify-space-between mb-4"},qe={class:"chart-container",style:{height:"300px"}};function Oe(p,t,s,e,l,u){return d(),f(R,{class:"analysis-chart pa-4",elevation:"2"},{default:o(()=>[a("div",Te,[t[0]||(t[0]=a("div",null,[a("h3",{class:"text-h6 font-weight-bold text-grey-darken-3"}," Tendência de Análises "),a("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Últimos 9 dias ")],-1)),i(V,{icon:"mdi-dots-vertical",variant:"text",size:"small"})]),a("div",qe,[s.loading?(d(),f(T,{key:0,type:"image",height:"300",class:"rounded"})):(d(),f(e.Line,{key:1,data:s.data,options:e.chartOptions},null,8,["data","options"]))])]),_:1})}const Ve=k(Pe,[["render",Oe],["__scopeId","data-v-2c46ddfe"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/AnalysisChart.vue"]]),Be=A({__name:"QualityChart",props:{data:{type:Object,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t(),E.register(ve,N,Q);const s=y(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}}},cutout:"60%"})),e=y(()=>8.7),l={chartOptions:s,averageScore:e,get Doughnut(){return be}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),Le={class:"d-flex align-center justify-space-between mb-4"},ze={class:"chart-container position-relative",style:{height:"280px"}},$e={key:1,class:"position-relative"},Fe={class:"center-score"},Ee={class:"text-center"},Ne={class:"text-h4 font-weight-bold text-success mb-1"};function Qe(p,t,s,e,l,u){return d(),f(R,{class:"quality-chart pa-4",elevation:"2"},{default:o(()=>[a("div",Le,[t[0]||(t[0]=a("div",null,[a("h3",{class:"text-h6 font-weight-bold text-grey-darken-3"}," Qualidade do Código "),a("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Score médio atual ")],-1)),i(B,{color:"success",variant:"tonal",size:"small"},{default:o(()=>[m(c(e.averageScore.toFixed(1)),1)]),_:1})]),a("div",ze,[s.loading?(d(),f(T,{key:0,type:"avatar",width:"200",height:"200",class:"mx-auto"})):(d(),b("div",$e,[i(e.Doughnut,{data:s.data,options:e.chartOptions},null,8,["data","options"]),a("div",Fe,[a("div",Ee,[a("h2",Ne,c(e.averageScore.toFixed(1)),1),t[1]||(t[1]=a("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Score Geral ",-1))])])]))])]),_:1})}const Ge=k(Be,[["render",Qe],["__scopeId","data-v-98516d15"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/QualityChart.vue"]]),We=A({__name:"SecurityChart",props:{data:{type:Object,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t(),E.register(ee,te,ie,ae,N,Q);const s=p,e=y(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{border:{display:!1},grid:{display:!1},ticks:{color:"rgba(0, 0, 0, 0.6)"}},y:{border:{display:!1},grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{color:"rgba(0, 0, 0, 0.6)",beginAtZero:!0}}}})),l=y(()=>s.data?.datasets?.[0]?.data?s.data.datasets[0].data.reduce((_,S)=>_+S,0):0),u=y(()=>{if(!s.data?.datasets?.[0]?.data)return 0;const _=s.data.datasets[0].data;return _[_.length-1]||0}),r=y(()=>l.value===0?0:Math.round(u.value/l.value*100)),g={props:s,chartOptions:e,totalIssues:l,resolvedIssues:u,resolutionRate:r,get Bar(){return ne}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),Ze={class:"d-flex align-center justify-space-between mb-4"},Ue={class:"chart-container",style:{height:"200px"}},Je={class:"mt-4 pt-3",style:{"border-top":"1px solid rgba(0,0,0,0.1)"}},Xe={class:"text-h6 font-weight-bold text-error"},He={class:"text-h6 font-weight-bold text-success"};function Ke(p,t,s,e,l,u){return d(),f(R,{class:"security-chart pa-4",elevation:"2"},{default:o(()=>[a("div",Ze,[t[0]||(t[0]=a("div",null,[a("h3",{class:"text-h6 font-weight-bold text-grey-darken-3"}," Issues de Segurança "),a("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Por severidade ")],-1)),i(B,{color:"success",variant:"tonal",size:"small"},{default:o(()=>[m(c(e.resolutionRate)+"% resolvidas ",1)]),_:1})]),a("div",Ue,[s.loading?(d(),f(T,{key:0,type:"image",height:"200",class:"rounded"})):(d(),f(e.Bar,{key:1,data:s.data,options:e.chartOptions},null,8,["data","options"]))]),a("div",Je,[i(O,null,{default:o(()=>[i(x,{cols:"6",class:"text-center"},{default:o(()=>[a("div",Xe,c(e.totalIssues),1),t[1]||(t[1]=a("div",{class:"text-caption text-grey-darken-1"},"Total",-1))]),_:1}),i(x,{cols:"6",class:"text-center"},{default:o(()=>[a("div",He,c(e.resolvedIssues),1),t[2]||(t[2]=a("div",{class:"text-caption text-grey-darken-1"},"Resolvidas",-1))]),_:1})]),_:1})])]),_:1})}const Ye=k(We,[["render",Ke],["__scopeId","data-v-ebaf1d6c"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/SecurityChart.vue"]]),et=A({__name:"RecentActivity",props:{activities:{type:Array,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t();const s={};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),tt={class:"d-flex align-center justify-space-between mb-4"},at={style:{"max-height":"300px","overflow-y":"auto"}},st={key:1},ot={class:"flex-grow-1"},rt={class:"text-body-2 font-weight-medium text-grey-darken-3 mb-1"},it={class:"text-caption text-grey-darken-1 mb-1"},nt={class:"d-flex align-center justify-space-between"},lt={class:"text-caption text-grey-darken-1"},dt={class:"mt-4 pt-3 text-center",style:{"border-top":"1px solid rgba(0,0,0,0.1)"}};function ct(p,t,s,e,l,u){return d(),f(R,{class:"recent-activity pa-4",elevation:"2"},{default:o(()=>[a("div",tt,[t[1]||(t[1]=a("div",null,[a("h3",{class:"text-h6 font-weight-bold text-grey-darken-3"}," Atividade Recente "),a("p",{class:"text-body-2 text-grey-darken-1 mb-0"}," Últimas ações do sistema ")],-1)),i(V,{to:"/activity",variant:"text",size:"small",color:"primary"},{default:o(()=>[...t[0]||(t[0]=[m(" Ver tudo ",-1)])]),_:1})]),a("div",at,[s.loading?(d(),f(T,{key:0,type:"list-item-avatar-three-line@5"})):(d(),b("div",st,[(d(!0),b($,null,F(s.activities,(r,g)=>(d(),b("div",{key:r.id,class:re(["activity-item d-flex align-start",{"mb-4":g<s.activities.length-1}])},[i(H,{color:r.color,size:"32",class:"mr-3 mt-1"},{default:o(()=>[i(M,{color:`${r.color}-darken-2`,size:"18"},{default:o(()=>[m(c(r.icon),1)]),_:2},1032,["color"])]),_:2},1032,["color"]),a("div",ot,[a("div",rt,c(r.title),1),a("div",it,c(r.description),1),a("div",nt,[i(B,{size:"x-small",variant:"tonal",color:"primary"},{default:o(()=>[m(c(r.repository),1)]),_:2},1024),a("span",lt,c(r.relativeTime),1)])])],2))),128))]))]),a("div",dt,[i(V,{variant:"tonal",color:"primary",block:"","prepend-icon":"mdi-refresh"},{default:o(()=>[...t[2]||(t[2]=[m(" Atualizar Atividades ",-1)])]),_:1})])]),_:1})}const ut=k(et,[["render",ct],["__scopeId","data-v-73855657"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/RecentActivity.vue"]]),pt=A({__name:"DetailedMetrics",props:{metrics:{type:Object,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t();const s=p,e=y(()=>{const _=s.metrics.averageProcessingTime;return _<60?`${_}s`:_<3600?`${Math.round(_/60)}m`:`${Math.round(_/3600)}h`}),l=y(()=>s.metrics.totalAnalyses===0?0:Math.round(s.metrics.completedAnalyses/s.metrics.totalAnalyses*100)),u=y(()=>s.metrics.repositoryGrowth.growthRate>=0?"success":"error"),r=y(()=>s.metrics.repositoryGrowth.growthRate>=0?"mdi-trending-up":"mdi-trending-down"),g={props:s,processingTimeFormatted:e,successRate:l,growthColor:u,growthIcon:r};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),mt={key:1},ft={class:"mb-4"},gt={class:"d-flex align-center justify-space-between mb-2"},yt={class:"mb-4"},_t={class:"d-flex align-center justify-space-between mb-2"},ht={class:"text-h6 font-weight-bold text-info"},vt={class:"mb-4"},bt={class:"d-flex align-center justify-space-between mb-2"},xt={class:"text-caption text-medium-emphasis"},wt={class:"d-flex align-center justify-space-between mb-1"},Ct={class:"text-body-2"},St={class:"text-caption font-weight-medium"};function Dt(p,t,s,e,l,u){return d(),f(R,null,{default:o(()=>[i(K,{class:"d-flex align-center"},{default:o(()=>[i(M,{class:"me-2"},{default:o(()=>[...t[0]||(t[0]=[m("mdi-chart-box-outline",-1)])]),_:1}),t[1]||(t[1]=m(" Métricas Detalhadas ",-1))]),_:1}),i(Y,null,{default:o(()=>[s.loading?(d(),f(T,{key:0,type:"paragraph@3"})):(d(),b("div",mt,[a("div",ft,[a("div",gt,[t[2]||(t[2]=a("span",{class:"text-body-2 font-weight-medium"},"Taxa de Sucesso",-1)),a("span",{class:re(["text-h6 font-weight-bold",`text-${e.successRate>=90?"success":e.successRate>=70?"warning":"error"}`])},c(e.successRate)+"% ",3)]),i(oe,{"model-value":e.successRate,color:e.successRate>=90?"success":e.successRate>=70?"warning":"error",height:"8",rounded:""},null,8,["model-value","color"])]),a("div",yt,[a("div",_t,[t[3]||(t[3]=a("span",{class:"text-body-2 font-weight-medium"},"Tempo Médio de Processamento",-1)),a("span",ht,c(e.processingTimeFormatted),1)])]),a("div",vt,[a("div",bt,[t[4]||(t[4]=a("span",{class:"text-body-2 font-weight-medium"},"Crescimento de Repositórios",-1)),i(B,{color:e.growthColor,"prepend-icon":e.growthIcon,size:"small",variant:"tonal"},{default:o(()=>[m(c(s.metrics.repositoryGrowth.growthRate>=0?"+":"")+c(s.metrics.repositoryGrowth.growthRate.toFixed(1))+"% ",1)]),_:1},8,["color","prepend-icon"])]),a("div",xt," Este mês: "+c(s.metrics.repositoryGrowth.thisMonth)+" | Mês anterior: "+c(s.metrics.repositoryGrowth.lastMonth),1)]),a("div",null,[t[5]||(t[5]=a("h4",{class:"text-subtitle-2 font-weight-bold mb-3"}," Principais Tipos de Issues ",-1)),(d(!0),b($,null,F(s.metrics.topIssueTypes,r=>(d(),b("div",{key:r.type,class:"mb-2"},[a("div",wt,[a("span",Ct,c(r.type),1),a("span",St,c(r.count)+" ("+c(r.percentage.toFixed(1))+"%) ",1)]),i(oe,{"model-value":r.percentage,color:"primary",height:"4",rounded:""},null,8,["model-value"])]))),128))])]))]),_:1})]),_:1})}const At=k(pt,[["render",Dt],["__scopeId","data-v-1ec41502"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/DetailedMetrics.vue"]]),kt=A({__name:"RepositoryAnalysisChart",props:{repositories:{type:Array,required:!0},loading:{type:Boolean,required:!1}},setup(p,{expose:t}){t(),E.register(ee,te,ie,ae,N,Q);const s=p,e=y(()=>({labels:s.repositories.map(r=>r.repositoryName),datasets:[{label:"Análises",data:s.repositories.map(r=>r.analysisCount),backgroundColor:"rgba(25, 118, 210, 0.8)",borderColor:"rgb(25, 118, 210)",borderWidth:1,borderRadius:4,borderSkipped:!1},{label:"Issues Encontradas",data:s.repositories.map(r=>r.issuesFound),backgroundColor:"rgba(255, 152, 0, 0.8)",borderColor:"rgb(255, 152, 0)",borderWidth:1,borderRadius:4,borderSkipped:!1}]})),l=y(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20,font:{size:12,weight:"500"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,padding:12,callbacks:{afterBody:function(r){const g=r[0].dataIndex;return[`Score de Qualidade: ${s.repositories[g].qualityScore.toFixed(1)}`]}}}},scales:{x:{border:{display:!1},grid:{display:!1},ticks:{font:{size:11},color:"rgba(0, 0, 0, 0.6)",maxRotation:45}},y:{border:{display:!1},grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{font:{size:11},color:"rgba(0, 0, 0, 0.6)",beginAtZero:!0}}},interaction:{intersect:!1,mode:"index"}})),u={props:s,chartData:e,chartOptions:l,get Bar(){return ne}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),Rt={class:"d-flex align-center"},It={class:"chart-container",style:{height:"300px"}},Mt={key:2,class:"d-flex flex-column align-center justify-center",style:{height:"300px"}};function jt(p,t,s,e,l,u){return d(),f(R,null,{default:o(()=>[i(K,{class:"d-flex align-center justify-space-between"},{default:o(()=>[a("div",Rt,[i(M,{class:"me-2"},{default:o(()=>[...t[0]||(t[0]=[m("mdi-source-repository-multiple",-1)])]),_:1}),t[1]||(t[1]=m(" Análises por Repositório ",-1))]),i(V,{icon:"mdi-dots-vertical",variant:"text",size:"small"})]),_:1}),i(Y,null,{default:o(()=>[a("div",It,[s.loading?(d(),f(T,{key:0,type:"image",height:"300",class:"rounded"})):s.repositories.length>0?(d(),f(e.Bar,{key:1,data:e.chartData,options:e.chartOptions},null,8,["data","options"])):(d(),b("div",Mt,[i(M,{size:"64",color:"grey-lighten-1"},{default:o(()=>[...t[2]||(t[2]=[m("mdi-chart-bar",-1)])]),_:1}),t[3]||(t[3]=a("p",{class:"text-body-1 text-grey-darken-1 mt-4 text-center"}," Nenhum dado de repositório disponível ",-1))]))])]),_:1})]),_:1})}const Pt=k(kt,[["render",jt],["__scopeId","data-v-21f058dd"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/dashboard/RepositoryAnalysisChart.vue"]]);function Tt(){const{isDemoUser:p,simulateApiDelay:t}=fe(),s=C(!1),e=C(null),l=C({totalAnalyses:0,activeRepositories:0,issuesFound:0,qualityScore:0}),u=C([]),r=C({excellent:0,good:0,fair:0,poor:0}),g=C({high:0,medium:0,low:0,resolved:0}),_=C([]),S=C([]),j=C({totalAnalyses:0,completedAnalyses:0,failedAnalyses:0,averageProcessingTime:0,topIssueTypes:[],repositoryGrowth:{thisMonth:0,lastMonth:0,growthRate:0}}),G=y(()=>({labels:u.value.map(n=>new Date(n.date).toLocaleDateString("pt-BR",{month:"short",day:"numeric"})),datasets:[{label:"Análises",data:u.value.map(n=>n.analyses),borderColor:"#1976d2",backgroundColor:"rgba(25, 118, 210, 0.1)",tension:.4,fill:!0},{label:"Issues Encontradas",data:u.value.map(n=>n.issues),borderColor:"#f44336",backgroundColor:"rgba(244, 67, 54, 0.1)",tension:.4,fill:!0},{label:"Issues Resolvidas",data:u.value.map(n=>n.resolved),borderColor:"#4caf50",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4,fill:!0}]})),W=y(()=>({labels:["Excelente","Boa","Regular","Ruim"],datasets:[{data:[r.value.excellent,r.value.good,r.value.fair,r.value.poor],backgroundColor:["#4caf50","#2196f3","#ff9800","#f44336"],borderWidth:0}]})),L=y(()=>({labels:["Alta","Média","Baixa","Resolvidas"],datasets:[{label:"Issues de Segurança",data:[g.value.high,g.value.medium,g.value.low,g.value.resolved],backgroundColor:["#f44336","#ff9800","#ffeb3b","#4caf50"],borderWidth:1,borderColor:"#fff"}]})),Z=y(()=>[{title:"Total de Análises",value:l.value.totalAnalyses.toLocaleString("pt-BR"),icon:"mdi-chart-timeline-variant",color:"primary",change:"+12%",changeColor:"success"},{title:"Repositórios Ativos",value:l.value.activeRepositories.toString(),icon:"mdi-source-repository",color:"info",change:"+3",changeColor:"success"},{title:"Issues Encontradas",value:l.value.issuesFound.toString(),icon:"mdi-bug",color:"warning",change:"-8%",changeColor:"success"},{title:"Score de Qualidade",value:l.value.qualityScore.toFixed(1),icon:"mdi-star",color:"success",change:"+0.3",changeColor:"success"}]),q=y(()=>_.value.map(n=>({...n,relativeTime:z(n.timestamp),icon:U(n.type),color:J(n.type,n.severity)})));function z(n){const h=new Date,w=new Date(n),v=Math.floor((h.getTime()-w.getTime())/1e3);return v<60?"agora mesmo":v<3600?`${Math.floor(v/60)}m atrás`:v<86400?`${Math.floor(v/3600)}h atrás`:`${Math.floor(v/86400)}d atrás`}function U(n){return{analysis:"mdi-chart-line",issue:"mdi-alert-circle",resolved:"mdi-check-circle",repository:"mdi-source-repository"}[n]||"mdi-information"}function J(n,h){return n==="issue"?{high:"error",medium:"warning",low:"info"}[h]||"warning":{analysis:"primary",resolved:"success",repository:"info"}[n]||"primary"}async function P(){s.value=!0,e.value=null;try{if(p.value)await t(800),l.value={totalAnalyses:1247,activeRepositories:23,issuesFound:156,qualityScore:8.4},u.value=[{date:"2024-11-01",analyses:45,issues:12,resolved:8},{date:"2024-11-02",analyses:52,issues:15,resolved:11},{date:"2024-11-03",analyses:38,issues:9,resolved:7},{date:"2024-11-04",analyses:61,issues:18,resolved:14},{date:"2024-11-05",analyses:47,issues:11,resolved:9},{date:"2024-11-06",analyses:55,issues:16,resolved:12},{date:"2024-11-07",analyses:43,issues:8,resolved:6}],r.value={excellent:35,good:28,fair:22,poor:15},g.value={high:8,medium:24,low:43,resolved:89},_.value=[{id:"1",type:"analysis",title:"Análise concluída com sucesso",description:"Nova análise de código foi concluída para o repositório",repository:"projeto-frontend-react",author:"João Silva",timestamp:new Date(Date.now()-3e5).toISOString(),severity:"info"},{id:"2",type:"issue",title:"Vulnerabilidade de segurança detectada",description:"Issue de alta severidade foi encontrada no código",repository:"api-backend-node",author:"Maria Santos",timestamp:new Date(Date.now()-9e5).toISOString(),severity:"high"},{id:"3",type:"resolved",title:"Issues resolvidas automaticamente",description:"5 problemas foram corrigidos com sucesso",repository:"mobile-app-flutter",author:"Pedro Costa",timestamp:new Date(Date.now()-18e5).toISOString(),severity:"info"},{id:"4",type:"repository",title:"Novo repositório adicionado",description:"Repositório configurado para análise automática",repository:"web-service-api",author:"Ana Oliveira",timestamp:new Date(Date.now()-36e5).toISOString(),severity:"info"},{id:"5",type:"analysis",title:"Análise programada iniciada",description:"Análise automática foi iniciada conforme cronograma",repository:"frontend-dashboard",author:"Sistema",timestamp:new Date(Date.now()-72e5).toISOString(),severity:"info"}],S.value=[{id:"1",name:"projeto-frontend-react",fullName:"demo/projeto-frontend-react",analysisCount:45,qualityScore:8.7,issuesCount:3,lastAnalysisAt:new Date(Date.now()-3e5).toISOString()},{id:"2",name:"api-backend-node",fullName:"demo/api-backend-node",analysisCount:32,qualityScore:7.9,issuesCount:8,lastAnalysisAt:new Date(Date.now()-9e5).toISOString()},{id:"3",name:"mobile-app-flutter",fullName:"demo/mobile-app-flutter",analysisCount:18,qualityScore:6.5,issuesCount:12,lastAnalysisAt:new Date(Date.now()-18e5).toISOString()}],await X();else{const[n,h,w,v,ce,ue]=await Promise.all([I.getDashboardStats(),I.getAnalysisTrend(30),I.getQualityDistribution(),I.getSecurityIssues(),I.getRecentActivity(10),I.getTopRepositories(5)]);l.value=n,u.value=h,r.value=w,g.value=v,_.value=ce,S.value=ue,await X()}}catch(n){console.error("Error loading dashboard data:",n),e.value=n instanceof Error?n.message:"Erro ao carregar dados do dashboard"}finally{s.value=!1}}async function D(){await P()}function le(){return setInterval(()=>{s.value||P()},300*1e3)}pe(()=>{P()});const de=y(()=>S.value.map(n=>({repositoryName:n.name,analysisCount:n.analysisCount,issuesFound:n.issuesCount,qualityScore:n.qualityScore})));async function X(){try{if(p.value){const n=l.value.totalAnalyses,h=Math.floor(n*.87),w=n-h;j.value={totalAnalyses:n,completedAnalyses:h,failedAnalyses:w,averageProcessingTime:142,topIssueTypes:[{type:"Qualidade de Código",count:52,percentage:42},{type:"Segurança",count:38,percentage:31},{type:"Performance",count:21,percentage:17},{type:"Boas Práticas",count:12,percentage:10}],repositoryGrowth:{thisMonth:l.value.activeRepositories,lastMonth:20,growthRate:15}}}else j.value=await I.getDetailedMetrics()}catch(n){console.error("Error loading detailed metrics:",n);const h=l.value.totalAnalyses,w=Math.floor(h*.85),v=h-w;j.value={totalAnalyses:h,completedAnalyses:w,failedAnalyses:v,averageProcessingTime:180,topIssueTypes:[{type:"Qualidade de Código",count:45,percentage:40},{type:"Segurança",count:32,percentage:30},{type:"Performance",count:28,percentage:20},{type:"Boas Práticas",count:23,percentage:10}],repositoryGrowth:{thisMonth:l.value.activeRepositories,lastMonth:Math.max(1,l.value.activeRepositories-1),growthRate:0}}}}return{isLoading:s,error:e,stats:l,analysisTrend:u,qualityDistribution:r,securityIssues:g,recentActivity:_,topRepositories:S,detailedMetrics:j,analysisChartData:G,qualityChartData:W,securityChartData:L,formattedStats:Z,formattedRecentActivity:q,repositoryAnalysisData:de,loadDashboardData:P,refreshData:D,startAutoRefresh:le,loadDetailedMetrics:X}}const qt=A({__name:"DashboardView",setup(p,{expose:t}){t();const{isLoading:s,error:e,topRepositories:l,detailedMetrics:u,analysisChartData:r,qualityChartData:g,securityChartData:_,formattedStats:S,formattedRecentActivity:j,repositoryAnalysisData:G,refreshData:W,startAutoRefresh:L}=Tt();function Z(U){const J=new Date,P=new Date(U),D=Math.floor((J.getTime()-P.getTime())/1e3);return D<60?"agora mesmo":D<3600?`${Math.floor(D/60)}m atrás`:D<86400?`${Math.floor(D/3600)}h atrás`:`${Math.floor(D/86400)}d atrás`}const q=L();me(()=>{q&&clearInterval(q)});const z={isLoading:s,error:e,topRepositories:l,detailedMetrics:u,analysisChartData:r,qualityChartData:g,securityChartData:_,formattedStats:S,formattedRecentActivity:j,repositoryAnalysisData:G,refreshData:W,startAutoRefresh:L,getRelativeTime:Z,autoRefreshInterval:q,StatsCards:je,AnalysisChart:Ve,QualityChart:Ge,SecurityChart:Ye,RecentActivity:ut,DetailedMetrics:At,RepositoryAnalysisChart:Pt};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}}),Ot={class:"dashboard"},Vt={class:"d-flex justify-space-between align-center mb-6"},Bt={class:"text-caption text-medium-emphasis"};function Lt(p,t,s,e,l,u){return d(),b("div",Ot,[a("div",Vt,[t[2]||(t[2]=a("div",null,[a("h1",{class:"text-h4 font-weight-bold text-grey-darken-3 mb-2"}," Dashboard "),a("p",{class:"text-body-1 text-grey-darken-1"}," Visão geral das análises de código da organização ")],-1)),i(V,{color:"primary","prepend-icon":"mdi-refresh",variant:"elevated",onClick:e.refreshData,loading:e.isLoading},{default:o(()=>[...t[1]||(t[1]=[m(" Atualizar ",-1)])]),_:1},8,["onClick","loading"])]),e.error?(d(),f(xe,{key:0,type:"error",variant:"tonal",class:"mb-6",closable:"","onClick:close":t[0]||(t[0]=r=>e.error=null)},{default:o(()=>[m(c(e.error),1)]),_:1})):se("",!0),i(e.StatsCards,{stats:e.formattedStats,loading:e.isLoading,class:"mb-6"},null,8,["stats","loading"]),i(O,null,{default:o(()=>[i(x,{cols:"12",lg:"8"},{default:o(()=>[i(e.AnalysisChart,{data:e.analysisChartData,loading:e.isLoading},null,8,["data","loading"])]),_:1}),i(x,{cols:"12",lg:"4"},{default:o(()=>[i(e.QualityChart,{data:e.qualityChartData,loading:e.isLoading},null,8,["data","loading"])]),_:1}),i(x,{cols:"12",md:"6"},{default:o(()=>[i(e.SecurityChart,{data:e.securityChartData,loading:e.isLoading},null,8,["data","loading"])]),_:1}),i(x,{cols:"12",md:"6"},{default:o(()=>[i(e.RecentActivity,{activities:e.formattedRecentActivity,loading:e.isLoading},null,8,["activities","loading"])]),_:1})]),_:1}),i(O,{class:"mb-6"},{default:o(()=>[i(x,{cols:"12",lg:"8"},{default:o(()=>[i(e.RepositoryAnalysisChart,{repositories:e.repositoryAnalysisData,loading:e.isLoading},null,8,["repositories","loading"])]),_:1}),i(x,{cols:"12",lg:"4"},{default:o(()=>[i(e.DetailedMetrics,{metrics:e.detailedMetrics,loading:e.isLoading},null,8,["metrics","loading"])]),_:1})]),_:1}),e.topRepositories.length>0?(d(),f(O,{key:1},{default:o(()=>[i(x,{cols:"12"},{default:o(()=>[i(R,null,{default:o(()=>[i(K,{class:"d-flex align-center"},{default:o(()=>[i(M,{class:"me-2"},{default:o(()=>[...t[3]||(t[3]=[m("mdi-source-repository-multiple",-1)])]),_:1}),t[4]||(t[4]=m(" Top Repositórios ",-1))]),_:1}),i(Y,null,{default:o(()=>[i(we,null,{default:o(()=>[(d(!0),b($,null,F(e.topRepositories,r=>(d(),f(Ce,{key:r.id,class:"px-0"},{prepend:o(()=>[i(H,{color:"primary",size:"40"},{default:o(()=>[i(M,null,{default:o(()=>[...t[5]||(t[5]=[m("mdi-source-repository",-1)])]),_:1})]),_:1})]),append:o(()=>[a("div",Bt,c(e.getRelativeTime(r.lastAnalysisAt)),1)]),default:o(()=>[i(Se,{class:"font-weight-medium"},{default:o(()=>[m(c(r.fullName),1)]),_:2},1024),i(De,null,{default:o(()=>[m(c(r.analysisCount)+" análises • "+c(r.issuesCount)+" issues • Score: "+c(r.qualityScore.toFixed(1)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):se("",!0)])}const sa=k(qt,[["render",Lt],["__scopeId","data-v-ed7dad95"],["__file","D:/Development/Projetos/Mira/mira-client/src/views/dashboard/DashboardView.vue"]]);export{sa as default};
