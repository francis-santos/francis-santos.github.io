import{k as se,$ as V,a1 as a,q as t,z as s,_ as y,a0 as P,a8 as r,W as c,x as ve,a9 as de,ae as B,F as G,a2 as m,f as _,j as ye,r as me,w as Z,E as xe}from"./vendor-vue-BOgiBTV5.js";import{V as be,s as D}from"./VRating-C2QnEnFz.js";import{u as ue,V as z}from"./VChip-rM5LjFon.js";import{_ as oe,a as p,b as A,c as ce}from"./index-CPKBv9AR.js";import{V as Ve}from"./VMenu-vHpHdbAo.js";import{a as _e,b as Q,c as X,V as N}from"./VList-BKPY6TWC.js";import{V as ie}from"./VSpacer-CBt-5M7F.js";import{b as L,c as fe,V as I,a as ke}from"./VGrid-BsndwDIl.js";import{V as we}from"./VForm-pUagEOzw.js";import{V as Se}from"./VContainer-BLfJzg3Y.js";import{V as U,a as d}from"./VRow-xKwg0MSP.js";import{V as h}from"./VTextField-DiiVGj7F.js";import{V as O}from"./VTextarea-ndrXJOcn.js";import{V as Y}from"./VSelect-BBg-Hfm2.js";import{V as pe}from"./VSwitch-BvA2_gQQ.js";import{V as Ce}from"./VSlider-DlsnBeVX.js";import{V as ne}from"./VCombobox-GEMXSY4H.js";import{V as Ae}from"./VDialog-CkQu3sn-.js";import{V as Te}from"./VPagination-BAn_hqPp.js";import"./auth-Dt5LZyuD.js";import"./vendor-utils-C9OYYH06.js";import"./token-storage.service-BqAv9k07.js";import"./vendor-ui-BR0KSDoQ.js";import"./index-DzEvJ-T3.js";import"./dialog-transition-BRPqoOP4.js";import"./ssrBoot-Cswv876e.js";import"./autofocus-DZuUxpyU.js";import"./filter-BU9fsv7R.js";const De=se({__name:"SpecialistCard",props:{specialist:{type:Object,required:!0}},emits:["click","edit","duplicate","toggle-active","delete"],setup(k,{expose:e}){e();const{isDemoUser:n}=ue(),S={isDemoUser:n,getTypeIcon:g=>({language:"mdi-code-tags",framework:"mdi-application-cog",security:"mdi-shield-check",custom:"mdi-cog"})[g]||"mdi-help-circle",getTypeColor:g=>({language:"primary",framework:"success",security:"error",custom:"purple"})[g]||"grey",getTypeLabel:g=>({language:"Linguagem",framework:"Framework",security:"Segurança",custom:"Personalizado"})[g],getStatusColor:g=>{switch(g){case"active":return"success";case"inactive":return"error";case"draft":return"warning";default:return"grey"}},getStatusLabel:g=>({active:"Ativo",inactive:"Inativo",draft:"Rascunho"})[g],formatRelativeTime:g=>{const u=new Date().getTime()-new Date(g).getTime(),j=Math.floor(u/(1e3*60*60)),F=Math.floor(j/24);return F>0?`há ${F}d`:j>0?`há ${j}h`:"agora"}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),Pe={class:"d-flex align-center justify-space-between mb-3"},Ee={class:"d-flex align-center"},ze={class:"mb-3"},Ie={class:"text-h6 font-weight-bold text-truncate mb-1"},Ue={class:"d-flex align-center"},Re={class:"text-body-2 text-grey-darken-1"},Le={class:"mb-3"},je={class:"d-flex flex-wrap gap-1"},Me={class:"mb-3"},Fe={class:"d-flex justify-space-between text-caption"},he={class:"d-flex align-center"},qe={class:"d-flex align-center"},Oe={class:"d-flex align-center"},Ne={key:0,class:"mb-3"},Be={class:"d-flex flex-wrap gap-1"},Ge={class:"d-flex align-center justify-space-between"},We={class:"d-flex align-center"},He={class:"text-caption"},Je={class:"d-flex align-center gap-2"},Ke={key:1,class:"mt-3"},Qe={class:"d-flex flex-wrap gap-1"},Xe={class:"text-caption text-grey-darken-1"},Ye={class:"d-flex align-center"};function Ze(k,e,n,l,w,T){return m(),V(I,{class:"specialist-card h-100",variant:"outlined",hover:"",onClick:e[5]||(e[5]=i=>k.$emit("click"))},{default:a(()=>[t(L,{class:"pb-2"},{default:a(()=>[s("div",Pe,[s("div",Ee,[t(p,{color:l.getTypeColor(n.specialist.type),size:"24",class:"mr-2"},{default:a(()=>[r(c(l.getTypeIcon(n.specialist.type)),1)]),_:1},8,["color"]),t(z,{color:l.getTypeColor(n.specialist.type),size:"small",variant:"tonal"},{default:a(()=>[r(c(l.getTypeLabel(n.specialist.type)),1)]),_:1},8,["color"])]),l.isDemoUser?P("",!0):(m(),V(Ve,{key:0},{activator:a(({props:i})=>[t(A,ve({icon:"mdi-dots-vertical",variant:"text",size:"small"},i,{onClick:e[0]||(e[0]=de(()=>{},["stop"]))}),null,16)]),default:a(()=>[t(_e,null,{default:a(()=>[t(Q,{onClick:e[1]||(e[1]=i=>k.$emit("edit",n.specialist.id))},{prepend:a(()=>[t(p,null,{default:a(()=>[...e[6]||(e[6]=[r("mdi-pencil",-1)])]),_:1})]),default:a(()=>[t(X,null,{default:a(()=>[...e[7]||(e[7]=[r("Editar",-1)])]),_:1})]),_:1}),t(Q,{onClick:e[2]||(e[2]=i=>k.$emit("duplicate",n.specialist.id))},{prepend:a(()=>[t(p,null,{default:a(()=>[...e[8]||(e[8]=[r("mdi-content-copy",-1)])]),_:1})]),default:a(()=>[t(X,null,{default:a(()=>[...e[9]||(e[9]=[r("Duplicar",-1)])]),_:1})]),_:1}),t(Q,{onClick:e[3]||(e[3]=i=>k.$emit("toggle-active",n.specialist.id,!n.specialist.isActive))},{prepend:a(()=>[t(p,null,{default:a(()=>[r(c(n.specialist.isActive?"mdi-pause":"mdi-play"),1)]),_:1})]),default:a(()=>[t(X,null,{default:a(()=>[r(c(n.specialist.isActive?"Desativar":"Ativar"),1)]),_:1})]),_:1}),t(N),t(Q,{onClick:e[4]||(e[4]=i=>k.$emit("delete",n.specialist.id)),class:"text-error"},{prepend:a(()=>[t(p,{color:"error"},{default:a(()=>[...e[10]||(e[10]=[r("mdi-delete",-1)])]),_:1})]),default:a(()=>[t(X,null,{default:a(()=>[...e[11]||(e[11]=[r("Excluir",-1)])]),_:1})]),_:1})]),_:1})]),_:1}))]),s("div",ze,[s("div",Ie,c(n.specialist.name),1),s("div",Ue,[t(p,{size:"16",class:"mr-1"},{default:a(()=>[...e[12]||(e[12]=[r("mdi-code-tags",-1)])]),_:1}),s("span",Re,c(n.specialist.language),1),t(ie),t(z,{color:l.getStatusColor(n.specialist.status),size:"x-small",variant:"tonal"},{default:a(()=>[r(c(l.getStatusLabel(n.specialist.status)),1)]),_:1},8,["color"])])]),s("div",Le,[e[13]||(e[13]=s("div",{class:"text-subtitle-2 font-weight-bold mb-1"},"Extensões",-1)),s("div",je,[(m(!0),y(G,null,B(n.specialist.extensions.slice(0,4),i=>(m(),V(z,{key:i,size:"x-small",variant:"outlined",color:"primary"},{default:a(()=>[r(c(i),1)]),_:2},1024))),128)),n.specialist.extensions.length>4?(m(),V(z,{key:0,size:"x-small",variant:"text",color:"grey"},{default:a(()=>[r(" +"+c(n.specialist.extensions.length-4),1)]),_:1})):P("",!0)])]),s("div",Me,[e[17]||(e[17]=s("div",{class:"text-subtitle-2 font-weight-bold mb-1"},"Padrões de Análise",-1)),s("div",Fe,[s("div",he,[t(p,{size:"12",color:"error",class:"mr-1"},{default:a(()=>[...e[14]||(e[14]=[r("mdi-shield",-1)])]),_:1}),s("span",null,c(n.specialist.patterns.security.length)+" segurança",1)]),s("div",qe,[t(p,{size:"12",color:"warning",class:"mr-1"},{default:a(()=>[...e[15]||(e[15]=[r("mdi-speedometer",-1)])]),_:1}),s("span",null,c(n.specialist.patterns.performance.length)+" performance",1)]),s("div",Oe,[t(p,{size:"12",color:"info",class:"mr-1"},{default:a(()=>[...e[16]||(e[16]=[r("mdi-check-circle",-1)])]),_:1}),s("span",null,c(n.specialist.patterns.quality.length)+" qualidade",1)])])]),n.specialist.frameworks?.length?(m(),y("div",Ne,[e[18]||(e[18]=s("div",{class:"text-subtitle-2 font-weight-bold mb-1"},"Frameworks",-1)),s("div",Be,[(m(!0),y(G,null,B(n.specialist.frameworks.slice(0,3),i=>(m(),V(z,{key:i.name,size:"small",variant:"tonal",color:"success"},{default:a(()=>[r(c(i.name),1)]),_:2},1024))),128)),n.specialist.frameworks.length>3?(m(),V(z,{key:0,size:"small",variant:"text",color:"grey"},{default:a(()=>[r(" +"+c(n.specialist.frameworks.length-3),1)]),_:1})):P("",!0)])])):P("",!0),s("div",Ge,[s("div",We,[t(p,{color:n.specialist.isActive?"success":"error",size:"12",class:"mr-1"},{default:a(()=>[...e[19]||(e[19]=[r(" mdi-circle ",-1)])]),_:1},8,["color"]),s("span",He,c(n.specialist.isActive?"Ativo":"Inativo"),1)]),s("div",Je,[t(z,{size:"x-small",variant:"outlined",color:"grey"},{default:a(()=>[r(" v"+c(n.specialist.version),1)]),_:1}),n.specialist.isGlobal?(m(),V(z,{key:0,size:"x-small",variant:"tonal",color:"purple"},{default:a(()=>[...e[20]||(e[20]=[r(" Global ",-1)])]),_:1})):P("",!0)])]),n.specialist.tags?.length?(m(),y("div",Ke,[s("div",Qe,[(m(!0),y(G,null,B(n.specialist.tags.slice(0,3),i=>(m(),V(z,{key:i,size:"x-small",variant:"outlined",color:"grey"},{default:a(()=>[r(" # "+c(i),1)]),_:2},1024))),128))])])):P("",!0)]),_:1}),t(fe,{class:"pt-0"},{default:a(()=>[s("div",Xe," Atualizado "+c(l.formatRelativeTime(n.specialist.updatedAt)),1),t(ie),s("div",Ye,[e[21]||(e[21]=s("span",{class:"text-caption text-grey-darken-1 mr-1"},"Prioridade:",-1)),t(be,{"model-value":Math.min(n.specialist.priority,5),density:"compact",size:"x-small",readonly:"",color:"orange"},null,8,["model-value"])])]),_:1})]),_:1})}const $e=oe(De,[["render",Ze],["__scopeId","data-v-f718aeff"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/experts/SpecialistCard.vue"]]),et=se({__name:"SpecialistFormDialog",props:{modelValue:{type:Boolean,required:!0},specialistId:{type:[String,null],required:!1,default:null},organizationId:{type:String,required:!0}},emits:["update:modelValue","saved"],setup(k,{expose:e,emit:n}){e();const l=k,w=n,T=_(),i=_(!1),x=_(!1),b=_(!1),S=_(null),g=_(null),v=ye(()=>!!l.specialistId),u=me({name:"",language:"",description:"",type:"language",systemPrompt:"",analysisPrompt:"",isActive:!0,maxTokens:2e3,temperature:.7,priority:50,tags:[],expertiseAreas:[],notes:""}),j=[{title:"Linguagem",value:"language"},{title:"Framework",value:"framework"},{title:"Segurança",value:"security"},{title:"Personalizado",value:"custom"}],F=[o=>!!o||"Nome é obrigatório",o=>o.length>=3||"Nome deve ter pelo menos 3 caracteres"],C=[o=>!!o||"Linguagem é obrigatória"],$=[o=>!!o||"Descrição é obrigatória",o=>o.length>=10||"Descrição deve ter pelo menos 10 caracteres"],ee=[o=>!!o||"Tipo é obrigatório"],te=[o=>!!o||"Prompt do sistema é obrigatório",o=>o.length>=50||"Prompt deve ter pelo menos 50 caracteres"],le=[o=>!!o||"Prompt de análise é obrigatório",o=>o.length>=30||"Prompt deve ter pelo menos 30 caracteres"],W=[o=>o>=100||"Mínimo de 100 tokens",o=>o<=4e3||"Máximo de 4000 tokens"],ae=[o=>o>=0||"Mínimo 0",o=>o<=2||"Máximo 2"],H=async()=>{if(l.specialistId){b.value=!0,S.value=null;try{const o=await D.getSpecialist(l.organizationId,l.specialistId);g.value=o,J(o)}catch(o){S.value=o instanceof Error?o.message:"Erro ao carregar especialista"}finally{b.value=!1}}},J=o=>{u.name=o.name,u.language=o.language,u.description=o.description||"",u.type=o.type,u.systemPrompt=o.systemMessage||"",u.analysisPrompt=o.analysisInstructions?.general||"",u.isActive=o.isActive,u.maxTokens=2e3,u.temperature=.7,u.priority=o.priority||50,u.tags=o.tags||[],u.expertiseAreas=[],u.notes=""},M=()=>{Object.assign(u,{name:"",language:"",description:"",type:"language",systemPrompt:"",analysisPrompt:"",isActive:!0,maxTokens:2e3,temperature:.7,priority:50,tags:[],expertiseAreas:[],notes:""}),T.value?.resetValidation(),i.value=!1},K=()=>{u.expertiseAreas.push({name:"",description:"",keywords:[]})},f=o=>{u.expertiseAreas.splice(o,1)},E=async()=>{if(T.value?.validate()){x.value=!0;try{const o={...u,expertiseAreas:u.expertiseAreas.filter(ge=>ge.name.trim())};v.value&&l.specialistId?await D.updateSpecialist(l.organizationId,l.specialistId,o):await D.createSpecialist(l.organizationId,o),w("saved")}catch(o){console.error("Erro ao salvar especialista:",o)}finally{x.value=!1}}},q=()=>{M(),w("update:modelValue",!1)};Z(()=>l.modelValue,o=>{o?v.value?H():M():(S.value=null,g.value=null,M())}),Z(()=>l.specialistId,()=>{M(),S.value=null,g.value=null});const re={props:l,emit:w,formRef:T,valid:i,loading:x,loadingSpecialist:b,error:S,specialist:g,isEditing:v,form:u,typeOptions:j,nameRules:F,languageRules:C,descriptionRules:$,typeRules:ee,systemPromptRules:te,analysisPromptRules:le,maxTokensRules:W,temperatureRules:ae,loadSpecialist:H,populateForm:J,resetForm:M,addExpertiseArea:K,removeExpertiseArea:f,submit:E,handleCancel:q};return Object.defineProperty(re,"__isScriptSetup",{enumerable:!1,value:!0}),re}}),tt={class:"d-flex align-center"},lt={key:0,class:"text-center py-8"},at={key:1,class:"text-center py-8"},it={class:"text-body-2 text-grey-darken-1 mb-4"},st={class:"text-h6 mb-4 d-flex align-center"},ot={class:"text-h6 mb-4 d-flex align-center"},rt={class:"text-h6 mb-4 d-flex align-center"},nt={class:"text-h6 mb-4 d-flex align-center"},dt={class:"d-flex align-center justify-space-between mb-3"},mt={class:"text-subtitle-1"},ut={class:"text-center"},ct={class:"text-h6 mb-4 d-flex align-center"};function ft(k,e,n,l,w,T){return m(),V(Ae,{"model-value":n.modelValue,"onUpdate:modelValue":e[13]||(e[13]=i=>k.$emit("update:modelValue",i)),"max-width":"1000",persistent:"",scrollable:""},{default:a(()=>[t(I,null,{default:a(()=>[t(ke,{class:"text-h6 d-flex align-center justify-space-between bg-primary text-white sticky-header"},{default:a(()=>[s("div",tt,[t(p,{class:"me-2"},{default:a(()=>[...e[14]||(e[14]=[r("mdi-robot",-1)])]),_:1}),r(" "+c(l.isEditing?"Editar Especialista IA":"Criar Novo Especialista IA"),1)]),t(A,{icon:"mdi-close",variant:"text",size:"small",color:"white",onClick:l.handleCancel})]),_:1}),t(L,{class:"pa-6"},{default:a(()=>[l.isEditing&&l.loadingSpecialist?(m(),y("div",lt,[t(ce,{indeterminate:"",color:"primary",size:"64"}),e[15]||(e[15]=s("div",{class:"mt-4 text-body-1"},"Carregando especialista...",-1))])):l.error?(m(),y("div",at,[t(p,{size:"64",color:"error",class:"mb-4"},{default:a(()=>[...e[16]||(e[16]=[r("mdi-alert-circle",-1)])]),_:1}),e[18]||(e[18]=s("div",{class:"text-h6 mb-2"},"Erro ao carregar especialista",-1)),s("div",it,c(l.error),1),l.isEditing?(m(),V(A,{key:0,color:"primary",onClick:l.loadSpecialist},{default:a(()=>[...e[17]||(e[17]=[r("Tentar Novamente",-1)])]),_:1})):P("",!0)])):(m(),V(we,{key:2,ref:"formRef",modelValue:l.valid,"onUpdate:modelValue":e[12]||(e[12]=i=>l.valid=i),onSubmit:de(l.submit,["prevent"])},{default:a(()=>[t(Se,null,{default:a(()=>[t(U,null,{default:a(()=>[t(d,{cols:"12"},{default:a(()=>[s("h3",st,[t(p,{class:"mr-2"},{default:a(()=>[...e[19]||(e[19]=[r("mdi-information",-1)])]),_:1}),e[20]||(e[20]=r(" Informações Básicas ",-1))])]),_:1}),t(d,{cols:"12",md:"6"},{default:a(()=>[t(h,{modelValue:l.form.name,"onUpdate:modelValue":e[0]||(e[0]=i=>l.form.name=i),label:"Nome do Especialista *",rules:l.nameRules,variant:"outlined","prepend-inner-icon":"mdi-robot",required:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:a(()=>[t(h,{modelValue:l.form.language,"onUpdate:modelValue":e[1]||(e[1]=i=>l.form.language=i),label:"Linguagem *",rules:l.languageRules,variant:"outlined","prepend-inner-icon":"mdi-code-tags",required:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12"},{default:a(()=>[t(O,{modelValue:l.form.description,"onUpdate:modelValue":e[2]||(e[2]=i=>l.form.description=i),label:"Descrição *",rules:l.descriptionRules,variant:"outlined",rows:"3",required:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:a(()=>[t(Y,{modelValue:l.form.type,"onUpdate:modelValue":e[3]||(e[3]=i=>l.form.type=i),items:l.typeOptions,label:"Tipo de Especialista *",variant:"outlined","item-title":"title","item-value":"value",rules:l.typeRules,required:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:a(()=>[t(pe,{modelValue:l.form.isActive,"onUpdate:modelValue":e[4]||(e[4]=i=>l.form.isActive=i),label:"Especialista ativo",color:"primary","hide-details":""},null,8,["modelValue"]),e[21]||(e[21]=s("div",{class:"text-caption text-grey mt-1"}," Define se o especialista será usado nas análises ",-1))]),_:1})]),_:1}),t(N,{class:"my-6"}),t(U,null,{default:a(()=>[t(d,{cols:"12"},{default:a(()=>[s("h3",ot,[t(p,{class:"mr-2"},{default:a(()=>[...e[22]||(e[22]=[r("mdi-message-text",-1)])]),_:1}),e[23]||(e[23]=r(" Configuração do Prompt ",-1))])]),_:1}),t(d,{cols:"12"},{default:a(()=>[t(O,{modelValue:l.form.systemPrompt,"onUpdate:modelValue":e[5]||(e[5]=i=>l.form.systemPrompt=i),label:"Prompt do Sistema *",rules:l.systemPromptRules,variant:"outlined",rows:"6",placeholder:"Você é um especialista em... Configure o comportamento e expertise do especialista.",required:""},null,8,["modelValue"]),e[24]||(e[24]=s("div",{class:"text-caption text-grey mt-1"}," Define a personalidade, expertise e comportamento do especialista ",-1))]),_:1}),t(d,{cols:"12"},{default:a(()=>[t(O,{modelValue:l.form.analysisPrompt,"onUpdate:modelValue":e[6]||(e[6]=i=>l.form.analysisPrompt=i),label:"Prompt de Análise *",rules:l.analysisPromptRules,variant:"outlined",rows:"4",placeholder:"Analise o código fornecido focando em... Forneça sugestões específicas...",required:""},null,8,["modelValue"]),e[25]||(e[25]=s("div",{class:"text-caption text-grey mt-1"}," Instruções específicas para análise de código ",-1))]),_:1})]),_:1}),t(N,{class:"my-6"}),t(U,null,{default:a(()=>[t(d,{cols:"12"},{default:a(()=>[s("h3",rt,[t(p,{class:"mr-2"},{default:a(()=>[...e[26]||(e[26]=[r("mdi-cog",-1)])]),_:1}),e[27]||(e[27]=r(" Configurações ",-1))])]),_:1}),t(d,{cols:"12",md:"6"},{default:a(()=>[t(h,{modelValue:l.form.maxTokens,"onUpdate:modelValue":e[7]||(e[7]=i=>l.form.maxTokens=i),modelModifiers:{number:!0},label:"Máximo de Tokens",type:"number",variant:"outlined",min:"100",max:"4000",rules:l.maxTokensRules},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:a(()=>[t(Ce,{modelValue:l.form.temperature,"onUpdate:modelValue":e[8]||(e[8]=i=>l.form.temperature=i),label:"Temperatura",min:"0",max:"2",step:"0.1","thumb-label":"",rules:l.temperatureRules},null,8,["modelValue"]),e[28]||(e[28]=s("div",{class:"text-caption text-grey"}," Controla a criatividade das respostas (0 = conservador, 2 = criativo) ",-1))]),_:1}),t(d,{cols:"12",md:"4"},{default:a(()=>[t(h,{modelValue:l.form.priority,"onUpdate:modelValue":e[9]||(e[9]=i=>l.form.priority=i),modelModifiers:{number:!0},label:"Prioridade",type:"number",variant:"outlined",min:"1",max:"100",hint:"1-100 (maior = mais prioritário)","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"8"},{default:a(()=>[t(ne,{modelValue:l.form.tags,"onUpdate:modelValue":e[10]||(e[10]=i=>l.form.tags=i),label:"Tags",variant:"outlined",multiple:"",chips:"","closable-chips":"",placeholder:"Adicione tags para organização"},null,8,["modelValue"])]),_:1})]),_:1}),t(N,{class:"my-6"}),t(U,null,{default:a(()=>[t(d,{cols:"12"},{default:a(()=>[s("h3",nt,[t(p,{class:"mr-2"},{default:a(()=>[...e[29]||(e[29]=[r("mdi-school",-1)])]),_:1}),e[30]||(e[30]=r(" Áreas de Especialização ",-1))])]),_:1}),t(d,{cols:"12"},{default:a(()=>[(m(!0),y(G,null,B(l.form.expertiseAreas,(i,x)=>(m(),y("div",{key:x,class:"mb-4"},[t(I,{variant:"outlined",class:"pa-4"},{default:a(()=>[s("div",dt,[s("h4",mt,"Área "+c(x+1),1),t(A,{icon:"mdi-delete-outline",size:"small",color:"error",variant:"text",onClick:b=>l.removeExpertiseArea(x),title:`Remover área ${x+1}`},null,8,["onClick","title"])]),t(U,null,{default:a(()=>[t(d,{cols:"12",md:"4"},{default:a(()=>[t(h,{modelValue:i.name,"onUpdate:modelValue":b=>i.name=b,label:"Nome da Área",variant:"outlined",density:"compact",placeholder:"Ex: Segurança, Performance..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(d,{cols:"12",md:"8"},{default:a(()=>[t(O,{modelValue:i.description,"onUpdate:modelValue":b=>i.description=b,label:"Descrição",variant:"outlined",rows:"2",density:"compact",placeholder:"Descreva o que o especialista sabe sobre esta área..."},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(ne,{modelValue:i.keywords,"onUpdate:modelValue":b=>i.keywords=b,label:"Palavras-chave",variant:"outlined",multiple:"",chips:"","closable-chips":"",density:"compact",placeholder:"Adicione palavras-chave relacionadas"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]))),128)),s("div",ut,[t(A,{"prepend-icon":"mdi-plus-circle-outline",variant:"outlined",color:"primary",onClick:l.addExpertiseArea,class:"px-6"},{default:a(()=>[...e[31]||(e[31]=[r(" Adicionar Área de Especialização ",-1)])]),_:1})])]),_:1})]),_:1}),t(N,{class:"my-6"}),t(U,null,{default:a(()=>[t(d,{cols:"12"},{default:a(()=>[s("h3",ct,[t(p,{class:"mr-2"},{default:a(()=>[...e[32]||(e[32]=[r("mdi-note-text",-1)])]),_:1}),e[33]||(e[33]=r(" Observações Adicionais ",-1))])]),_:1}),t(d,{cols:"12"},{default:a(()=>[t(O,{modelValue:l.form.notes,"onUpdate:modelValue":e[11]||(e[11]=i=>l.form.notes=i),label:"Observações",variant:"outlined",rows:"3",placeholder:"Notas internas sobre este especialista..."},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))]),_:1}),t(fe,{class:"px-6 py-4 bg-surface border-t"},{default:a(()=>[t(ie),t(A,{variant:"text",onClick:l.handleCancel,disabled:l.loading},{default:a(()=>[...e[34]||(e[34]=[r(" Cancelar ",-1)])]),_:1},8,["disabled"]),t(A,{color:"primary",variant:"flat",loading:l.loading,disabled:!l.valid||l.isEditing&&l.loadingSpecialist,onClick:l.submit},{default:a(()=>[r(c(l.isEditing?"Salvar Alterações":"Criar Especialista"),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])}const pt=oe(et,[["render",ft],["__scopeId","data-v-a1441e88"],["__file","D:/Development/Projetos/Mira/mira-client/src/components/experts/SpecialistFormDialog.vue"]]),R="b1e58ac3-6a88-4fc3-846d-352c8ca4a1db",gt=se({__name:"ExpertsView",setup(k,{expose:e}){e();const{isDemoUser:n}=ue(),l=_(!1),w=_(null),T=_({data:[],meta:{total:0,page:1,limit:12,totalPages:0}}),i=_(null),x=_([]),b=_(!1),S=_(null),g=_(1),v=me({search:"",type:void 0,status:void 0,language:void 0,isActive:void 0,page:1,limit:12});let u=null;Z(v,()=>{v.page=1,g.value=1,u&&clearTimeout(u),u=setTimeout(()=>{C(),u=null},350)},{deep:!0});const j=[{title:"Linguagem",value:"language"},{title:"Framework",value:"framework"},{title:"Segurança",value:"security"},{title:"Personalizado",value:"custom"}],F=[{title:"Ativo",value:"active"},{title:"Inativo",value:"inactive"},{title:"Rascunho",value:"draft"}],C=async()=>{b.value=!0,S.value=null;try{const[f,E,q]=await Promise.all([D.getSpecialists(R,v),D.getStats(R),D.getLanguages(R)]);T.value=f,i.value=E,x.value=q}catch(f){console.error("Erro ao carregar dados:",f),S.value=f instanceof Error?f.message:"Erro ao carregar dados"}finally{b.value=!1}},$=()=>{C()},ee=()=>{v.search="",v.type=void 0,v.status=void 0,v.language=void 0,v.isActive=void 0,g.value=1,v.page=1,C()},te=f=>{g.value=f,v.page=f,C()},le=f=>{W(f)},W=f=>{w.value=f,l.value=!0},ae=()=>{l.value=!1,w.value=null,C()};Z(l,f=>{f||setTimeout(()=>{w.value=null},100)});const H=async f=>{try{await D.duplicateSpecialist(R,f),C()}catch(E){console.error("Erro ao duplicar especialista:",E)}},J=async(f,E)=>{try{E?await D.activateSpecialist(R,f):await D.deactivateSpecialist(R,f),C()}catch(q){console.error("Erro ao alterar status:",q)}},M=async f=>{try{await D.deleteSpecialist(R,f),C()}catch(E){console.error("Erro ao deletar especialista:",E)}};xe(()=>{C()});const K={isDemoUser:n,organizationId:R,showSpecialistDialog:l,editingSpecialistId:w,specialists:T,stats:i,availableLanguages:x,loading:b,error:S,currentPage:g,filters:v,get filterTimer(){return u},set filterTimer(f){u=f},typeOptions:j,statusOptions:F,loadData:C,refreshData:$,clearFilters:ee,onPageChange:te,viewSpecialistDetails:le,openEditDialog:W,onSpecialistSaved:ae,duplicateSpecialist:H,toggleActive:J,deleteSpecialist:M,SpecialistCard:$e,SpecialistFormDialog:pt};return Object.defineProperty(K,"__isScriptSetup",{enumerable:!1,value:!0}),K}}),vt={class:"specialists-page"},yt={class:"d-flex align-center justify-space-between mb-6"},xt={class:"d-flex align-center gap-3"},bt={class:"d-flex align-center"},Vt={class:"text-h5 font-weight-bold"},_t={class:"d-flex align-center"},kt={class:"text-h5 font-weight-bold"},wt={class:"d-flex align-center"},St={class:"text-h5 font-weight-bold"},Ct={class:"d-flex align-center"},At={class:"text-h5 font-weight-bold"},Tt={key:0,class:"text-center py-8"},Dt={key:1,class:"text-center py-8"},Pt={class:"text-body-2 text-grey-darken-1 mb-4"},Et={class:"text-body-2 text-grey-darken-1"},zt={key:0},It={key:1},Ut={key:3,class:"d-flex justify-center mt-6"};function Rt(k,e,n,l,w,T){return m(),y("div",vt,[s("div",yt,[e[10]||(e[10]=s("div",null,[s("h1",{class:"text-h4 font-weight-bold text-high-emphasis mb-2"}," Especialistas IA "),s("p",{class:"text-body-1 text-grey-darken-1"}," Gerencie os especialistas de IA para análise de código ")],-1)),s("div",xt,[t(A,{color:"primary","prepend-icon":"mdi-refresh",onClick:l.refreshData,loading:l.loading},{default:a(()=>[...e[8]||(e[8]=[r(" Atualizar ",-1)])]),_:1},8,["loading"]),l.isDemoUser?P("",!0):(m(),V(A,{key:0,color:"success","prepend-icon":"mdi-plus",variant:"elevated",onClick:e[0]||(e[0]=i=>l.showSpecialistDialog=!0),class:"ml-2"},{default:a(()=>[...e[9]||(e[9]=[r(" Criar Especialista ",-1)])]),_:1}))])]),t(U,{class:"mb-6"},{default:a(()=>[t(d,{cols:"12",sm:"6",md:"3"},{default:a(()=>[t(I,{color:"primary",variant:"tonal"},{default:a(()=>[t(L,null,{default:a(()=>[s("div",bt,[t(p,{size:"32",class:"mr-3"},{default:a(()=>[...e[11]||(e[11]=[r("mdi-robot",-1)])]),_:1}),s("div",null,[s("div",Vt,c(l.stats?.total||0),1),e[12]||(e[12]=s("div",{class:"text-caption"},"Total de Especialistas",-1))])])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12",sm:"6",md:"3"},{default:a(()=>[t(I,{color:"success",variant:"tonal"},{default:a(()=>[t(L,null,{default:a(()=>[s("div",_t,[t(p,{size:"32",class:"mr-3"},{default:a(()=>[...e[13]||(e[13]=[r("mdi-check-circle",-1)])]),_:1}),s("div",null,[s("div",kt,c(l.stats?.active||0),1),e[14]||(e[14]=s("div",{class:"text-caption"},"Ativos",-1))])])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12",sm:"6",md:"3"},{default:a(()=>[t(I,{color:"warning",variant:"tonal"},{default:a(()=>[t(L,null,{default:a(()=>[s("div",wt,[t(p,{size:"32",class:"mr-3"},{default:a(()=>[...e[15]||(e[15]=[r("mdi-pause-circle",-1)])]),_:1}),s("div",null,[s("div",St,c(l.stats?.inactive||0),1),e[16]||(e[16]=s("div",{class:"text-caption"},"Inativos",-1))])])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12",sm:"6",md:"3"},{default:a(()=>[t(I,{color:"info",variant:"tonal"},{default:a(()=>[t(L,null,{default:a(()=>[s("div",Ct,[t(p,{size:"32",class:"mr-3"},{default:a(()=>[...e[17]||(e[17]=[r("mdi-earth",-1)])]),_:1}),s("div",null,[s("div",At,c(l.stats?.byType?Object.values(l.stats.byType).reduce((i,x)=>i+x,0):0),1),e[18]||(e[18]=s("div",{class:"text-caption"},"Globais",-1))])])]),_:1})]),_:1})]),_:1})]),_:1}),t(I,{class:"mb-6"},{default:a(()=>[t(L,null,{default:a(()=>[t(U,null,{default:a(()=>[t(d,{cols:"12",md:"3"},{default:a(()=>[t(h,{modelValue:l.filters.search,"onUpdate:modelValue":e[1]||(e[1]=i=>l.filters.search=i),label:"Buscar especialistas","prepend-inner-icon":"mdi-magnify",clearable:"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"2"},{default:a(()=>[t(Y,{modelValue:l.filters.type,"onUpdate:modelValue":e[2]||(e[2]=i=>l.filters.type=i),items:l.typeOptions,"item-title":"title","item-value":"value",label:"Tipo",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"2"},{default:a(()=>[t(Y,{modelValue:l.filters.status,"onUpdate:modelValue":e[3]||(e[3]=i=>l.filters.status=i),items:l.statusOptions,"item-title":"title","item-value":"value",label:"Status",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"2"},{default:a(()=>[t(Y,{modelValue:l.filters.language,"onUpdate:modelValue":e[4]||(e[4]=i=>l.filters.language=i),items:l.availableLanguages,label:"Linguagem",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12",md:"2"},{default:a(()=>[t(pe,{modelValue:l.filters.isActive,"onUpdate:modelValue":e[5]||(e[5]=i=>l.filters.isActive=i),label:"Apenas ativos",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"1"},{default:a(()=>[t(A,{icon:"mdi-filter-off",variant:"outlined",onClick:l.clearFilters,title:"Limpar filtros"})]),_:1})]),_:1})]),_:1})]),_:1}),l.loading?(m(),y("div",Tt,[t(ce,{indeterminate:"",color:"primary",size:"64"}),e[19]||(e[19]=s("div",{class:"mt-4 text-body-1"},"Carregando especialistas...",-1))])):l.error?(m(),y("div",Dt,[t(p,{size:"64",color:"error",class:"mb-4"},{default:a(()=>[...e[20]||(e[20]=[r("mdi-alert-circle",-1)])]),_:1}),e[22]||(e[22]=s("div",{class:"text-h6 mb-2"},"Erro ao carregar dados",-1)),s("div",Pt,c(l.error),1),t(A,{color:"primary",onClick:l.refreshData},{default:a(()=>[...e[21]||(e[21]=[r("Tentar Novamente",-1)])]),_:1})])):(m(),V(U,{key:2},{default:a(()=>[(m(!0),y(G,null,B(l.specialists.data,i=>(m(),V(d,{key:i.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:a(()=>[t(l.SpecialistCard,{specialist:i,onClick:x=>l.viewSpecialistDetails(i.id),onEdit:l.openEditDialog,onDuplicate:l.duplicateSpecialist,onToggleActive:l.toggleActive,onDelete:l.deleteSpecialist},null,8,["specialist","onClick"])]),_:2},1024))),128)),l.specialists.data?.length?P("",!0):(m(),V(d,{key:0,cols:"12"},{default:a(()=>[t(I,{class:"text-center py-8"},{default:a(()=>[t(L,null,{default:a(()=>[t(p,{size:"64",color:"grey",class:"mb-4"},{default:a(()=>[...e[23]||(e[23]=[r("mdi-robot",-1)])]),_:1}),e[24]||(e[24]=s("div",{class:"text-h6 mb-2"},"Nenhum especialista encontrado",-1)),s("div",Et,[l.isDemoUser?(m(),y("span",It,"Tente ajustar os filtros para encontrar especialistas")):(m(),y("span",zt,"Tente ajustar os filtros ou criar um novo especialista"))])]),_:1})]),_:1})]),_:1}))]),_:1})),l.specialists.meta.totalPages>1?(m(),y("div",Ut,[t(Te,{modelValue:l.currentPage,"onUpdate:modelValue":[e[6]||(e[6]=i=>l.currentPage=i),l.onPageChange],length:l.specialists.meta.totalPages},null,8,["modelValue","length"])])):P("",!0),t(l.SpecialistFormDialog,{modelValue:l.showSpecialistDialog,"onUpdate:modelValue":e[7]||(e[7]=i=>l.showSpecialistDialog=i),"specialist-id":l.editingSpecialistId,"organization-id":l.organizationId,onSaved:l.onSpecialistSaved},null,8,["modelValue","specialist-id"])])}const dl=oe(gt,[["render",Rt],["__scopeId","data-v-c0feefc4"],["__file","D:/Development/Projetos/Mira/mira-client/src/views/experts/ExpertsView.vue"]]);export{dl as default};
