import{j as de,d as b,h as N,D as ue,Z as y,y as n,$ as P,a0 as x,n as a,u as p,a1 as l,_ as c,aa as i,a6 as E,F as me,ah as pe,V as f}from"./vendor-vue-BKuzT1x2.js";import{u as fe}from"./auth--EmZq-C7.js";import{u as ve}from"./useDemoMode-DpDjlFnd.js";import{b as U,a as g,_ as ce}from"./index-gFSB3kms.js";import{V as be}from"./VAlert-BZmB2o6G.js";import{V as D,a as u}from"./VRow-C_u8820H.js";import{V as _,a as A,b as k,e as h,d as ge}from"./VGrid-CBGRWS1y.js";import{V as L}from"./VForm-DthKd8zl.js";import{V,a as F}from"./VSelect-BorMXFwi.js";import{V as we}from"./VTextarea-CqCSgYZa.js";import{c as Ve,a as ye,d as xe,V as _e}from"./VList-Dg4abNUz.js";import{a as I}from"./VChip-BfcyEr4e.js";import"./auth.service-BozCwdnf.js";import"./vendor-utils-6xD0fNU8.js";import"./token-storage.service-BqAv9k07.js";import"./vendor-ui-Ca7vMALJ.js";import"./form-PEXhLZdP.js";import"./autofocus-Cv2p5X6o.js";import"./dialog-transition-B8nu4acL.js";import"./VMenu-BCjbZdow.js";import"./ssrBoot-DJyMk-ri.js";const ke={class:"profile-page pa-6"},Pe={class:"d-flex align-center mb-6"},Ue={key:0,class:"d-flex justify-end mt-4"},Ae={key:0,class:"d-flex justify-end mt-4"},Se={class:"mb-4"},ze={key:1,class:"text-h3 font-weight-bold"},Ce={class:"text-h6 font-weight-medium mb-1"},Ne={class:"text-body-2 text-medium-emphasis mb-2"},De={key:0,class:"d-flex justify-center gap-2"},Re={class:"text-center"},he={class:"text-h6 font-weight-medium mb-2"},Ie={class:"mt-3 text-body-2 text-medium-emphasis"},Te={class:"mb-1"},Be={class:"text-center"},Ee={class:"text-h5 font-weight-bold text-primary"},Le={class:"text-center"},Fe={class:"text-h5 font-weight-bold text-success"},je={class:"text-center"},Me={class:"text-h5 font-weight-bold text-warning"},$e={class:"text-center"},Oe={class:"text-h5 font-weight-bold text-info"},Ye=de({__name:"ProfileView",setup(Ze){const m=fe(),{isDemoUser:r}=ve(),d=b(!1),S=b(!1),z=b(!1),T=b(null),s=b({fullName:"",username:"",email:"",phone:"",language:"pt-BR",timezone:"America/Sao_Paulo",bio:"",avatarUrl:""}),w=b({currentPassword:"",newPassword:"",confirmPassword:""}),v=b({current:!1,new:!1,confirm:!1}),j=N(()=>m.userRole),M=N(()=>m.user?.organizationName),$=N(()=>m.user?.createdAt||new Date),O=N(()=>m.user?.lastLoginAt||new Date),Y=b([{id:"1",type:"login",description:"Login realizado com sucesso (Conta Demo)",timestamp:new Date(Date.now()-7200*1e3),location:"São Paulo, SP"},{id:"2",type:"analysis",description:"Visualização de análise do repositório projeto-frontend-react",timestamp:new Date(Date.now()-14400*1e3),location:null},{id:"3",type:"profile",description:"Acesso à tela de perfil (modo demonstração)",timestamp:new Date(Date.now()-1440*60*1e3),location:null},{id:"4",type:"token",description:"Visualização de tokens de API (modo demonstração)",timestamp:new Date(Date.now()-4320*60*1e3),location:null}]),C=b({totalAnalyses:r.value?15:47,totalRepositories:r.value?3:8,totalRules:r.value?8:12,totalTokens:r.value?10:3}),Z=[{title:"Português (Brasil)",value:"pt-BR"},{title:"English (US)",value:"en-US"},{title:"Español",value:"es-ES"}],G=[{title:"Brasília (UTC-3)",value:"America/Sao_Paulo"},{title:"Nova York (UTC-5)",value:"America/New_York"},{title:"Londres (UTC+0)",value:"Europe/London"}],H=[t=>!!t||"Nome é obrigatório",t=>t.length>=2||"Nome deve ter pelo menos 2 caracteres"],J=[t=>!!t||"Nome de usuário é obrigatório",t=>t.length>=3||"Nome de usuário deve ter pelo menos 3 caracteres",t=>/^[a-zA-Z0-9._-]+$/.test(t)||"Apenas letras, números, pontos, hífens e sublinhados"],q=[t=>!!t||"E-mail é obrigatório",t=>/.+@.+\..+/.test(t)||"E-mail deve ser válido"],K=[t=>!!t||"Senha atual é obrigatória"],Q=[t=>!!t||"Nova senha é obrigatória",t=>t.length>=8||"Senha deve ter pelo menos 8 caracteres"],W=[t=>!!t||"Confirmação de senha é obrigatória",t=>t===w.value.newPassword||"Senhas não conferem"];function X(){r.value?s.value={fullName:"João Silva Demo",username:"joao.demo",email:"demo@test.mira-api.com",phone:"(11) 99999-0000",language:"pt-BR",timezone:"America/Sao_Paulo",bio:"Usuário de demonstração do sistema Mira. Esta conta é utilizada para apresentar as funcionalidades da plataforma.",avatarUrl:"https://avatar.iran.liara.run/public/boy?username=joao"}:m.user&&(s.value={fullName:m.user.fullName||"",username:m.user.username||"",email:m.user.email||"",phone:m.user.phone||"",language:m.user.language||"pt-BR",timezone:m.user.timezone||"America/Sao_Paulo",bio:m.user.bio||"",avatarUrl:m.user.avatarUrl||""})}async function ee(){if(S.value){d.value=!0;try{await new Promise(t=>setTimeout(t,1e3)),await m.updateProfile(s.value)}catch(t){console.error("Erro ao salvar perfil:",t)}finally{d.value=!1}}}async function ae(){if(z.value){d.value=!0;try{await new Promise(t=>setTimeout(t,1e3)),w.value={currentPassword:"",newPassword:"",confirmPassword:""},v.value={current:!1,new:!1,confirm:!1}}catch(t){console.error("Erro ao alterar senha:",t)}finally{d.value=!1}}}function le(){T.value?.click()}function te(t){const o=t.target.files?.[0];if(o){const B=new FileReader;B.onload=re=>{s.value.avatarUrl=re.target?.result},B.readAsDataURL(o)}}function oe(){s.value.avatarUrl=""}function se(t){return t.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)}function R(t){return new Date(t).toLocaleString("pt-BR")}function ne(t){switch(t){case"login":return"success";case"analysis":return"primary";case"profile":return"info";case"token":return"warning";default:return"grey"}}function ie(t){switch(t){case"login":return"mdi-login";case"analysis":return"mdi-chart-line";case"profile":return"mdi-account-edit";case"token":return"mdi-key";default:return"mdi-circle"}}return ue(()=>{X()}),(t,e)=>(c(),y("div",ke,[n("div",Pe,[a(U,{icon:"mdi-arrow-left",variant:"text",onClick:e[0]||(e[0]=o=>t.$router.go(-1)),class:"me-3"}),e[16]||(e[16]=n("div",null,[n("h1",{class:"text-h4 font-weight-bold text-high-emphasis mb-1"}," Meu Perfil "),n("p",{class:"text-body-1 text-medium-emphasis"}," Gerencie suas informações pessoais e configurações da conta ")],-1))]),p(r)?(c(),P(be,{key:0,type:"info",variant:"tonal",class:"mb-6","prepend-icon":"mdi-information",closable:""},{default:l(()=>[...e[17]||(e[17]=[n("div",{class:"text-body-1 font-weight-medium"},"Conta de Demonstração",-1),n("div",{class:"text-body-2 mt-1"}," Você está visualizando uma conta de demonstração. Os dados exibidos são fictícios e as funcionalidades de edição estão desabilitadas. ",-1)])]),_:1})):x("",!0),a(D,null,{default:l(()=>[a(u,{cols:"12",lg:"8"},{default:l(()=>[a(_,{elevation:"2",class:"mb-6"},{default:l(()=>[a(A,{class:"d-flex align-center"},{default:l(()=>[a(g,{class:"me-2"},{default:l(()=>[...e[18]||(e[18]=[i("mdi-account-circle",-1)])]),_:1}),e[19]||(e[19]=i(" Informações Pessoais ",-1))]),_:1}),a(k,null,{default:l(()=>[a(L,{ref:"profileForm",modelValue:S.value,"onUpdate:modelValue":e[8]||(e[8]=o=>S.value=o),onSubmit:E(ee,["prevent"])},{default:l(()=>[a(D,null,{default:l(()=>[a(u,{cols:"12",md:"6"},{default:l(()=>[a(V,{modelValue:s.value.fullName,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.fullName=o),label:"Nome Completo",rules:H,variant:"outlined","prepend-inner-icon":"mdi-account",disabled:d.value||p(r)},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",md:"6"},{default:l(()=>[a(V,{modelValue:s.value.username,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.username=o),label:"Nome de Usuário",rules:J,variant:"outlined","prepend-inner-icon":"mdi-at",disabled:d.value||p(r)},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",md:"6"},{default:l(()=>[a(V,{modelValue:s.value.email,"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.email=o),label:"E-mail",type:"email",rules:q,variant:"outlined","prepend-inner-icon":"mdi-email",disabled:d.value||p(r)},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",md:"6"},{default:l(()=>[a(V,{modelValue:s.value.phone,"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.phone=o),label:"Telefone",variant:"outlined","prepend-inner-icon":"mdi-phone",disabled:d.value||p(r)},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",md:"6"},{default:l(()=>[a(F,{modelValue:s.value.language,"onUpdate:modelValue":e[5]||(e[5]=o=>s.value.language=o),items:Z,label:"Idioma",variant:"outlined","prepend-inner-icon":"mdi-translate",disabled:d.value||p(r)},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12",md:"6"},{default:l(()=>[a(F,{modelValue:s.value.timezone,"onUpdate:modelValue":e[6]||(e[6]=o=>s.value.timezone=o),items:G,label:"Fuso Horário",variant:"outlined","prepend-inner-icon":"mdi-clock-outline",disabled:d.value||p(r)},null,8,["modelValue","disabled"])]),_:1}),a(u,{cols:"12"},{default:l(()=>[a(we,{modelValue:s.value.bio,"onUpdate:modelValue":e[7]||(e[7]=o=>s.value.bio=o),label:"Biografia",rows:"3",variant:"outlined","prepend-inner-icon":"mdi-text",disabled:d.value||p(r)},null,8,["modelValue","disabled"])]),_:1})]),_:1}),p(r)?x("",!0):(c(),y("div",Ue,[a(U,{type:"submit",color:"primary",loading:d.value,disabled:!S.value,"prepend-icon":"mdi-content-save"},{default:l(()=>[...e[20]||(e[20]=[i(" Salvar Alterações ",-1)])]),_:1},8,["loading","disabled"])]))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(_,{elevation:"2",class:"mb-6"},{default:l(()=>[a(A,{class:"d-flex align-center"},{default:l(()=>[a(g,{class:"me-2"},{default:l(()=>[...e[21]||(e[21]=[i("mdi-shield-account",-1)])]),_:1}),e[22]||(e[22]=i(" Segurança da Conta ",-1))]),_:1}),a(k,null,{default:l(()=>[a(L,{ref:"passwordForm",modelValue:z.value,"onUpdate:modelValue":e[15]||(e[15]=o=>z.value=o),onSubmit:E(ae,["prevent"])},{default:l(()=>[a(D,null,{default:l(()=>[a(u,{cols:"12",md:"4"},{default:l(()=>[a(V,{modelValue:w.value.currentPassword,"onUpdate:modelValue":e[9]||(e[9]=o=>w.value.currentPassword=o),label:"Senha Atual",type:v.value.current?"text":"password",rules:K,variant:"outlined","prepend-inner-icon":"mdi-lock","append-inner-icon":v.value.current?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[10]||(e[10]=o=>v.value.current=!v.value.current),disabled:d.value||p(r)},null,8,["modelValue","type","append-inner-icon","disabled"])]),_:1}),a(u,{cols:"12",md:"4"},{default:l(()=>[a(V,{modelValue:w.value.newPassword,"onUpdate:modelValue":e[11]||(e[11]=o=>w.value.newPassword=o),label:"Nova Senha",type:v.value.new?"text":"password",rules:Q,variant:"outlined","prepend-inner-icon":"mdi-lock-plus","append-inner-icon":v.value.new?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[12]||(e[12]=o=>v.value.new=!v.value.new),disabled:d.value||p(r)},null,8,["modelValue","type","append-inner-icon","disabled"])]),_:1}),a(u,{cols:"12",md:"4"},{default:l(()=>[a(V,{modelValue:w.value.confirmPassword,"onUpdate:modelValue":e[13]||(e[13]=o=>w.value.confirmPassword=o),label:"Confirmar Nova Senha",type:v.value.confirm?"text":"password",rules:W,variant:"outlined","prepend-inner-icon":"mdi-lock-check","append-inner-icon":v.value.confirm?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[14]||(e[14]=o=>v.value.confirm=!v.value.confirm),disabled:d.value||p(r)},null,8,["modelValue","type","append-inner-icon","disabled"])]),_:1})]),_:1}),p(r)?x("",!0):(c(),y("div",Ae,[a(U,{type:"submit",color:"secondary",loading:d.value,disabled:!z.value,"prepend-icon":"mdi-key-change"},{default:l(()=>[...e[23]||(e[23]=[i(" Alterar Senha ",-1)])]),_:1},8,["loading","disabled"])]))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(_,{elevation:"2"},{default:l(()=>[a(A,{class:"d-flex align-center"},{default:l(()=>[a(g,{class:"me-2"},{default:l(()=>[...e[24]||(e[24]=[i("mdi-history",-1)])]),_:1}),e[25]||(e[25]=i(" Atividade da Conta ",-1))]),_:1}),a(k,null,{default:l(()=>[a(Ve,null,{default:l(()=>[(c(!0),y(me,null,pe(Y.value,o=>(c(),P(_e,{key:o.id,class:"px-0"},{prepend:l(()=>[a(h,{color:ne(o.type),size:"40"},{default:l(()=>[a(g,{icon:ie(o.type),color:"white"},null,8,["icon"])]),_:2},1032,["color"])]),default:l(()=>[a(ye,null,{default:l(()=>[i(f(o.description),1)]),_:2},1024),a(xe,null,{default:l(()=>[i(f(R(o.timestamp))+" ",1),o.location?(c(),P(I,{key:0,size:"x-small",variant:"outlined",class:"ml-2"},{default:l(()=>[i(f(o.location),1)]),_:2},1024)):x("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),a(u,{cols:"12",lg:"4"},{default:l(()=>[a(_,{elevation:"2",class:"mb-6"},{default:l(()=>[a(k,{class:"text-center"},{default:l(()=>[n("div",Se,[a(h,{size:"120",class:"mb-3"},{default:l(()=>[s.value.avatarUrl?(c(),P(ge,{key:0,src:s.value.avatarUrl,alt:s.value.fullName},null,8,["src","alt"])):(c(),y("span",ze,f(se(s.value.fullName||s.value.username||"U")),1))]),_:1}),n("div",Ce,f(s.value.fullName||s.value.username),1),n("div",Ne,f(s.value.email),1),a(I,{size:"small",color:"primary",variant:"tonal"},{default:l(()=>[i(f(j.value||"Usuário"),1)]),_:1})]),p(r)?x("",!0):(c(),y("div",De,[a(U,{color:"primary",variant:"outlined",size:"small","prepend-icon":"mdi-camera",onClick:le,disabled:d.value},{default:l(()=>[...e[26]||(e[26]=[i(" Alterar Foto ",-1)])]),_:1},8,["disabled"]),s.value.avatarUrl?(c(),P(U,{key:0,color:"error",variant:"outlined",size:"small",icon:"mdi-delete",onClick:oe,disabled:d.value},null,8,["disabled"])):x("",!0)]))]),_:1})]),_:1}),a(_,{elevation:"2",class:"mb-6"},{default:l(()=>[a(A,{class:"d-flex align-center"},{default:l(()=>[a(g,{class:"me-2"},{default:l(()=>[...e[27]||(e[27]=[i("mdi-domain",-1)])]),_:1}),e[28]||(e[28]=i(" Organização ",-1))]),_:1}),a(k,null,{default:l(()=>[n("div",Re,[a(h,{size:"64",color:"primary",class:"mb-3"},{default:l(()=>[a(g,{size:"32",color:"white"},{default:l(()=>[...e[29]||(e[29]=[i("mdi-domain",-1)])]),_:1})]),_:1}),n("div",he,f(M.value||"Organização"),1),a(I,{size:"small",variant:"tonal",color:"success"},{default:l(()=>[...e[30]||(e[30]=[i(" Membro Ativo ",-1)])]),_:1}),n("div",Ie,[n("div",Te,[a(g,{size:"16",class:"me-1"},{default:l(()=>[...e[31]||(e[31]=[i("mdi-calendar",-1)])]),_:1}),i(" Membro desde: "+f(R($.value)),1)]),n("div",null,[a(g,{size:"16",class:"me-1"},{default:l(()=>[...e[32]||(e[32]=[i("mdi-clock-outline",-1)])]),_:1}),i(" Último acesso: "+f(R(O.value)),1)])])])]),_:1})]),_:1}),a(_,{elevation:"2"},{default:l(()=>[a(A,{class:"d-flex align-center"},{default:l(()=>[a(g,{class:"me-2"},{default:l(()=>[...e[33]||(e[33]=[i("mdi-chart-box",-1)])]),_:1}),e[34]||(e[34]=i(" Estatísticas ",-1))]),_:1}),a(k,null,{default:l(()=>[a(D,null,{default:l(()=>[a(u,{cols:"6"},{default:l(()=>[n("div",Be,[n("div",Ee,f(C.value.totalAnalyses),1),e[35]||(e[35]=n("div",{class:"text-caption text-medium-emphasis"},"Análises",-1))])]),_:1}),a(u,{cols:"6"},{default:l(()=>[n("div",Le,[n("div",Fe,f(C.value.totalRepositories),1),e[36]||(e[36]=n("div",{class:"text-caption text-medium-emphasis"},"Repositórios",-1))])]),_:1}),a(u,{cols:"6"},{default:l(()=>[n("div",je,[n("div",Me,f(C.value.totalRules),1),e[37]||(e[37]=n("div",{class:"text-caption text-medium-emphasis"},"Regras",-1))])]),_:1}),a(u,{cols:"6"},{default:l(()=>[n("div",$e,[n("div",Oe,f(C.value.totalTokens),1),e[38]||(e[38]=n("div",{class:"text-caption text-medium-emphasis"},"Tokens",-1))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),n("input",{ref_key:"avatarInput",ref:T,type:"file",accept:"image/*",style:{display:"none"},onChange:te},null,544)]))}}),fa=ce(Ye,[["__scopeId","data-v-149888b8"]]);export{fa as default};
