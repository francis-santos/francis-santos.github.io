import{b as g}from"./auth-Dt5LZyuD.js";import{u as p}from"./VChip-CnfVI7ta.js";class M{baseUrl="/logs";async getSystemLogs(n,e,t={}){const{isDemoUser:i,getMockData:m,simulateApiDelay:o}=p();if(i.value)return await o(),(await m("systemLogs",1,100,{...t,functionality:n})).data;const a=new URLSearchParams;return e&&a.append("organizationId",e),t.level&&a.append("level",t.level),t.dateFrom&&a.append("dateFrom",t.dateFrom),t.dateTo&&a.append("dateTo",t.dateTo),t.context&&a.append("context",t.context),t.search&&a.append("search",t.search),await g.get(`${this.baseUrl}/${n}?${a}`)}async getLogsByDate(n,e){const t=new URLSearchParams;return e&&t.append("organizationId",e),await g.get(`${this.baseUrl}/by-date/${n}?${t}`)}async getLogSummary(n,e,t){const i=new URLSearchParams;return e&&i.append("organizationId",e),t&&i.append("date",t),await g.get(`${this.baseUrl}/${n}/summary?${i}`)}async getAvailableOrganizations(){const{isDemoUser:n,simulateApiDelay:e}=p();return n.value?(await e(),["demo-org-1","demo-org-2","demo-org-3"]):await g.get(`${this.baseUrl}/organizations`)}async getSystemLogStats(n,e={}){const{isDemoUser:t,simulateApiDelay:i}=p();if(t.value){await i();const o=45+Math.floor(Math.random()*30),a=Math.floor(o*.05),r=Math.floor(o*.15),l=o-a-r,s=new Date,c=[{name:"webhook",count:Math.floor(o*.35),lastActivity:new Date(s.getTime()-Math.random()*24*60*60*1e3)},{name:"analysis",count:Math.floor(o*.25),lastActivity:new Date(s.getTime()-Math.random()*48*60*60*1e3)},{name:"git-integration",count:Math.floor(o*.2),lastActivity:new Date(s.getTime()-Math.random()*72*60*60*1e3)},{name:"security",count:Math.floor(o*.1),lastActivity:new Date(s.getTime()-Math.random()*96*60*60*1e3)},{name:"system",count:Math.floor(o*.1),lastActivity:new Date(s.getTime()-Math.random()*120*60*60*1e3)}];return{totalLogs:o,errorCount:a,warningCount:r,infoCount:l,functionalities:c}}const m=new URLSearchParams;return n&&m.append("organizationId",n),e.dateFrom&&m.append("dateFrom",e.dateFrom),e.dateTo&&m.append("dateTo",e.dateTo),await g.get(`${this.baseUrl}/stats?${m}`)}async getOrganizationLogsRange(n,e=7){const{isDemoUser:t,simulateApiDelay:i}=p();if(t.value){await i();const r=[],l=new Date;for(let s=0;s<e;s++){const c=new Date(l);c.setDate(c.getDate()-s);const D=5+Math.floor(Math.random()*10);for(let d=0;d<D;d++){const h=new Date(c);h.setHours(Math.floor(Math.random()*24)),h.setMinutes(Math.floor(Math.random()*60));const u=["webhook","analysis","git-integration","security","system"],w=["info","warning","error"],y=["API","UI","Background","Scheduler",null];r.push({timestamp:h,level:w[Math.floor(Math.random()*w.length)],functionality:u[Math.floor(Math.random()*u.length)],message:`Log simulado do dia ${c.toLocaleDateString("pt-BR")} - Evento ${d+1}`,context:y[Math.floor(Math.random()*y.length)],metadata:{day:s,index:d,organizationId:n}})}}return r.sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime())}const m=new Date,o=new Date;o.setDate(o.getDate()-e);const a=new URLSearchParams;a.append("organizationId",n),a.append("dateFrom",o.toISOString().split("T")[0]),a.append("dateTo",m.toISOString().split("T")[0]),a.append("limit","1000");try{return(await g.get(`${this.baseUrl}/organization-range?${a}`)).sort((l,s)=>new Date(s.timestamp).getTime()-new Date(l.timestamp).getTime())}catch(r){throw console.error("Error fetching organization logs range:",r),r}}}const T=new M;export{T as s};
