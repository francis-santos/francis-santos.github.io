import{k as L,a6 as N,f as d,r as O,_ as A,q as r,a1 as l,z as m,a8 as i,W as u,a9 as P,ag as F,ah as M,a2 as G}from"./vendor-vue-BOgiBTV5.js";import{r as j}from"./repositories-B9xwD_Sb.js";import{u as H}from"./VChip-CnfVI7ta.js";import{u as K}from"./auth-Dt5LZyuD.js";import{_ as W,b as c,a as V}from"./index-Fi5SlckD.js";import{V as q,a as t}from"./VRow-i_tVuNAF.js";import{V as x,a as U,b as y,c as C}from"./VGrid-BenhMHcZ.js";import{V as J}from"./VAlert-CGm6uEMH.js";import{V as Q}from"./VForm-Da-i8RCh.js";import{V as X}from"./VSelect-0fCGXKgg.js";import{b as Y}from"./VList-DIl281p1.js";import{V as f}from"./VTextField-B2IaUgQ6.js";import{V as Z}from"./VTextarea-DOQyhfq_.js";import{V as h}from"./VSwitch-DM6dFJzZ.js";import{V as R}from"./VSpacer-CoP99NGt.js";import{V as $}from"./VContainer-DOObN8g1.js";import{V as B}from"./VDialog-CwamhhG7.js";import"./index-DzEvJ-T3.js";import"./vendor-ui-BR0KSDoQ.js";import"./vendor-utils-C9OYYH06.js";import"./token-storage.service-BqAv9k07.js";import"./autofocus-BDwW2Sox.js";import"./VMenu-DelZx27A.js";import"./dialog-transition-BRPqoOP4.js";import"./ssrBoot-Cswv876e.js";var T=(s=>(s.GITLAB="gitlab",s.GITHUB="github",s.BITBUCKET="bitbucket",s))(T||{});const ee=L({__name:"AddRepositoryView",setup(s,{expose:e}){e();const D=N(),o=d(),S=d(!1),g=d(!1),a=d(!1),b=d(!1),_=d(""),{isDemoUser:v}=H(),w=K(),k=v.value?"b1e58ac3-6a88-4fc3-846d-352c8ca4a1db":w.user?.organizationId||"",E=v.value?"Mira Tech Solutions (Demo)":w.user?.organizationName||"Organização",z=O({name:"",fullName:"",platform:T.GITLAB,externalId:"",cloneUrl:"",webUrl:"",description:"",defaultBranch:"main",isPrivate:!0,organizationId:k}),I={router:D,form:o,isFormValid:S,loading:g,showSuccessDialog:a,showErrorDialog:b,errorMessage:_,isDemoUser:v,authStore:w,userOrganizationId:k,userOrganizationName:E,formData:z,platformOptions:[{title:"GitLab",value:"gitlab",icon:"mdi-gitlab",color:"#FC6D26"},{title:"GitHub",value:"github",icon:"mdi-github",color:"#24292e"},{title:"Bitbucket",value:"bitbucket",icon:"mdi-bitbucket",color:"#0052CC"}],rules:{required:n=>!!n||"Campo obrigatório",maxLength:n=>p=>!p||p.length<=n||`Máximo ${n} caracteres`,url:n=>{if(!n)return!0;try{return new URL(n),!0}catch{return"URL inválida"}}},handleSubmit:async()=>{if(!o.value)return;const{valid:n}=await o.value.validate();if(n){g.value=!0;try{await j.createRepository(z),a.value=!0}catch(p){_.value=p instanceof Error?p.message:"Erro ao criar repositório",b.value=!0}finally{g.value=!1}}},goToRepositories:()=>{a.value=!1,D.push("/repositories")}};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}}),oe={class:"add-repository-page"},re={class:"d-flex align-center"},le={class:"text-caption"},ae={class:"d-flex align-center"};function ie(s,e,D,o,S,g){return G(),A("div",oe,[r($,null,{default:l(()=>[r(q,{justify:"center"},{default:l(()=>[r(t,{cols:"12",md:"8",lg:"6"},{default:l(()=>[r(x,null,{default:l(()=>[r(U,{class:"d-flex align-center"},{default:l(()=>[r(c,{icon:"",onClick:e[0]||(e[0]=a=>s.$router.back()),class:"me-3"},{default:l(()=>[r(V,null,{default:l(()=>[...e[15]||(e[15]=[i("mdi-arrow-left",-1)])]),_:1})]),_:1}),e[16]||(e[16]=m("span",null,"Adicionar Repositório",-1))]),_:1}),r(y,null,{default:l(()=>[r(J,{type:o.isDemoUser?"warning":"info",variant:"tonal",class:"mb-4","prepend-icon":o.isDemoUser?"mdi-account-star":"mdi-domain"},{default:l(()=>[m("div",re,[m("div",null,[e[17]||(e[17]=m("strong",null,"Organização:",-1)),i(" "+u(o.userOrganizationName)+" ",1),m("div",le,u(o.isDemoUser?"Conta demo - repositório será simulado nesta organização":"O repositório será adicionado a esta organização"),1)])])]),_:1},8,["type","prepend-icon"]),r(Q,{ref:"form",modelValue:o.isFormValid,"onUpdate:modelValue":e[10]||(e[10]=a=>o.isFormValid=a),onSubmit:P(o.handleSubmit,["prevent"]),class:"mt-5"},{default:l(()=>[r(q,null,{default:l(()=>[r(t,{cols:"12"},{default:l(()=>[r(X,{modelValue:o.formData.platform,"onUpdate:modelValue":e[1]||(e[1]=a=>o.formData.platform=a),items:o.platformOptions,label:"Plataforma Git",required:"",rules:[o.rules.required],"prepend-inner-icon":"mdi-git"},{item:l(({item:a,props:b})=>[r(Y,F(M(b)),{prepend:l(()=>[r(V,{color:a.raw.color},{default:l(()=>[i(u(a.raw.icon),1)]),_:2},1032,["color"])]),_:2},1040)]),selection:l(({item:a})=>[m("div",ae,[r(V,{color:a.raw.color,class:"me-2"},{default:l(()=>[i(u(a.raw.icon),1)]),_:2},1032,["color"]),i(" "+u(a.raw.title),1)])]),_:1},8,["modelValue","rules"])]),_:1}),r(t,{cols:"12",sm:"6"},{default:l(()=>[r(f,{modelValue:o.formData.name,"onUpdate:modelValue":e[2]||(e[2]=a=>o.formData.name=a),label:"Nome do Repositório",required:"",rules:[o.rules.required,o.rules.maxLength(255)],"prepend-inner-icon":"mdi-folder-outline",counter:"255"},null,8,["modelValue","rules"])]),_:1}),r(t,{cols:"12",sm:"6"},{default:l(()=>[r(f,{modelValue:o.formData.fullName,"onUpdate:modelValue":e[3]||(e[3]=a=>o.formData.fullName=a),label:"Nome Completo",required:"",rules:[o.rules.required,o.rules.maxLength(500)],"prepend-inner-icon":"mdi-folder-multiple-outline",counter:"500",hint:"Ex: organization/team/repository"},null,8,["modelValue","rules"])]),_:1}),r(t,{cols:"12",sm:"6"},{default:l(()=>[r(f,{modelValue:o.formData.externalId,"onUpdate:modelValue":e[4]||(e[4]=a=>o.formData.externalId=a),label:"ID Externo",required:"",rules:[o.rules.required,o.rules.maxLength(100)],"prepend-inner-icon":"mdi-identifier",counter:"100",hint:"ID do repositório na plataforma"},null,8,["modelValue","rules"])]),_:1}),r(t,{cols:"12",sm:"6"},{default:l(()=>[r(f,{modelValue:o.formData.defaultBranch,"onUpdate:modelValue":e[5]||(e[5]=a=>o.formData.defaultBranch=a),label:"Branch Padrão",rules:[o.rules.maxLength(100)],"prepend-inner-icon":"mdi-source-branch",counter:"100"},null,8,["modelValue","rules"])]),_:1}),r(t,{cols:"12"},{default:l(()=>[r(f,{modelValue:o.formData.cloneUrl,"onUpdate:modelValue":e[6]||(e[6]=a=>o.formData.cloneUrl=a),label:"URL de Clone",required:"",rules:[o.rules.required,o.rules.url],"prepend-inner-icon":"mdi-content-copy",hint:"Ex: https://gitlab.com/organization/repository.git"},null,8,["modelValue","rules"])]),_:1}),r(t,{cols:"12"},{default:l(()=>[r(f,{modelValue:o.formData.webUrl,"onUpdate:modelValue":e[7]||(e[7]=a=>o.formData.webUrl=a),label:"URL Web",required:"",rules:[o.rules.required,o.rules.url],"prepend-inner-icon":"mdi-web",hint:"Ex: https://gitlab.com/organization/repository"},null,8,["modelValue","rules"])]),_:1}),r(t,{cols:"12"},{default:l(()=>[r(Z,{modelValue:o.formData.description,"onUpdate:modelValue":e[8]||(e[8]=a=>o.formData.description=a),label:"Descrição",rows:"3","prepend-inner-icon":"mdi-text",hint:"Descrição opcional do repositório"},null,8,["modelValue"])]),_:1}),r(t,{cols:"12"},{default:l(()=>[r(h,{modelValue:o.formData.isPrivate,"onUpdate:modelValue":e[9]||(e[9]=a=>o.formData.isPrivate=a),label:"Repositório Privado",inset:"",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),r(C,{class:"pa-4"},{default:l(()=>[r(R),r(c,{variant:"outlined",onClick:e[11]||(e[11]=a=>s.$router.back()),disabled:o.loading},{default:l(()=>[...e[18]||(e[18]=[i(" Cancelar ",-1)])]),_:1},8,["disabled"]),r(c,{color:"primary",onClick:o.handleSubmit,loading:o.loading,disabled:!o.isFormValid},{default:l(()=>[...e[19]||(e[19]=[i(" Adicionar Repositório ",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(B,{modelValue:o.showSuccessDialog,"onUpdate:modelValue":e[12]||(e[12]=a=>o.showSuccessDialog=a),"max-width":"400"},{default:l(()=>[r(x,null,{default:l(()=>[r(U,{class:"d-flex align-center text-success"},{default:l(()=>[r(V,{class:"me-2"},{default:l(()=>[...e[20]||(e[20]=[i("mdi-check-circle",-1)])]),_:1}),e[21]||(e[21]=i(" Sucesso! ",-1))]),_:1}),r(y,null,{default:l(()=>[...e[22]||(e[22]=[i(" Repositório criado com sucesso! ",-1)])]),_:1}),r(C,null,{default:l(()=>[r(R),r(c,{color:"primary",onClick:o.goToRepositories},{default:l(()=>[...e[23]||(e[23]=[i(" Ver Repositórios ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(B,{modelValue:o.showErrorDialog,"onUpdate:modelValue":e[14]||(e[14]=a=>o.showErrorDialog=a),"max-width":"400"},{default:l(()=>[r(x,null,{default:l(()=>[r(U,{class:"d-flex align-center text-error"},{default:l(()=>[r(V,{class:"me-2"},{default:l(()=>[...e[24]||(e[24]=[i("mdi-alert-circle",-1)])]),_:1}),e[25]||(e[25]=i(" Erro ",-1))]),_:1}),r(y,null,{default:l(()=>[i(u(o.errorMessage),1)]),_:1}),r(C,null,{default:l(()=>[r(R),r(c,{color:"primary",onClick:e[13]||(e[13]=a=>o.showErrorDialog=!1)},{default:l(()=>[...e[26]||(e[26]=[i(" OK ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const Le=W(ee,[["render",ie],["__scopeId","data-v-cc60d6e7"],["__file","D:/Development/Projetos/Mira/mira-client/src/views/repositories/AddRepositoryView.vue"]]);export{Le as default};
