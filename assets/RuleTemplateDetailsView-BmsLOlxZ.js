import{j as Y,d as z,D as ee,Z as _,y as s,$ as f,a0 as u,n as a,u as j,a1 as e,af as ae,ab as te,_ as d,aa as o,V as i,q as S,F as le,ah as se}from"./vendor-vue-BKuzT1x2.js";import{r as R}from"./rule-templates-B0ScTQqJ.js";import{r as oe}from"./rules-DAo5MLov.js";import{u as ie}from"./useDemoMode-DpDjlFnd.js";import{b as g,c as re,a as r,_ as ne}from"./index-gFSB3kms.js";import{V as B}from"./VContainer-cArkWCkC.js";import{V as de}from"./VDialog-BfRWf8LZ.js";import{V as ue}from"./VAlert-BZmB2o6G.js";import{a as q}from"./VChip-BfcyEr4e.js";import{V as c,b as p,a as C,e as y,f as G,c as ce}from"./VGrid-CBGRWS1y.js";import{a as v,V as T}from"./VRow-C_u8820H.js";import{c as M,V as b,a as x,d as k}from"./VList-Dg4abNUz.js";import{V as me}from"./VSpacer-CTPiANoM.js";import"./auth.service-BozCwdnf.js";import"./vendor-utils-6xD0fNU8.js";import"./token-storage.service-BqAv9k07.js";import"./auth--EmZq-C7.js";import"./vendor-ui-Ca7vMALJ.js";import"./dialog-transition-B8nu4acL.js";import"./ssrBoot-DJyMk-ri.js";const fe={class:"rule-template-details-page"},pe={class:"page-header pt-6"},ve={class:"header-navigation"},_e={key:0,class:"header-actions"},ge={class:"loading-content"},ye={class:"platform-info"},be={class:"platform-icon-container"},xe={class:"template-basic-info"},ke={class:"template-title"},Ce={key:0,class:"template-desc"},Ve={class:"stat-icon"},we={class:"stat-info"},he={class:"stat-number"},ze={class:"stat-icon"},Te={class:"stat-info"},Ee={class:"stat-number text-success"},Ie={class:"stat-icon"},Ae={class:"stat-info"},De={class:"stat-icon"},Se={class:"stat-info"},Re={class:"importance-text"},Be={class:"rule-details"},Le={class:"rule-section mb-4"},$e={class:"code-container"},Ne={class:"rule-code"},Pe={key:0,class:"rule-section"},je={class:"parameters-grid"},qe={class:"parameter-header"},Ge={class:"parameter-name"},Me={key:0,class:"parameter-description"},Oe={key:1,class:"parameter-default"},Ue={class:"default-code"},Fe={class:"actions-list"},Ze={class:"code-container"},He={class:"code-example error-example"},Je={class:"ml-2"},Ke={class:"code-container"},Qe={class:"code-example success-example"},We={class:"ml-2"},Xe={class:"mb-4"},Ye={class:"text-h6 mb-2"},ea={class:"text-body-2 text-grey-darken-1"},aa="b1e58ac3-6a88-4fc3-846d-352c8ca4a1db",ta=Y({__name:"RuleTemplateDetailsView",setup(la){const V=te(),O=ae(),{isDemoUser:L}=ie(),l=z(null),E=z(!1),w=z(null),h=z(!1),I=z(!1),U=async()=>{const n=O.params.id;if(!n){w.value="ID do template não encontrado";return}E.value=!0,w.value=null;try{l.value=await R.getRuleTemplate(n)}catch(t){w.value=t instanceof Error?t.message:"Erro ao carregar template"}finally{E.value=!1}},F=()=>{V.push("/rule-templates")},Z=()=>{l.value&&V.push(`/rule-templates/${l.value.id}/edit`)},H=async()=>{if(l.value)try{const{id:n,createdAt:t,updatedAt:m,createdBy:sa,updatedBy:oa,...W}=l.value,X={...W,title:`${l.value.title} (Cópia)`,isGlobal:!1};await R.createRuleTemplate(X),V.push("/rule-templates")}catch(n){console.error("Erro ao duplicar template:",n)}},J=async()=>{if(l.value&&confirm("Tem certeza que deseja deletar este template?"))try{await R.deleteRuleTemplate(l.value.id),V.push("/rule-templates")}catch(n){console.error("Erro ao deletar template:",n)}},$=()=>{h.value=!0},K=async()=>{if(l.value){I.value=!0;try{await oe.createRuleConfig(aa,{ruleTemplateId:l.value.id,isEnabled:!0,status:"enabled",customSeverity:l.value.severity}),h.value=!1,V.push("/rules")}catch(n){console.error("Erro ao configurar template:",n)}finally{I.value=!1}}},A=n=>{switch(n){case"low":return"success";case"medium":return"warning";case"high":return"orange";case"critical":return"error";default:return"grey"}},D=n=>{switch(n){case"low":return"mdi-shield-check";case"medium":return"mdi-shield-alert";case"high":return"mdi-shield-half-full";case"critical":return"mdi-shield-remove";default:return"mdi-shield-outline"}},N=n=>{switch(n){case"low":return"Baixa";case"medium":return"Média";case"high":return"Alta";case"critical":return"Crítica";default:return"N/A"}},Q=n=>{switch(n?.toLowerCase()){case"string":return"blue";case"number":return"green";case"boolean":return"purple";case"array":return"orange";case"object":return"teal";default:return"grey"}},P=n=>new Date(n).toLocaleString("pt-BR");return ee(()=>{U()}),(n,t)=>(d(),_("div",fe,[s("div",pe,[s("div",ve,[a(g,{icon:"mdi-arrow-left",variant:"text",class:"back-button",onClick:F}),t[2]||(t[2]=s("div",null,[s("h1",{class:"page-title"},"Detalhes do Template de Regra"),s("p",{class:"page-subtitle"},"Informações técnicas e configurações")],-1))]),l.value&&!j(L)?(d(),_("div",_e,[a(g,{color:"primary","prepend-icon":"mdi-cog",variant:"elevated",onClick:$},{default:e(()=>[...t[3]||(t[3]=[o(" Configurar para Organização ",-1)])]),_:1})])):u("",!0)]),E.value?(d(),f(B,{key:0,class:"loading-container"},{default:e(()=>[s("div",ge,[a(re,{indeterminate:"",color:"primary",size:"64"}),t[4]||(t[4]=s("p",{class:"loading-text"},"Carregando detalhes do template...",-1))])]),_:1})):w.value?(d(),f(B,{key:1},{default:e(()=>[a(ue,{type:"error",variant:"tonal",class:"error-alert"},{default:e(()=>[o(i(w.value),1)]),_:1})]),_:1})):l.value?(d(),f(B,{key:2,class:"template-content"},{default:e(()=>[a(c,{class:"template-header-card mb-6",elevation:"2"},{default:e(()=>[s("div",{class:S(["platform-header",`severity-${l.value.severity}`])},[s("div",ye,[s("div",be,[a(r,{icon:D(l.value.severity),size:"40",color:"white"},null,8,["icon"])]),s("div",xe,[s("h2",ke,i(l.value.title),1),l.value.description?(d(),_("p",Ce,i(l.value.description),1)):u("",!0)])]),a(q,{color:l.value.isActive?"success":"error",variant:"elevated",size:"large",class:"status-chip"},{default:e(()=>[a(r,{icon:l.value.isActive?"mdi-check-circle":"mdi-pause-circle",size:"16",class:"me-2"},null,8,["icon"]),o(" "+i(l.value.isActive?"Ativo":"Inativo"),1)]),_:1},8,["color"])],2)]),_:1}),a(T,{class:"mb-6"},{default:e(()=>[a(v,{cols:"12",sm:"6",md:"3"},{default:e(()=>[a(c,{class:"stat-card",elevation:"1"},{default:e(()=>[a(p,{class:"stat-content"},{default:e(()=>[s("div",Ve,[a(r,{icon:"mdi-eye",color:"primary",size:"32"})]),s("div",we,[s("div",he,i(l.value.views||0),1),t[5]||(t[5]=s("div",{class:"stat-label"},"Visualizações",-1))])]),_:1})]),_:1})]),_:1}),a(v,{cols:"12",sm:"6",md:"3"},{default:e(()=>[a(c,{class:"stat-card",elevation:"1"},{default:e(()=>[a(p,{class:"stat-content"},{default:e(()=>[s("div",ze,[a(r,{icon:"mdi-check-circle",color:"success",size:"32"})]),s("div",Te,[s("div",Ee,i(l.value.usageCount||0),1),t[6]||(t[6]=s("div",{class:"stat-label"},"Utilizações",-1))])]),_:1})]),_:1})]),_:1}),a(v,{cols:"12",sm:"6",md:"3"},{default:e(()=>[a(c,{class:"stat-card",elevation:"1"},{default:e(()=>[a(p,{class:"stat-content"},{default:e(()=>[s("div",Ie,[a(r,{icon:"mdi-bug",color:(l.value.violationsCount||0)>0?"warning":"success",size:"32"},null,8,["color"])]),s("div",Ae,[s("div",{class:S(["stat-number",(l.value.violationsCount||0)>0?"text-warning":"text-success"])},i(l.value.violationsCount||0),3),t[7]||(t[7]=s("div",{class:"stat-label"},"Violações",-1))])]),_:1})]),_:1})]),_:1}),a(v,{cols:"12",sm:"6",md:"3"},{default:e(()=>[a(c,{class:"stat-card",elevation:"1"},{default:e(()=>[a(p,{class:"stat-content"},{default:e(()=>[s("div",De,[a(r,{icon:D(l.value.severity),color:A(l.value.severity),size:"32"},null,8,["icon","color"])]),s("div",Se,[s("div",{class:S(["stat-number",`text-${A(l.value.severity)}`])},i(N(l.value.severity)),3),t[8]||(t[8]=s("div",{class:"stat-label"},"Severidade",-1))])]),_:1})]),_:1})]),_:1})]),_:1}),a(c,{class:"template-info-card mb-6",elevation:"2"},{default:e(()=>[a(C,{class:"info-card-title"},{default:e(()=>[a(r,{icon:"mdi-information",class:"me-2"}),t[9]||(t[9]=o(" Informações do Template ",-1))]),_:1}),a(p,null,{default:e(()=>[a(T,null,{default:e(()=>[a(v,{cols:"12",md:"6"},{default:e(()=>[a(M,{lines:"two",class:"info-list"},{default:e(()=>[a(b,null,{prepend:e(()=>[a(y,{color:"info",size:"40",class:"info-avatar"},{default:e(()=>[a(r,{icon:"mdi-folder-outline",color:"white"})]),_:1})]),default:e(()=>[a(x,{class:"info-title"},{default:e(()=>[...t[10]||(t[10]=[o("Categoria",-1)])]),_:1}),a(k,{class:"info-value"},{default:e(()=>[o(i(l.value.category),1)]),_:1})]),_:1}),a(b,null,{prepend:e(()=>[a(y,{color:A(l.value.severity),size:"40",class:"info-avatar"},{default:e(()=>[a(r,{icon:D(l.value.severity),color:"white"},null,8,["icon"])]),_:1},8,["color"])]),default:e(()=>[a(x,{class:"info-title"},{default:e(()=>[...t[11]||(t[11]=[o("Severidade",-1)])]),_:1}),a(k,{class:"info-value"},{default:e(()=>[o(i(N(l.value.severity)),1)]),_:1})]),_:1}),l.value.isGlobal?(d(),f(b,{key:0},{prepend:e(()=>[a(y,{color:"purple",size:"40",class:"info-avatar"},{default:e(()=>[a(r,{icon:"mdi-earth",color:"white"})]),_:1})]),default:e(()=>[a(x,{class:"info-title"},{default:e(()=>[...t[12]||(t[12]=[o("Escopo",-1)])]),_:1}),a(k,{class:"info-value"},{default:e(()=>[...t[13]||(t[13]=[o("Global",-1)])]),_:1})]),_:1})):u("",!0),a(b,null,{prepend:e(()=>[a(y,{color:l.value.isActive?"success":"error",size:"40",class:"info-avatar"},{default:e(()=>[a(r,{icon:l.value.isActive?"mdi-check-circle":"mdi-pause-circle",color:"white"},null,8,["icon"])]),_:1},8,["color"])]),default:e(()=>[a(x,{class:"info-title"},{default:e(()=>[...t[14]||(t[14]=[o("Status",-1)])]),_:1}),a(k,{class:"info-value"},{default:e(()=>[o(i(l.value.isActive?"Ativo":"Inativo"),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(v,{cols:"12",md:"6"},{default:e(()=>[a(M,{lines:"two",class:"info-list"},{default:e(()=>[l.value.parameters&&l.value.parameters.length>0?(d(),f(b,{key:0},{prepend:e(()=>[a(y,{color:"secondary",size:"40",class:"info-avatar"},{default:e(()=>[a(r,{icon:"mdi-tune",color:"white"})]),_:1})]),default:e(()=>[a(x,{class:"info-title"},{default:e(()=>[...t[15]||(t[15]=[o("Parâmetros",-1)])]),_:1}),a(k,{class:"info-value"},{default:e(()=>[o(i(l.value.parameters.length)+" parâmetro(s) configurável(is)",1)]),_:1})]),_:1})):u("",!0),l.value.badExample||l.value.goodExample?(d(),f(b,{key:1},{prepend:e(()=>[a(y,{color:"orange",size:"40",class:"info-avatar"},{default:e(()=>[a(r,{icon:"mdi-code-tags-check",color:"white"})]),_:1})]),default:e(()=>[a(x,{class:"info-title"},{default:e(()=>[...t[16]||(t[16]=[o("Exemplos",-1)])]),_:1}),a(k,{class:"info-value"},{default:e(()=>[o(i([l.value.badExample,l.value.goodExample].filter(Boolean).length)+" exemplo(s) disponível(is) ",1)]),_:1})]),_:1})):u("",!0),a(b,null,{prepend:e(()=>[a(y,{color:"grey",size:"40",class:"info-avatar"},{default:e(()=>[a(r,{icon:"mdi-calendar-clock",color:"white"})]),_:1})]),default:e(()=>[a(x,{class:"info-title"},{default:e(()=>[...t[17]||(t[17]=[o("Criado Em",-1)])]),_:1}),a(k,{class:"info-value"},{default:e(()=>[o(i(P(l.value.createdAt)),1)]),_:1})]),_:1}),a(b,null,{prepend:e(()=>[a(y,{color:"grey",size:"40",class:"info-avatar"},{default:e(()=>[a(r,{icon:"mdi-calendar-edit",color:"white"})]),_:1})]),default:e(()=>[a(x,{class:"info-title"},{default:e(()=>[...t[18]||(t[18]=[o("Última Atualização",-1)])]),_:1}),a(k,{class:"info-value"},{default:e(()=>[o(i(P(l.value.updatedAt)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(T,null,{default:e(()=>[a(v,null,{default:e(()=>[l.value.whyIsThisImportant?(d(),f(c,{key:0,class:"mb-6",elevation:"2"},{default:e(()=>[a(C,{class:"d-flex align-center"},{default:e(()=>[a(r,{color:"warning",class:"me-2"},{default:e(()=>[...t[19]||(t[19]=[o("mdi-lightbulb-on-outline",-1)])]),_:1}),t[20]||(t[20]=o(" Por que é Importante ",-1))]),_:1}),a(p,null,{default:e(()=>[s("p",Re,i(l.value.whyIsThisImportant),1)]),_:1})]),_:1})):u("",!0)]),_:1})]),_:1}),a(T,null,{default:e(()=>[a(v,{cols:"12",md:"8"},{default:e(()=>[a(c,{class:"mb-6",elevation:"2"},{default:e(()=>[a(C,{class:"d-flex align-center"},{default:e(()=>[a(r,{color:"primary",class:"me-2"},{default:e(()=>[...t[21]||(t[21]=[o("mdi-code-braces",-1)])]),_:1}),t[22]||(t[22]=o(" Detalhes da Regra ",-1))]),_:1}),a(p,null,{default:e(()=>[s("div",Be,[s("div",Le,[t[23]||(t[23]=s("h4",{class:"rule-section-title"},"Regra",-1)),s("div",$e,[s("pre",Ne,[s("code",null,i(l.value.rule),1)])])]),l.value.parameters&&l.value.parameters.length>0?(d(),_("div",Pe,[t[25]||(t[25]=s("h4",{class:"rule-section-title"},"Parâmetros Configuráveis",-1)),s("div",je,[(d(!0),_(le,null,se(l.value.parameters,m=>(d(),_("div",{key:m.name,class:"parameter-card"},[s("div",qe,[s("span",Ge,i(m.name),1),a(q,{color:Q(m.type),size:"small",variant:"outlined"},{default:e(()=>[o(i(m.type),1)]),_:2},1032,["color"])]),m.description?(d(),_("p",Me,i(m.description),1)):u("",!0),m.defaultValue?(d(),_("div",Oe,[t[24]||(t[24]=s("span",{class:"default-label"},"Valor padrão:",-1)),s("code",Ue,i(m.defaultValue),1)])):u("",!0)]))),128))])])):u("",!0)])]),_:1})]),_:1})]),_:1}),a(v,{cols:"12",md:"4"},{default:e(()=>[j(L)?u("",!0):(d(),f(c,{key:0,class:"actions-card",elevation:"2"},{default:e(()=>[a(C,{class:"d-flex align-center"},{default:e(()=>[a(r,{color:"primary",class:"me-2"},{default:e(()=>[...t[26]||(t[26]=[o("mdi-cog",-1)])]),_:1}),t[27]||(t[27]=o(" Ações Disponíveis ",-1))]),_:1}),a(p,null,{default:e(()=>[s("div",Fe,[a(g,{color:"primary",block:"",size:"large","prepend-icon":"mdi-cog",onClick:$,class:"mb-3"},{default:e(()=>[...t[28]||(t[28]=[o(" Configurar para Organização ",-1)])]),_:1}),a(g,{variant:"outlined",block:"",size:"large","prepend-icon":"mdi-content-copy",onClick:H,class:"mb-3"},{default:e(()=>[...t[29]||(t[29]=[o(" Duplicar Template ",-1)])]),_:1}),a(g,{variant:"outlined",block:"",size:"large","prepend-icon":"mdi-pencil",onClick:Z,class:"mb-3"},{default:e(()=>[...t[30]||(t[30]=[o(" Editar Template ",-1)])]),_:1}),a(g,{color:"error",variant:"outlined",block:"",size:"large","prepend-icon":"mdi-delete",onClick:J},{default:e(()=>[...t[31]||(t[31]=[o(" Deletar Template ",-1)])]),_:1})])]),_:1})]),_:1}))]),_:1})]),_:1}),l.value.badExample||l.value.goodExample?(d(),f(c,{key:0,class:"examples-card mt-4",elevation:"2"},{default:e(()=>[a(C,{class:"examples-header"},{default:e(()=>[s("div",null,[a(r,{icon:"mdi-code-tags-check",class:"me-2"}),t[32]||(t[32]=o(" Exemplos de Código ",-1))])]),_:1}),a(p,null,{default:e(()=>[a(T,null,{default:e(()=>[l.value.badExample?(d(),f(v,{key:0,cols:"12",md:"6"},{default:e(()=>[a(c,{variant:"outlined",class:"h-100"},{default:e(()=>[a(G,{class:"d-flex align-center pa-3"},{default:e(()=>[a(r,{color:"error",class:"me-2"},{default:e(()=>[...t[33]||(t[33]=[o("mdi-close-circle",-1)])]),_:1}),t[34]||(t[34]=o(" Exemplo Incorreto ",-1))]),_:1}),a(p,{class:"pa-3"},{default:e(()=>[s("div",Ze,[s("pre",He,[s("code",Je,i(l.value.badExample),1)])])]),_:1})]),_:1})]),_:1})):u("",!0),l.value.goodExample?(d(),f(v,{key:1,cols:"12",md:"6"},{default:e(()=>[a(c,{variant:"outlined",class:"h-100"},{default:e(()=>[a(G,{class:"d-flex align-center pa-3"},{default:e(()=>[a(r,{color:"success",class:"me-2"},{default:e(()=>[...t[35]||(t[35]=[o("mdi-check-circle",-1)])]),_:1}),t[36]||(t[36]=o(" Exemplo Correto ",-1))]),_:1}),a(p,{class:"pa-3"},{default:e(()=>[s("div",Ke,[s("pre",Qe,[s("code",We,i(l.value.goodExample),1)])])]),_:1})]),_:1})]),_:1})):u("",!0)]),_:1})]),_:1})]),_:1})):u("",!0)]),_:1})):u("",!0),a(de,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=m=>h.value=m),"max-width":"600px",persistent:""},{default:e(()=>[a(c,null,{default:e(()=>[a(C,null,{default:e(()=>[a(r,{class:"mr-2"},{default:e(()=>[...t[37]||(t[37]=[o("mdi-cog",-1)])]),_:1}),t[38]||(t[38]=o(" Configurar Template para Organização ",-1))]),_:1}),l.value?(d(),f(p,{key:0},{default:e(()=>[s("div",Xe,[s("h4",Ye,i(l.value.title),1),s("p",ea,i(l.value.rule),1)]),t[39]||(t[39]=s("p",{class:"text-body-2 mb-4"}," Este template será adicionado às regras configuradas da sua organização. Você poderá personalizar severidade, mensagens e outros parâmetros após a criação. ",-1))]),_:1})):u("",!0),a(ce,null,{default:e(()=>[a(me),a(g,{onClick:t[0]||(t[0]=m=>h.value=!1)},{default:e(()=>[...t[40]||(t[40]=[o("Cancelar",-1)])]),_:1}),a(g,{color:"primary",onClick:K,loading:I.value},{default:e(()=>[...t[41]||(t[41]=[o(" Configurar ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),za=ne(ta,[["__scopeId","data-v-5deaab67"]]);export{za as default};
