import{k as pe,a6 as be,f as n,r as F,_ as b,z as s,q as o,a7 as U,a1 as l,a8 as r,a9 as V,a0 as x,V as M,aa as ge,W as q,ab as we,ac as ye,$ as g,a2 as m}from"./vendor-vue-BOgiBTV5.js";import{u as Re,U as Ve}from"./auth-Dt5LZyuD.js";import{_ as xe,a as d,b as w}from"./index-Fi5SlckD.js";import{V as J,a as K,b as X,c as Y}from"./VGrid-BenhMHcZ.js";import{V as qe,a as y}from"./VRow-i_tVuNAF.js";import{V as R}from"./VTextField-B2IaUgQ6.js";import{V as ke}from"./VTextarea-DOQyhfq_.js";import{V as Z}from"./VAlert-CGm6uEMH.js";import{V as $}from"./VForm-Da-i8RCh.js";import{V as ee}from"./VSpacer-CoP99NGt.js";import{V as ae}from"./VDialog-CwamhhG7.js";import"./vendor-utils-C9OYYH06.js";import"./token-storage.service-BqAv9k07.js";import"./vendor-ui-BR0KSDoQ.js";import"./autofocus-BDwW2Sox.js";import"./index-DzEvJ-T3.js";import"./dialog-transition-BRPqoOP4.js";const Fe=pe({__name:"LoginView",setup(oe,{expose:e}){e();const k=be(),a=Re(),p=n(!1),T=n(!1),t=n(""),E=n(!1),D=n(),B=n(!1),z=n(!1),C=n(),I=n(!1),c=F({email:"",password:"",rememberMe:!1}),v=F({fullName:"",email:"",organization:"",position:"",phone:"",reason:""}),O=F({email:""}),u=F({email:[],password:[]}),L=n(!1),S=n(!1),h=n(!1),P=n(!1),ie=i=>{u[i]=[],t.value=""},_=()=>{let i=!0;return u.email=[],u.password=[],c.email?/\S+@\S+\.\S+/.test(c.email)||(u.email.push("E-mail deve ser válido"),i=!1):(u.email.push("E-mail é obrigatório"),i=!1),c.password?c.password.length<6&&(u.password.push("Senha deve ter pelo menos 6 caracteres"),i=!1):(u.password.push("Senha é obrigatória"),i=!1),i},le=async()=>{if(_()){p.value=!0,t.value="";try{await a.login({email:c.email,password:c.password}),await k.push("/dashboard")}catch(i){console.error("Login error:",i),t.value=i instanceof Error?i.message:"Erro ao fazer login. Tente novamente."}finally{p.value=!1}}},te=async()=>{p.value=!0,t.value="";try{a.setUser({id:"demo-user-1",email:"demo@test.mira-api.com",fullName:"Usuário Demonstração",username:"demo.user",role:Ve.DEMO_USER,organizationId:"demo-org-1",organizationName:"PRODEB - Demonstração",language:"pt-BR",timezone:"America/Sao_Paulo"}),await k.push("/dashboard")}catch(i){console.error("Demo login error:",i),t.value="Erro ao fazer login de demonstração. Tente novamente."}finally{p.value=!1}},re=()=>{E.value=!0,A()},j=()=>{E.value=!1,S.value=!1,A()},A=()=>{v.fullName="",v.email="",v.organization="",v.position="",v.phone="",v.reason="",D.value?.resetValidation(),B.value=!1},de=[i=>!!i||"Nome completo é obrigatório",i=>i&&i.length>=2||"Nome deve ter pelo menos 2 caracteres",i=>i&&i.length<=100||"Nome deve ter no máximo 100 caracteres"],ne=[i=>!!i||"E-mail é obrigatório",i=>/.+@.+\..+/.test(i)||"E-mail deve ser válido"],me=[i=>!!i||"Organização é obrigatória",i=>i&&i.length>=2||"Organização deve ter pelo menos 2 caracteres"],ue=[i=>!!i||"Cargo/Função é obrigatório",i=>i&&i.length>=2||"Cargo deve ter pelo menos 2 caracteres"],ce=[i=>!!i||"E-mail é obrigatório",i=>/.+@.+\..+/.test(i)||"E-mail deve ser válido"],G=async()=>{const{valid:i}=await D.value?.validate();return i},ve=async()=>{if(await G()){L.value=!0;try{await new Promise(f=>setTimeout(f,2e3)),S.value=!0,setTimeout(()=>{j()},3e3)}catch(f){console.error("Error submitting access request:",f)}finally{L.value=!1}}},fe=()=>{z.value=!0,N()},Q=()=>{z.value=!1,P.value=!1,N()},N=()=>{O.email="",C.value?.resetValidation(),I.value=!1},H=async()=>{const{valid:i}=await C.value?.validate();return i},W={router:k,authStore:a,isLoading:p,showPassword:T,generalError:t,showAccessRequestDialog:E,accessFormRef:D,accessFormValid:B,showPasswordRecoveryDialog:z,passwordRecoveryFormRef:C,passwordRecoveryFormValid:I,loginForm:c,accessRequestForm:v,passwordRecoveryForm:O,errors:u,accessRequestLoading:L,accessRequestSuccess:S,passwordRecoveryLoading:h,passwordRecoverySuccess:P,clearError:ie,validateForm:_,handleLogin:le,handleDemoLogin:te,openAccessRequestDialog:re,closeAccessRequestDialog:j,resetAccessRequestForm:A,fullNameRules:de,accessEmailRules:ne,organizationRules:me,positionRules:ue,recoveryEmailRules:ce,validateAccessRequestForm:G,submitAccessRequest:ve,openPasswordRecoveryDialog:fe,closePasswordRecoveryDialog:Q,resetPasswordRecoveryForm:N,validatePasswordRecoveryForm:H,submitPasswordRecovery:async()=>{if(await H()){h.value=!0;try{await new Promise(f=>setTimeout(f,2e3)),P.value=!0,setTimeout(()=>{Q()},4e3)}catch(f){console.error("Error submitting password recovery:",f)}finally{h.value=!1}}}};return Object.defineProperty(W,"__isScriptSetup",{enumerable:!1,value:!0}),W}}),se="/assets/logo_horizontal-QhzIU5Q1.png",Ee={class:"auth-layout"},De={class:"hero-panel"},ze={class:"hero-content"},Ce={class:"hero-features"},Le={class:"feature-item"},Se={class:"feature-icon"},he={class:"feature-item"},Pe={class:"feature-icon"},Ae={class:"feature-item"},Ne={class:"feature-icon"},Ue={class:"form-panel"},Me={class:"form-container"},Te={class:"form-group"},Be={class:"input-wrapper"},Ie={key:0,class:"error-message"},Oe={class:"form-group"},_e={class:"input-wrapper"},je=["type"],Ge={key:0,class:"error-message"},Qe={class:"form-options"},He={class:"checkbox-wrapper"},We=["disabled"],Je={key:0,class:"error-alert"},Ke=["disabled"],Xe={class:"form-footer"},Ye={class:"signup-text"},Ze={class:"d-flex align-center"},$e={key:0,class:"text-center py-8"},ea={class:"d-flex align-center"},aa={key:0,class:"text-center py-8"};function sa(oe,e,k,a,p,T){return m(),b("div",Ee,[s("div",De,[s("div",ze,[e[24]||(e[24]=U('<div class="hero-brand" data-v-409777eb><img src="'+se+'" alt="Mira - Code Review Platform" class="hero-logo" data-v-409777eb></div><div class="hero-text" data-v-409777eb><h1 class="hero-title" data-v-409777eb> Automatize sua<br data-v-409777eb><span class="hero-highlight" data-v-409777eb>Revisão de Código</span></h1><p class="hero-description" data-v-409777eb> Plataforma inteligente que utiliza IA avançada para analisar código, integrar múltiplas plataformas Git e fornecer insights precisos para sua equipe de desenvolvimento. </p></div>',2)),s("div",Ce,[s("div",Le,[s("div",Se,[o(d,{size:"20",color:"white"},{default:l(()=>[...e[18]||(e[18]=[r("mdi-robot",-1)])]),_:1})]),e[19]||(e[19]=s("div",{class:"feature-text"},[s("div",{class:"feature-title"},"IA Avançada"),s("div",{class:"feature-desc"},"Análise inteligente e sugestões automáticas")],-1))]),s("div",he,[s("div",Pe,[o(d,{size:"20",color:"white"},{default:l(()=>[...e[20]||(e[20]=[r("mdi-git",-1)])]),_:1})]),e[21]||(e[21]=s("div",{class:"feature-text"},[s("div",{class:"feature-title"},"Multi-Plataforma"),s("div",{class:"feature-desc"},"GitHub, GitLab e Bitbucket integrados")],-1))]),s("div",Ae,[s("div",Ne,[o(d,{size:"20",color:"white"},{default:l(()=>[...e[22]||(e[22]=[r("mdi-chart-line",-1)])]),_:1})]),e[23]||(e[23]=s("div",{class:"feature-text"},[s("div",{class:"feature-title"},"Analytics"),s("div",{class:"feature-desc"},"Métricas detalhadas e relatórios completos")],-1))])]),e[25]||(e[25]=U('<div class="hero-stats" data-v-409777eb><div class="stat-item" data-v-409777eb><div class="stat-number" data-v-409777eb>10k+</div><div class="stat-label" data-v-409777eb>Análises realizadas</div></div><div class="stat-item" data-v-409777eb><div class="stat-number" data-v-409777eb>500+</div><div class="stat-label" data-v-409777eb>Projetos ativos</div></div><div class="stat-item" data-v-409777eb><div class="stat-number" data-v-409777eb>99.9%</div><div class="stat-label" data-v-409777eb>Uptime</div></div></div>',1))])]),s("div",Ue,[s("div",Me,[e[41]||(e[41]=U('<div class="mobile-logo-container" data-v-409777eb><img src="'+se+'" alt="Mira" class="mobile-logo" data-v-409777eb></div><div class="form-header" data-v-409777eb><h2 class="form-title" data-v-409777eb>Faça login em sua conta</h2><p class="form-subtitle" data-v-409777eb>Bem-vindo de volta! Digite suas credenciais para continuar:</p></div>',2)),s("form",{onSubmit:V(a.handleLogin,["prevent"]),class:"login-form"},[s("div",Te,[e[27]||(e[27]=s("label",{for:"email",class:"form-label"},"E-mail",-1)),s("div",Be,[o(d,{class:"input-icon",size:"20"},{default:l(()=>[...e[26]||(e[26]=[r("mdi-email-outline",-1)])]),_:1}),M(s("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=t=>a.loginForm.email=t),type:"email",class:"form-input",placeholder:"Digite seu e-mail",required:"",onInput:e[1]||(e[1]=t=>a.clearError("email"))},null,544),[[ge,a.loginForm.email]])]),a.errors.email.length?(m(),b("div",Ie,q(a.errors.email[0]),1)):x("",!0)]),s("div",Oe,[e[29]||(e[29]=s("label",{for:"password",class:"form-label"},"Senha",-1)),s("div",_e,[o(d,{class:"input-icon",size:"20"},{default:l(()=>[...e[28]||(e[28]=[r("mdi-lock-outline",-1)])]),_:1}),M(s("input",{id:"password","onUpdate:modelValue":e[2]||(e[2]=t=>a.loginForm.password=t),type:a.showPassword?"text":"password",class:"form-input",placeholder:"Digite sua senha",required:"",onInput:e[3]||(e[3]=t=>a.clearError("password"))},null,40,je),[[we,a.loginForm.password]]),s("button",{type:"button",class:"password-toggle",onClick:e[4]||(e[4]=t=>a.showPassword=!a.showPassword)},[o(d,{size:"20"},{default:l(()=>[r(q(a.showPassword?"mdi-eye-off-outline":"mdi-eye-outline"),1)]),_:1})])]),a.errors.password.length?(m(),b("div",Ge,q(a.errors.password[0]),1)):x("",!0)]),s("div",Qe,[s("label",He,[M(s("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>a.loginForm.rememberMe=t),type:"checkbox",class:"checkbox-input"},null,512),[[ye,a.loginForm.rememberMe]]),e[30]||(e[30]=s("span",{class:"checkbox-custom"},null,-1)),e[31]||(e[31]=s("span",{class:"checkbox-label"},"Lembrar por 30 dias",-1))]),s("a",{href:"#",class:"forgot-link",onClick:V(a.openPasswordRecoveryDialog,["prevent"])},"Esqueceu a senha?")]),s("button",{type:"submit",class:"submit-btn",disabled:a.isLoading},[a.isLoading?(m(),g(d,{key:0,class:"loading-icon"},{default:l(()=>[...e[32]||(e[32]=[r("mdi-loading",-1)])]),_:1})):(m(),g(d,{key:1},{default:l(()=>[...e[33]||(e[33]=[r("mdi-login",-1)])]),_:1})),r(" "+q(a.isLoading?"Entrando...":"Entrar na plataforma"),1)],8,We),a.generalError?(m(),b("div",Je,[o(d,{size:"20"},{default:l(()=>[...e[34]||(e[34]=[r("mdi-alert-circle",-1)])]),_:1}),r(" "+q(a.generalError)+" ",1),s("button",{onClick:e[6]||(e[6]=t=>a.generalError=""),class:"close-error"},[o(d,{size:"16"},{default:l(()=>[...e[35]||(e[35]=[r("mdi-close",-1)])]),_:1})])])):x("",!0),e[38]||(e[38]=s("div",{class:"form-divider"},[s("span",null,"ou")],-1)),s("button",{type:"button",class:"demo-btn",onClick:a.handleDemoLogin,disabled:a.isLoading},[o(d,null,{default:l(()=>[...e[36]||(e[36]=[r("mdi-account-supervisor",-1)])]),_:1}),e[37]||(e[37]=r(" Acesso demonstração ",-1))],8,Ke)],32),s("div",Xe,[s("p",Ye,[e[39]||(e[39]=r(" Novo no Mira? ",-1)),s("a",{href:"#",class:"signup-link",onClick:V(a.openAccessRequestDialog,["prevent"])},"Solicitar acesso")]),e[40]||(e[40]=s("p",{class:"copyright-text"}," © 2025 Governo da Bahia - PRODEB ",-1))])])]),o(ae,{modelValue:a.showAccessRequestDialog,"onUpdate:modelValue":e[14]||(e[14]=t=>a.showAccessRequestDialog=t),"max-width":"700px",persistent:"",scrollable:""},{default:l(()=>[o(J,null,{default:l(()=>[o(K,{class:"text-h6 d-flex align-center justify-space-between bg-primary text-white sticky-header"},{default:l(()=>[s("div",Ze,[o(d,{class:"me-2"},{default:l(()=>[...e[42]||(e[42]=[r("mdi-account-plus",-1)])]),_:1}),e[43]||(e[43]=r(" Solicitar Acesso ",-1))]),o(w,{icon:"mdi-close",variant:"text",size:"small",color:"white",onClick:a.closeAccessRequestDialog,disabled:a.accessRequestLoading},null,8,["disabled"])]),_:1}),o(X,{class:"pa-6"},{default:l(()=>[a.accessRequestSuccess?(m(),b("div",$e,[o(d,{size:"64",color:"success",class:"mb-4"},{default:l(()=>[...e[44]||(e[44]=[r("mdi-check-circle",-1)])]),_:1}),e[45]||(e[45]=s("h3",{class:"text-h5 font-weight-bold text-success mb-3"},"Solicitação Enviada!",-1)),e[46]||(e[46]=s("p",{class:"text-body-1 text-medium-emphasis"}," Sua solicitação foi enviada com sucesso. Nossa equipe analisará sua solicitação e entrará em contato em até 2 dias úteis. ",-1))])):(m(),g($,{key:1,ref:"accessFormRef",modelValue:a.accessFormValid,"onUpdate:modelValue":e[13]||(e[13]=t=>a.accessFormValid=t),onSubmit:V(a.submitAccessRequest,["prevent"])},{default:l(()=>[e[48]||(e[48]=s("p",{class:"text-body-2 text-medium-emphasis mb-4"}," Preencha os dados abaixo para solicitar acesso ao sistema. Nossa equipe analisará sua solicitação. ",-1)),o(qe,null,{default:l(()=>[o(y,{cols:"12"},{default:l(()=>[o(R,{modelValue:a.accessRequestForm.fullName,"onUpdate:modelValue":e[7]||(e[7]=t=>a.accessRequestForm.fullName=t),label:"Nome Completo *",rules:a.fullNameRules,variant:"outlined","prepend-inner-icon":"mdi-account",disabled:a.accessRequestLoading,required:""},null,8,["modelValue","disabled"])]),_:1}),o(y,{cols:"12",md:"6"},{default:l(()=>[o(R,{modelValue:a.accessRequestForm.email,"onUpdate:modelValue":e[8]||(e[8]=t=>a.accessRequestForm.email=t),label:"E-mail Corporativo *",rules:a.accessEmailRules,variant:"outlined","prepend-inner-icon":"mdi-email",type:"email",placeholder:"seuemail@empresa.com",disabled:a.accessRequestLoading,required:""},null,8,["modelValue","disabled"])]),_:1}),o(y,{cols:"12",md:"6"},{default:l(()=>[o(R,{modelValue:a.accessRequestForm.phone,"onUpdate:modelValue":e[9]||(e[9]=t=>a.accessRequestForm.phone=t),label:"Telefone",variant:"outlined","prepend-inner-icon":"mdi-phone",type:"tel",placeholder:"(11) 99999-9999",disabled:a.accessRequestLoading},null,8,["modelValue","disabled"])]),_:1}),o(y,{cols:"12",md:"6"},{default:l(()=>[o(R,{modelValue:a.accessRequestForm.organization,"onUpdate:modelValue":e[10]||(e[10]=t=>a.accessRequestForm.organization=t),label:"Organização *",rules:a.organizationRules,variant:"outlined","prepend-inner-icon":"mdi-domain",placeholder:"Nome da sua empresa/órgão",disabled:a.accessRequestLoading,required:""},null,8,["modelValue","disabled"])]),_:1}),o(y,{cols:"12",md:"6"},{default:l(()=>[o(R,{modelValue:a.accessRequestForm.position,"onUpdate:modelValue":e[11]||(e[11]=t=>a.accessRequestForm.position=t),label:"Cargo/Função *",rules:a.positionRules,variant:"outlined","prepend-inner-icon":"mdi-account-tie",placeholder:"Seu cargo na organização",disabled:a.accessRequestLoading,required:""},null,8,["modelValue","disabled"])]),_:1}),o(y,{cols:"12"},{default:l(()=>[o(ke,{modelValue:a.accessRequestForm.reason,"onUpdate:modelValue":e[12]||(e[12]=t=>a.accessRequestForm.reason=t),label:"Motivo da Solicitação",variant:"outlined","prepend-inner-icon":"mdi-text",rows:"3",placeholder:"Descreva brevemente o motivo para solicitar acesso ao sistema (opcional)",disabled:a.accessRequestLoading},null,8,["modelValue","disabled"])]),_:1})]),_:1}),o(Z,{type:"info",variant:"tonal",class:"mt-4"},{default:l(()=>[...e[47]||(e[47]=[r(" Campos marcados com * são obrigatórios ",-1)])]),_:1})]),_:1},8,["modelValue"]))]),_:1}),a.accessRequestSuccess?x("",!0):(m(),g(Y,{key:0,class:"px-6 py-4 bg-surface border-t"},{default:l(()=>[o(ee),o(w,{variant:"text",onClick:a.closeAccessRequestDialog,disabled:a.accessRequestLoading},{default:l(()=>[...e[49]||(e[49]=[r(" Cancelar ",-1)])]),_:1},8,["disabled"]),o(w,{color:"primary",variant:"flat",loading:a.accessRequestLoading,disabled:!a.accessFormValid,onClick:a.submitAccessRequest},{default:l(()=>[...e[50]||(e[50]=[r(" Enviar Solicitação ",-1)])]),_:1},8,["loading","disabled"])]),_:1}))]),_:1})]),_:1},8,["modelValue"]),o(ae,{modelValue:a.showPasswordRecoveryDialog,"onUpdate:modelValue":e[17]||(e[17]=t=>a.showPasswordRecoveryDialog=t),"max-width":"500px",persistent:"",scrollable:""},{default:l(()=>[o(J,null,{default:l(()=>[o(K,{class:"text-h6 d-flex align-center justify-space-between bg-primary text-white sticky-header"},{default:l(()=>[s("div",ea,[o(d,{class:"me-2"},{default:l(()=>[...e[51]||(e[51]=[r("mdi-lock-reset",-1)])]),_:1}),e[52]||(e[52]=r(" Recuperar Senha ",-1))]),o(w,{icon:"mdi-close",variant:"text",size:"small",color:"white",onClick:a.closePasswordRecoveryDialog,disabled:a.passwordRecoveryLoading},null,8,["disabled"])]),_:1}),o(X,{class:"pa-6"},{default:l(()=>[a.passwordRecoverySuccess?(m(),b("div",aa,[o(d,{size:"64",color:"success",class:"mb-4"},{default:l(()=>[...e[53]||(e[53]=[r("mdi-email-check",-1)])]),_:1}),e[54]||(e[54]=s("h3",{class:"text-h5 font-weight-bold text-success mb-3"},"Email Enviado!",-1)),e[55]||(e[55]=s("p",{class:"text-body-1 text-medium-emphasis mb-4"}," Enviamos um link de recuperação para o seu email. Verifique sua caixa de entrada e siga as instruções para redefinir sua senha. ",-1)),e[56]||(e[56]=s("p",{class:"text-body-2 text-medium-emphasis"}," Não recebeu o email? Verifique a pasta de spam ou tente novamente em alguns minutos. ",-1))])):(m(),g($,{key:1,ref:"passwordRecoveryFormRef",modelValue:a.passwordRecoveryFormValid,"onUpdate:modelValue":e[16]||(e[16]=t=>a.passwordRecoveryFormValid=t),onSubmit:V(a.submitPasswordRecovery,["prevent"])},{default:l(()=>[e[58]||(e[58]=s("p",{class:"text-body-2 text-medium-emphasis mb-4"}," Digite seu endereço de email e enviaremos um link para redefinir sua senha. ",-1)),o(R,{modelValue:a.passwordRecoveryForm.email,"onUpdate:modelValue":e[15]||(e[15]=t=>a.passwordRecoveryForm.email=t),label:"Endereço de E-mail *",rules:a.recoveryEmailRules,variant:"outlined","prepend-inner-icon":"mdi-email",type:"email",placeholder:"Digite seu e-mail cadastrado",disabled:a.passwordRecoveryLoading,required:"",autofocus:""},null,8,["modelValue","disabled"]),o(Z,{type:"info",variant:"tonal",class:"mt-4"},{default:l(()=>[...e[57]||(e[57]=[s("div",{class:"d-flex align-center"},[s("div",null,[s("div",{class:"font-weight-medium mb-1"},"Como funciona:"),s("div",{class:"text-body-2"},[r(" 1. Digite o email da sua conta"),s("br"),r(' 2. Clique em "Enviar Link de Recuperação"'),s("br"),r(" 3. Verifique seu email e clique no link recebido"),s("br"),r(" 4. Defina uma nova senha segura ")])])],-1)])]),_:1})]),_:1},8,["modelValue"]))]),_:1}),a.passwordRecoverySuccess?x("",!0):(m(),g(Y,{key:0,class:"px-6 py-4 bg-surface border-t"},{default:l(()=>[o(ee),o(w,{variant:"text",onClick:a.closePasswordRecoveryDialog,disabled:a.passwordRecoveryLoading},{default:l(()=>[...e[59]||(e[59]=[r(" Cancelar ",-1)])]),_:1},8,["disabled"]),o(w,{color:"primary",variant:"flat",loading:a.passwordRecoveryLoading,disabled:!a.passwordRecoveryFormValid,onClick:a.submitPasswordRecovery},{default:l(()=>[o(d,{class:"me-2"},{default:l(()=>[...e[60]||(e[60]=[r("mdi-email-send",-1)])]),_:1}),e[61]||(e[61]=r(" Enviar Link de Recuperação ",-1))]),_:1},8,["loading","disabled"])]),_:1}))]),_:1})]),_:1},8,["modelValue"])])}const Va=xe(Fe,[["render",sa],["__scopeId","data-v-409777eb"],["__file","D:/Development/Projetos/Mira/mira-client/src/views/auth/LoginView.vue"]]);export{Va as default};
