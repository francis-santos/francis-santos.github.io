import{G as C,t as L,f as R,h as S,s as M,p as O,B as H,H as K,J as B,w as F,j as U,x as g,q as b}from"./vendor-vue-BOgiBTV5.js";import{o as N,G as V,h as j,y as q,H as z,Y as h}from"./index-CPKBv9AR.js";import{h as G,p as J,q as W,D as Y,az as k,H as A,u as $,ab as Q,aI as w,aJ as X,aK as Z}from"./vendor-ui-BR0KSDoQ.js";import{V as _}from"./dialog-transition-BRPqoOP4.js";const ee=J({id:String,submenu:Boolean,disableInitialFocus:Boolean,...Q(z({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:_}}),["absolute"])},"VMenu"),se=G()({name:"VMenu",props:ee(),emits:{"update:modelValue":t=>!0},setup(t,P){let{slots:p}=P;const o=W(t,"modelValue"),{scopeId:T}=N(),{isRtl:i}=Y(),f=C(),u=L(()=>t.id||`v-menu-${f}`),n=R(),l=S(h,null),c=M(new Set);O(h,{register(){c.value.add(f)},unregister(){c.value.delete(f)},closeParents(e){setTimeout(()=>{!c.value.size&&!t.persistent&&(e==null||n.value?.contentEl&&!Z(e,n.value.contentEl))&&(o.value=!1,l?.closeParents())},40)}}),H(()=>{l?.unregister(),document.removeEventListener("focusin",m)}),K(()=>o.value=!1);let d=!1,y=-1;async function v(){d=!0,y=window.setTimeout(()=>{d=!1},100)}async function m(e){const a=e.relatedTarget,s=e.target;await B(),o.value&&a!==s&&n.value?.rootEl&&n.value?.contentEl&&n.value?.localTop&&![document,n.value.rootEl].includes(s)&&!n.value.rootEl.contains(s)&&(d?!t.openOnHover&&!n.value.activatorEl?.contains(s)&&(o.value=!1):(k(n.value.contentEl)[0]?.focus(),document.removeEventListener("pointerdown",v)))}F(o,e=>{e?(l?.register(),A&&!t.disableInitialFocus&&(document.addEventListener("pointerdown",v),document.addEventListener("focusin",m,{once:!0}))):(l?.unregister(),A&&(clearTimeout(y),document.removeEventListener("pointerdown",v),document.removeEventListener("focusin",m)))},{immediate:!0});function D(e){l?.closeParents(e)}function I(e){if(!t.disabled)if(e.key==="Tab"||e.key==="Enter"&&!t.closeOnContentClick){if(e.key==="Enter"&&(e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLInputElement&&e.target.closest("form")))return;e.key==="Enter"&&e.preventDefault(),X(k(n.value?.contentEl,!1),e.shiftKey?"prev":"next",s=>s.tabIndex>=0)||(o.value=!1,n.value?.activatorEl?.focus())}else t.submenu&&e.key===(i.value?"ArrowRight":"ArrowLeft")&&(o.value=!1,n.value?.activatorEl?.focus())}function E(e){if(t.disabled)return;const a=n.value?.contentEl;a&&o.value?e.key==="ArrowDown"?(e.preventDefault(),e.stopImmediatePropagation(),w(a,"next")):e.key==="ArrowUp"?(e.preventDefault(),e.stopImmediatePropagation(),w(a,"prev")):t.submenu&&(e.key===(i.value?"ArrowRight":"ArrowLeft")?o.value=!1:e.key===(i.value?"ArrowLeft":"ArrowRight")&&(e.preventDefault(),w(a,"first"))):(t.submenu?e.key===(i.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(e.key))&&(o.value=!0,e.preventDefault(),setTimeout(()=>setTimeout(()=>E(e))))}const x=U(()=>g({"aria-haspopup":"menu","aria-expanded":String(o.value),"aria-controls":u.value,"aria-owns":u.value,onKeydown:E},t.activatorProps));return $(()=>{const e=V.filterProps(t);return b(V,g({ref:n,id:u.value,class:["v-menu",t.class],style:t.style},e,{modelValue:o.value,"onUpdate:modelValue":a=>o.value=a,absolute:!0,activatorProps:x.value,location:t.location??(t.submenu?"end":"bottom"),"onClick:outside":D,onKeydown:I},T),{activator:p.activator,default:function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return b(j,{root:"VMenu"},{default:()=>[p.default?.(...s)]})}})}),q({id:u,Î¨openChildren:c},n)}});export{se as V};
