import{j as X,d as x,h as S,af as Y,D as ee,Z as d,y as a,$ as g,a0 as m,n as e,a1 as t,ab as te,_ as c,aa as o,V as i,q as z,u as L,F as se,ah as ae,a6 as le}from"./vendor-vue-BKuzT1x2.js";import{r as oe}from"./repositories-Bk5__bRQ.js";import{u as ie}from"./useDemoMode-DpDjlFnd.js";import{b,c as P,a as n,t as re,_ as ne}from"./index-gFSB3kms.js";import{V as N}from"./VContainer-cArkWCkC.js";import{V as ce}from"./VAlert-BZmB2o6G.js";import{a as q}from"./VChip-BfcyEr4e.js";import{V as f,b as h,a as F,e as v}from"./VGrid-CBGRWS1y.js";import{a as w,V as E}from"./VRow-C_u8820H.js";import{c as M,V as p,a as _,d as y}from"./VList-Dg4abNUz.js";import{V as ue}from"./VTable-SZOAnLd3.js";import"./auth.service-BozCwdnf.js";import"./vendor-utils-6xD0fNU8.js";import"./token-storage.service-BqAv9k07.js";import"./auth--EmZq-C7.js";import"./vendor-ui-Ca7vMALJ.js";import"./ssrBoot-DJyMk-ri.js";const de={class:"repository-details-page"},me={class:"page-header pt-6"},fe={class:"header-navigation"},ve={key:0,class:"header-actions"},pe={class:"loading-content"},_e={class:"platform-info"},ye={class:"platform-icon-container"},ge={class:"repository-basic-info"},he={class:"repository-title"},we={class:"repository-fullname"},Se={key:0,class:"repository-desc"},be={class:"stat-icon"},Ae={class:"stat-info"},De={class:"stat-number"},ke={class:"stat-icon"},Ve={class:"stat-info"},Ce={class:"stat-number text-success"},Ie={class:"stat-icon"},xe={class:"stat-info"},ze={class:"stat-icon"},Ne={class:"stat-info"},qe={class:"stat-number text-orange"},Fe={class:"quality-content"},Oe={class:"quality-score"},Re={class:"score-circle"},Te={class:"score-value"},Be={class:"quality-progress"},Le={class:"success-progress"},Pe={key:0},Ee=["onClick"],Me={class:"commit-hash"},Ue={key:0,class:"score-text"},$e={key:1,class:"text-medium-emphasis"},Qe={class:"issues-count"},je={class:"date-column"},Ge={key:0},Ze=X({__name:"RepositoryDetailsView",setup(He){const U=Y(),O=te(),{isDemoUser:C}=ie(),s=x(null),I=x(!1),A=x(null),R=S(()=>U.params.id),D=S(()=>{if(!s.value)return"mdi-source-repository";switch(s.value.platform?.toLowerCase()){case"gitlab":return"mdi-gitlab";case"github":return"mdi-github";case"bitbucket":return"mdi-bitbucket";default:return"mdi-source-repository"}}),k=S(()=>{if(!s.value)return"grey";switch(s.value.platform?.toLowerCase()){case"gitlab":return"orange";case"github":return"grey-darken-2";case"bitbucket":return"blue";default:return"grey"}}),$=S(()=>{if(!s.value)return"grey";switch(s.value.syncStatus){case"active":return"success";case"paused":return"warning";case"error":return"error";default:return"grey"}}),Q=S(()=>{if(!s.value)return"";switch(s.value.syncStatus){case"active":return"Ativo";case"paused":return"Pausado";case"error":return"Erro";default:return s.value.syncStatus}});async function j(){I.value=!0,A.value=null;try{C.value?(await new Promise(r=>setTimeout(r,800)),s.value={id:R.value,name:"mira-analytics-platform",fullName:"mira-tech/mira-analytics-platform",platform:"gitlab",webUrl:"https://gitlab.com/mira-tech/mira-analytics-platform",syncStatus:"active",lastSyncAt:new Date(Date.now()-2700*1e3).toISOString(),lastAnalysisAt:new Date(Date.now()-1200*1e3).toISOString(),description:"Plataforma completa de análise de qualidade de código com IA integrada, dashboard analytics e integração com múltiplas plataformas Git",createdAt:new Date(Date.now()-1080*60*60*1e3).toISOString(),updatedAt:new Date(Date.now()-10800*1e3).toISOString(),statistics:{totalAnalyses:127,completedAnalyses:118,failedAnalyses:9,totalIssues:34,averageScore:8.3,lastAnalysisAt:new Date(Date.now()-1200*1e3).toISOString(),branches:12,contributors:15},recentAnalyses:[{id:"analysis-1",branchName:"feature/advanced-security-scan",commitSha:"a1b2c3d4e5f67890",status:"completed",qualityScore:8.7,issuesFound:4,createdAt:new Date(Date.now()-1200*1e3).toISOString(),completedAt:new Date(Date.now()-900*1e3).toISOString()},{id:"analysis-2",branchName:"master",commitSha:"f1e2d3c4b5a67890",status:"completed",qualityScore:8.9,issuesFound:2,createdAt:new Date(Date.now()-7200*1e3).toISOString(),completedAt:new Date(Date.now()-6600*1e3).toISOString()},{id:"analysis-3",branchName:"develop",commitSha:"1a2b3c4d5e6f7890",status:"processing",qualityScore:null,issuesFound:0,createdAt:new Date(Date.now()-600*1e3).toISOString(),completedAt:null},{id:"analysis-4",branchName:"hotfix/security-patch",commitSha:"9z8y7x6w5v4u3210",status:"completed",qualityScore:7.8,issuesFound:8,createdAt:new Date(Date.now()-360*60*1e3).toISOString(),completedAt:new Date(Date.now()-5.5*60*60*1e3).toISOString()},{id:"analysis-5",branchName:"feature/ai-integration",commitSha:"p9o8i7u6y5t4r321",status:"failed",qualityScore:null,issuesFound:0,createdAt:new Date(Date.now()-720*60*1e3).toISOString(),completedAt:null}]}):s.value=await oe.getRepository(R.value)}catch(r){A.value=r instanceof Error?r.message:"Erro ao carregar repositório",console.error("Error loading repository details:",r)}finally{I.value=!1}}function V(r){return r?new Date(r).toLocaleString("pt-BR"):"N/A"}function G(r){switch(r){case"completed":return"success";case"processing":return"warning";case"pending":return"info";case"failed":return"error";default:return"grey"}}function Z(r){switch(r){case"completed":return"Completa";case"processing":return"Processando";case"pending":return"Pendente";case"failed":return"Falhou";default:return r}}function T(r){O.push(`/analyses/${r.id}`)}function H(){O.push("/repositories")}function B(){s.value?.webUrl&&window.open(s.value.webUrl,"_blank")}function J(r){return r>=8?"excellent":r>=6?"good":"needs-improvement"}function K(r){return r>=8?"Excelente":r>=6?"Bom":"Precisa Melhorar"}return ee(()=>{j()}),(r,l)=>(c(),d("div",de,[a("div",me,[a("div",fe,[e(b,{icon:"mdi-arrow-left",variant:"text",class:"back-button",onClick:H}),l[0]||(l[0]=a("div",null,[a("h1",{class:"page-title"},"Detalhes do Repositório"),a("p",{class:"page-subtitle"},"Informações e análises do repositório")],-1))]),s.value?(c(),d("div",ve,[s.value.webUrl?(c(),g(b,{key:0,color:k.value,"prepend-icon":D.value,variant:"elevated",onClick:B},{default:t(()=>[...l[1]||(l[1]=[o(" Abrir Repositório ",-1)])]),_:1},8,["color","prepend-icon"])):m("",!0)])):m("",!0)]),I.value?(c(),g(N,{key:0,class:"loading-container"},{default:t(()=>[a("div",pe,[e(P,{indeterminate:"",color:"primary",size:"64"}),l[2]||(l[2]=a("p",{class:"loading-text"},"Carregando detalhes do repositório...",-1))])]),_:1})):A.value?(c(),g(N,{key:1},{default:t(()=>[e(ce,{type:"error",variant:"tonal",class:"error-alert"},{default:t(()=>[o(i(A.value),1)]),_:1})]),_:1})):s.value?(c(),g(N,{key:2,class:"repository-content"},{default:t(()=>[e(f,{class:"repository-header-card mb-6",elevation:"2"},{default:t(()=>[a("div",{class:z(["platform-header",`platform-${s.value.platform}`])},[a("div",_e,[a("div",ye,[e(n,{icon:D.value,size:"40",color:"white"},null,8,["icon"])]),a("div",ge,[a("h2",he,i(s.value.name),1),a("p",we,i(s.value.fullName),1),s.value.description?(c(),d("p",Se,i(s.value.description),1)):m("",!0)])]),e(q,{color:$.value,variant:"elevated",size:"large",class:"status-chip"},{default:t(()=>[e(n,{icon:s.value.syncStatus==="active"?"mdi-check-circle":s.value.syncStatus==="paused"?"mdi-pause-circle":"mdi-alert-circle",size:"16",class:"me-2"},null,8,["icon"]),o(" "+i(Q.value),1)]),_:1},8,["color"])],2)]),_:1}),e(E,{class:"mb-6"},{default:t(()=>[e(w,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(f,{class:"stat-card",elevation:"1"},{default:t(()=>[e(h,{class:"stat-content"},{default:t(()=>[a("div",be,[e(n,{icon:"mdi-chart-line",color:"primary",size:"32"})]),a("div",Ae,[a("div",De,i(s.value.statistics?.totalAnalyses||0),1),l[3]||(l[3]=a("div",{class:"stat-label"},"Total de Análises",-1))])]),_:1})]),_:1})]),_:1}),e(w,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(f,{class:"stat-card",elevation:"1"},{default:t(()=>[e(h,{class:"stat-content"},{default:t(()=>[a("div",ke,[e(n,{icon:"mdi-check-circle",color:"success",size:"32"})]),a("div",Ve,[a("div",Ce,i(s.value.statistics?.completedAnalyses||0),1),l[4]||(l[4]=a("div",{class:"stat-label"},"Análises Completas",-1))])]),_:1})]),_:1})]),_:1}),e(w,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(f,{class:"stat-card",elevation:"1"},{default:t(()=>[e(h,{class:"stat-content"},{default:t(()=>[a("div",Ie,[e(n,{icon:"mdi-bug",color:(s.value.statistics?.totalIssues||0)>0?"warning":"success",size:"32"},null,8,["color"])]),a("div",xe,[a("div",{class:z(["stat-number",(s.value.statistics?.totalIssues||0)>0?"text-warning":"text-success"])},i(s.value.statistics?.totalIssues||0),3),l[5]||(l[5]=a("div",{class:"stat-label"},"Issues Encontradas",-1))])]),_:1})]),_:1})]),_:1}),e(w,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(f,{class:"stat-card",elevation:"1"},{default:t(()=>[e(h,{class:"stat-content"},{default:t(()=>[a("div",ze,[e(n,{icon:"mdi-star",color:"orange",size:"32"})]),a("div",Ne,[a("div",qe,i(s.value.statistics?.averageScore?s.value.statistics.averageScore.toFixed(1):"N/A"),1),l[6]||(l[6]=a("div",{class:"stat-label"},"Score Médio",-1))])]),_:1})]),_:1})]),_:1})]),_:1}),s.value.statistics?.averageScore?(c(),g(f,{key:0,class:"quality-card mb-6",elevation:"2"},{default:t(()=>[e(F,{class:"quality-title"},{default:t(()=>[e(n,{icon:"mdi-target",class:"me-2"}),l[7]||(l[7]=o(" Qualidade do Código ",-1))]),_:1}),e(h,null,{default:t(()=>[a("div",Fe,[a("div",Oe,[a("div",Re,[a("span",Te,i(s.value.statistics.averageScore.toFixed(1)),1),l[8]||(l[8]=a("span",{class:"score-max"},"/10",-1))]),a("div",{class:z(["quality-label",J(s.value.statistics.averageScore)])},i(K(s.value.statistics.averageScore)),3)]),a("div",Be,[e(re,{"model-value":s.value.statistics.averageScore*10,color:s.value.statistics.averageScore>=8?"success":s.value.statistics.averageScore>=6?"warning":"error",height:"16",rounded:""},null,8,["model-value","color"])])])]),_:1})]),_:1})):m("",!0),e(f,{class:"repository-info-card mb-6",elevation:"2"},{default:t(()=>[e(F,{class:"info-card-title"},{default:t(()=>[e(n,{icon:"mdi-information",class:"me-2"}),l[9]||(l[9]=o(" Informações do Repositório ",-1))]),_:1}),e(h,null,{default:t(()=>[e(E,null,{default:t(()=>[e(w,{cols:"12",md:"6"},{default:t(()=>[e(M,{lines:"two",class:"info-list"},{default:t(()=>[e(p,null,{prepend:t(()=>[e(v,{color:k.value,size:"40",class:"info-avatar"},{default:t(()=>[e(n,{icon:D.value,color:"white"},null,8,["icon"])]),_:1},8,["color"])]),default:t(()=>[e(_,{class:"info-title"},{default:t(()=>[...l[10]||(l[10]=[o("Plataforma",-1)])]),_:1}),e(y,{class:"info-value"},{default:t(()=>[o(i(s.value.platform),1)]),_:1})]),_:1}),e(p,null,{prepend:t(()=>[e(v,{color:"info",size:"40",class:"info-avatar"},{default:t(()=>[e(n,{icon:"mdi-calendar-plus",color:"white"})]),_:1})]),default:t(()=>[e(_,{class:"info-title"},{default:t(()=>[...l[11]||(l[11]=[o("Data de Criação",-1)])]),_:1}),e(y,{class:"info-value"},{default:t(()=>[o(i(V(s.value.createdAt)),1)]),_:1})]),_:1}),e(p,null,{prepend:t(()=>[e(v,{color:"primary",size:"40",class:"info-avatar"},{default:t(()=>[e(n,{icon:"mdi-sync",color:"white"})]),_:1})]),default:t(()=>[e(_,{class:"info-title"},{default:t(()=>[...l[12]||(l[12]=[o("Última Sincronização",-1)])]),_:1}),e(y,{class:"info-value"},{default:t(()=>[o(i(V(s.value?.lastSyncAt)),1)]),_:1})]),_:1}),e(p,null,{prepend:t(()=>[e(v,{color:"secondary",size:"40",class:"info-avatar"},{default:t(()=>[e(n,{icon:"mdi-update",color:"white"})]),_:1})]),default:t(()=>[e(_,{class:"info-title"},{default:t(()=>[...l[13]||(l[13]=[o("Última Atualização",-1)])]),_:1}),e(y,{class:"info-value"},{default:t(()=>[o(i(V(s.value.updatedAt)),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{cols:"12",md:"6"},{default:t(()=>[e(M,{lines:"two",class:"info-list"},{default:t(()=>[e(p,null,{prepend:t(()=>[e(v,{color:(s.value.statistics?.failedAnalyses||0)>0?"error":"success",size:"40",class:"info-avatar"},{default:t(()=>[e(n,{icon:"mdi-alert-circle",color:"white"})]),_:1},8,["color"])]),default:t(()=>[e(_,{class:"info-title"},{default:t(()=>[...l[14]||(l[14]=[o("Análises com Falha",-1)])]),_:1}),e(y,{class:"info-value"},{default:t(()=>[o(i(s.value.statistics?.failedAnalyses||0),1)]),_:1})]),_:1}),e(p,null,{prepend:t(()=>[e(v,{color:"success",size:"40",class:"info-avatar"},{default:t(()=>[e(n,{icon:"mdi-source-branch",color:"white"})]),_:1})]),default:t(()=>[e(_,{class:"info-title"},{default:t(()=>[...l[15]||(l[15]=[o("Branches Analisados",-1)])]),_:1}),e(y,{class:"info-value"},{default:t(()=>[o(i(s.value.statistics?.branches||0),1)]),_:1})]),_:1}),e(p,null,{prepend:t(()=>[e(v,{color:"orange",size:"40",class:"info-avatar"},{default:t(()=>[e(n,{icon:"mdi-chart-line-variant",color:"white"})]),_:1})]),append:t(()=>[a("div",Le,[e(P,{"model-value":s.value.statistics?.totalAnalyses?Math.round((s.value.statistics.completedAnalyses||0)/s.value.statistics.totalAnalyses*100):0,size:"32",width:"3",color:"orange",class:"success-circle"},null,8,["model-value"])])]),default:t(()=>[e(_,{class:"info-title"},{default:t(()=>[...l[16]||(l[16]=[o("Taxa de Sucesso",-1)])]),_:1}),e(y,{class:"info-value"},{default:t(()=>[o(i(s.value.statistics?.totalAnalyses?Math.round((s.value.statistics.completedAnalyses||0)/s.value.statistics.totalAnalyses*100):0)+"% ",1)]),_:1})]),_:1}),s.value.webUrl?(c(),g(p,{key:0},{prepend:t(()=>[e(v,{color:k.value,size:"40",class:"info-avatar"},{default:t(()=>[e(n,{icon:"mdi-open-in-new",color:"white"})]),_:1},8,["color"])]),default:t(()=>[e(_,{class:"info-title"},{default:t(()=>[...l[17]||(l[17]=[o("Acesso Externo",-1)])]),_:1}),e(y,{class:"info-value"},{default:t(()=>[e(b,{color:k.value,variant:"text",size:"small","prepend-icon":D.value,onClick:B},{default:t(()=>[o(" Abrir no "+i(s.value.platform),1)]),_:1},8,["color","prepend-icon"])]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s.value.recentAnalyses&&s.value.recentAnalyses.length>0?(c(),g(f,{key:1,class:"analyses-card",elevation:"2"},{default:t(()=>[e(F,{class:"analyses-header"},{default:t(()=>[a("div",null,[e(n,{icon:"mdi-history",class:"me-2"}),l[18]||(l[18]=o(" Análises Recentes ",-1))]),e(b,{variant:"outlined",to:"/analyses","append-icon":"mdi-arrow-right"},{default:t(()=>[...l[19]||(l[19]=[o(" Ver Todas ",-1)])]),_:1})]),_:1}),e(h,null,{default:t(()=>[e(ue,null,{default:t(()=>[a("thead",null,[a("tr",null,[l[20]||(l[20]=a("th",null,"Branch",-1)),l[21]||(l[21]=a("th",null,"Commit",-1)),l[22]||(l[22]=a("th",null,"Status",-1)),l[23]||(l[23]=a("th",null,"Score",-1)),l[24]||(l[24]=a("th",null,"Issues",-1)),l[25]||(l[25]=a("th",null,"Data",-1)),L(C)?m("",!0):(c(),d("th",Pe,"Ações"))])]),a("tbody",null,[(c(!0),d(se,null,ae(s.value.recentAnalyses,u=>(c(),d("tr",{key:u.id,class:"analysis-row",onClick:W=>T(u)},[a("td",null,[e(q,{size:"small",variant:"tonal",color:"primary",class:"branch-chip"},{default:t(()=>[e(n,{icon:"mdi-source-branch",size:"12",class:"me-1"}),o(" "+i(u.branchName),1)]),_:2},1024)]),a("td",null,[a("code",Me,i(u.commitSha?.substring(0,8)||"N/A"),1)]),a("td",null,[e(q,{color:G(u.status),size:"small",variant:"tonal"},{default:t(()=>[o(i(Z(u.status)),1)]),_:2},1032,["color"])]),a("td",null,[u.qualityScore?(c(),d("span",Ue,i(u.qualityScore.toFixed(1)),1)):(c(),d("span",$e,"N/A"))]),a("td",null,[a("div",Qe,[e(n,{icon:u.issuesFound>0?"mdi-alert":"mdi-check-circle",size:"16",color:u.issuesFound>0?"warning":"success",class:"me-1"},null,8,["icon","color"]),o(" "+i(u.issuesFound),1)])]),a("td",je,i(V(u.createdAt)),1),L(C)?m("",!0):(c(),d("td",Ge,[e(b,{icon:"mdi-eye",variant:"text",size:"small",onClick:le(W=>T(u),["stop"])},null,8,["onClick"])]))],8,Ee))),128))])]),_:1})]),_:1})]),_:1})):m("",!0)]),_:1})):m("",!0)]))}}),mt=ne(Ze,[["__scopeId","data-v-f9728a6e"]]);export{mt as default};
